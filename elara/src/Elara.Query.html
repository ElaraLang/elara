<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE QuantifiedConstraints #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TypeData #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilyDependencies #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="annot"><span class="hs-comment">{- |
Module: Elara.Query
Description: This module defines the queries used in the Elara compiler.

    Queries are the way the compiler requests information between stages.
    Queries are lazy and memoised.

    This module defines the queries, and the main implementation is in 'Elara.Rules'
-}</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Elara.Query.html"><span class="hs-identifier">Elara.Query</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.GADT.Show.TH</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Hashable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">hash</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.FileSystem</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FileSystem</span></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Query.TH.html"><span class="hs-identifier">Elara.Query.TH</span></a></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Data</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">type</span><span> </span><span class="annot"><span class="hs-operator">(:~:)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Refl</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.GADT.Compare</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Graph</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SCC</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Kind</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Constraint</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">eqT</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">typeRep</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.Error.Static</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Error</span></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.Writer.Static.Local</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Generic.html"><span class="hs-identifier">Elara.AST.Generic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Annotation"><span class="hs-identifier">Annotation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier">Declaration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Select"><span class="hs-identifier">Select</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Introspection.html"><span class="hs-identifier">Elara.AST.Introspection</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Module.html"><span class="hs-identifier">Elara.AST.Module</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Name.html"><span class="hs-identifier">Elara.AST.Name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier">ModuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier">Qualified</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#TypeName"><span class="hs-identifier">TypeName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier">VarName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Region.html"><span class="hs-identifier">Elara.AST.Region</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#SourceRegion"><span class="hs-identifier">SourceRegion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Select.html"><span class="hs-identifier">Elara.AST.Select</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Typed.html"><span class="hs-identifier">Elara.AST.Typed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Typed.html#TypedExpr"><span class="hs-identifier">TypedExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.VarRef.html"><span class="hs-identifier">Elara.AST.VarRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.VarRef.html#IgnoreLocVarRef"><span class="hs-identifier">IgnoreLocVarRef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Core.html"><span class="hs-identifier">Elara.Core</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Core.html#CoreBind"><span class="hs-identifier">CoreBind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Core.html#DataCon"><span class="hs-identifier">DataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Core.html#TyCon"><span class="hs-identifier">TyCon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Core.html"><span class="hs-identifier">Elara.Core</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Core</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Core.ANF.html"><span class="hs-identifier">Elara.Core.ANF</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ANF</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Core.Module.html"><span class="hs-identifier">Elara.Core.Module</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Core.Module.html#CoreModule"><span class="hs-identifier">CoreModule</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Data.Kind.html"><span class="hs-identifier">Elara.Data.Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Data.Kind.html#KindVar"><span class="hs-identifier">KindVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Data.Pretty.html"><span class="hs-identifier">Elara.Data.Pretty</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Desugar.Error.html"><span class="hs-identifier">Elara.Desugar.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Desugar.Error.html#DesugarError"><span class="hs-identifier">DesugarError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Error.html"><span class="hs-identifier">Elara.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Error.Effect.html#DiagnosticWriter"><span class="hs-identifier">DiagnosticWriter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Lexer.Token.html"><span class="hs-identifier">Elara.Lexer.Token</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Lexer.Utils.html"><span class="hs-identifier">Elara.Lexer.Utils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Lexer.Utils.html#LexerError"><span class="hs-identifier">LexerError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Parse.Error.html"><span class="hs-identifier">Elara.Parse.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Parse.Error.html#ElaraParseError"><span class="hs-identifier">ElaraParseError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Parse.Error.html#WParseErrorBundle"><span class="hs-identifier">WParseErrorBundle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Parse.Stream.html"><span class="hs-identifier">Elara.Parse.Stream</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Parse.Stream.html#TokenStream"><span class="hs-identifier">TokenStream</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Query.Effects.html"><span class="hs-identifier">Elara.Query.Effects</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Query.Errors.html"><span class="hs-identifier">Elara.Query.Errors</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.ReadFile.html"><span class="hs-identifier">Elara.ReadFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.ReadFile.html#FileContents"><span class="hs-identifier">FileContents</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Rename.Error.html"><span class="hs-identifier">Elara.Rename.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Rename.Error.html#RenameError"><span class="hs-identifier">RenameError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.SCC.Type.html"><span class="hs-identifier">Elara.SCC.Type</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.SCC.Type.html#ReachableSubgraph"><span class="hs-identifier">ReachableSubgraph</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.SCC.Type.html#SCCKey"><span class="hs-identifier">SCCKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Settings.html"><span class="hs-identifier">Elara.Settings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Settings.html#CompilerSettings"><span class="hs-identifier">CompilerSettings</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html"><span class="hs-identifier">Elara.Shunt.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntError"><span class="hs-identifier">ShuntError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntWarning"><span class="hs-identifier">ShuntWarning</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html"><span class="hs-identifier">Elara.Shunt.Operator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier">OpInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpTable"><span class="hs-identifier">OpTable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.TypeInfer.Environment.html"><span class="hs-identifier">Elara.TypeInfer.Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.TypeInfer.Environment.html#TypeEnvKey"><span class="hs-identifier">TypeEnvKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.TypeInfer.Type.html"><span class="hs-identifier">Elara.TypeInfer.Type</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.TypeInfer.Type.html#Polytype"><span class="hs-identifier">Polytype</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.TypeInfer.Type.html#Type"><span class="hs-identifier">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Rock.html"><span class="hs-identifier">Rock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier">Rock</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Rock.Memo.html"><span class="hs-identifier">Rock.Memo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Rock.Memo.html#HasMemoiseE"><span class="hs-identifier">HasMemoiseE</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-keyword">type</span><span> </span><span id="WithRock"><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-var">WithRock</span></a></span></span><span> </span><span id="local-6989586621680042425"><span class="annot"><a href="#local-6989586621680042425"><span class="hs-identifier hs-type">effects</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock.Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Elara.Query.Query</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680042425"><span class="hs-identifier hs-type">effects</span></a></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="annot"><span class="hs-comment">{- | The effects required to run a specific query
| This should probably be moved to the 'SupportsQuery' class as an associated type
-}</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="QueryEffectsOf"><span class="annot"><a href="Elara.Query.html#QueryEffectsOf"><span class="hs-identifier hs-var">QueryEffectsOf</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042426"><span class="annot"><a href="#local-6989586621680042426"><span class="hs-identifier hs-type">q</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Query.html#QueryType"><span class="hs-identifier hs-type">QueryType</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680042427"><span class="annot"><a href="#local-6989586621680042427"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680042428"><span class="annot"><a href="#local-6989586621680042428"><span class="hs-identifier hs-type">es</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-72"></span><span>    </span><span id="QueryEffectsOf"><span class="annot"><a href="Elara.Query.html#QueryEffectsOf"><span class="hs-identifier hs-var">QueryEffectsOf</span></a></span></span><span> </span><span id="local-6989586621680042429"><span id="local-6989586621680042430"><span class="annot"><a href="#local-6989586621680042429"><span class="hs-identifier hs-type">q</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042430"><span class="hs-identifier hs-type">ast</span></a></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QuerySpecificEffectsOf"><span class="hs-identifier hs-type">QuerySpecificEffectsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042429"><span class="hs-identifier hs-type">q</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042430"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">data</span><span> </span><span id="Query"><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-var">Query</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042431"><span class="annot"><a href="#local-6989586621680042431"><span class="hs-identifier hs-type">es</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Effect</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span id="local-6989586621680042432"><span class="annot"><a href="#local-6989586621680042432"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-comment">-- \* Input Queries</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Query to get the compiler settings</span></span><span>
</span><span id="line-78"></span><span>    </span><span id="GetCompilerSettings"><span class="annot"><a href="Elara.Query.html#GetCompilerSettings"><span class="hs-identifier hs-var">GetCompilerSettings</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.Effects.html#MinimumQueryEffects"><span class="hs-identifier hs-type">MinimumQueryEffects</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Elara.Settings.html#CompilerSettings"><span class="hs-identifier hs-type">CompilerSettings</span></a></span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Query to get all the required input files to be passed to the compiler</span></span><span>
</span><span id="line-80"></span><span>    </span><span id="InputFiles"><span class="annot"><a href="Elara.Query.html#InputFiles"><span class="hs-identifier hs-var">InputFiles</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsMinimumQueryEffects"><span class="hs-identifier hs-type">ConsMinimumQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">FileSystem</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HashSet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Query to get the contents of a specific file</span></span><span>
</span><span id="line-82"></span><span>    </span><span id="GetFileContents"><span class="annot"><a href="Elara.Query.html#GetFileContents"><span class="hs-identifier hs-var">GetFileContents</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsMinimumQueryEffects"><span class="hs-identifier hs-type">ConsMinimumQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">FileSystem</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Error.Effect.html#DiagnosticWriter"><span class="hs-identifier hs-type">DiagnosticWriter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnsiStyle</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Elara.ReadFile.html#FileContents"><span class="hs-identifier hs-type">FileContents</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Query to get the file path of a module</span></span><span>
</span><span id="line-84"></span><span>    </span><span id="ModulePath"><span class="annot"><a href="Elara.Query.html#ModulePath"><span class="hs-identifier hs-var">ModulePath</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsMinimumQueryEffects"><span class="hs-identifier hs-type">ConsMinimumQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FileSystem</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-comment">-- \* Lexing and Parsing Queries</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Query to get the lexed tokens of a specific file</span></span><span>
</span><span id="line-88"></span><span>    </span><span id="LexedFile"><span class="annot"><a href="Elara.Query.html#LexedFile"><span class="hs-identifier hs-var">LexedFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Error</span></span><span> </span><span class="annot"><a href="Elara.Lexer.Utils.html#LexerError"><span class="hs-identifier hs-type">LexerError</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Elara.Lexer.Token.html#Lexeme"><span class="hs-identifier hs-type">Lexeme</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Query to get the parsed module from a file's contents and lexed tokens</span></span><span>
</span><span id="line-90"></span><span>    </span><span id="ParsedFile"><span class="annot"><a href="Elara.Query.html#ParsedFile"><span class="hs-identifier hs-var">ParsedFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Parse.Error.html#WParseErrorBundle"><span class="hs-identifier hs-type">WParseErrorBundle</span></a></span><span> </span><span class="annot"><a href="Elara.Parse.Stream.html#TokenStream"><span class="hs-identifier hs-type">TokenStream</span></a></span><span> </span><span class="annot"><a href="Elara.Parse.Error.html#ElaraParseError"><span class="hs-identifier hs-type">ElaraParseError</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Elara.AST.Select.html#Frontend"><span class="hs-identifier hs-type">Frontend</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Query to get a parsed module by module name</span></span><span>
</span><span id="line-92"></span><span>    </span><span id="ParsedModule"><span class="annot"><a href="Elara.Query.html#ParsedModule"><span class="hs-identifier hs-var">ParsedModule</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-93"></span><span>        </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-94"></span><span>        </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span>
</span><span id="line-95"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Parse.Error.html#WParseErrorBundle"><span class="hs-identifier hs-type">WParseErrorBundle</span></a></span><span> </span><span class="annot"><a href="Elara.Parse.Stream.html#TokenStream"><span class="hs-identifier hs-type">TokenStream</span></a></span><span> </span><span class="annot"><a href="Elara.Parse.Error.html#ElaraParseError"><span class="hs-identifier hs-type">ElaraParseError</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Elara.AST.Select.html#Frontend"><span class="hs-identifier hs-type">Frontend</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-comment">-- \* Desugaring and Renaming Queries</span><span>
</span><span id="line-98"></span><span>    </span><span id="DesugaredModule"><span class="annot"><a href="Elara.Query.html#DesugaredModule"><span class="hs-identifier hs-var">DesugaredModule</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-100"></span><span>        </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Error</span></span><span> </span><span class="annot"><a href="Elara.Desugar.Error.html#DesugarError"><span class="hs-identifier hs-type">DesugarError</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Elara.AST.Select.html#Desugared"><span class="hs-identifier hs-type">Desugared</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>    </span><span id="RenamedModule"><span class="annot"><a href="Elara.Query.html#RenamedModule"><span class="hs-identifier hs-var">RenamedModule</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Error</span></span><span> </span><span class="annot"><a href="Elara.Rename.Error.html#RenameError"><span class="hs-identifier hs-type">RenameError</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Lookup a module by name</span></span><span>
</span><span id="line-103"></span><span>    </span><span id="ModuleByName"><span class="annot"><a href="Elara.Query.html#ModuleByName"><span class="hs-identifier hs-var">ModuleByName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-104"></span><span>        </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042443"><span class="annot"><a href="#local-6989586621680042443"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Select.html#LocatedAST"><span class="hs-identifier hs-type">LocatedAST</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-105"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680042443"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-106"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#SupportsQuery"><span class="hs-identifier hs-type">SupportsQuery</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryModuleByName"><span class="hs-identifier hs-type">QueryModuleByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042443"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-107"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.Effects.html#HasMinimumQueryEffects"><span class="hs-identifier hs-type">HasMinimumQueryEffects</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryEffectsOf"><span class="hs-identifier hs-type">QueryEffectsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryModuleByName"><span class="hs-identifier hs-type">QueryModuleByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042443"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>        </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-109"></span><span>        </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryEffectsOf"><span class="hs-identifier hs-type">QueryEffectsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryModuleByName"><span class="hs-identifier hs-type">QueryModuleByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042443"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-type">QueryReturnTypeOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryModuleByName"><span class="hs-identifier hs-type">QueryModuleByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042443"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-comment">--  | Lookup a declaration by name, which may not exist</span><span>
</span><span id="line-111"></span><span>    </span><span id="DeclarationByName"><span class="annot"><a href="Elara.Query.html#DeclarationByName"><span class="hs-identifier hs-var">DeclarationByName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-112"></span><span>        </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042445"><span class="annot"><a href="#local-6989586621680042445"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Select.html#LocatedAST"><span class="hs-identifier hs-type">LocatedAST</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-113"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680042445"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-114"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#SupportsQuery"><span class="hs-identifier hs-type">SupportsQuery</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryDeclarationByName"><span class="hs-identifier hs-type">QueryDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042445"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-115"></span><span>        </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-116"></span><span>        </span><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-type">QueryArgsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryDeclarationByName"><span class="hs-identifier hs-type">QueryDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042445"><span class="hs-identifier hs-type">ast</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-117"></span><span>        </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span>
</span><span id="line-118"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryEffectsOf"><span class="hs-identifier hs-type">QueryEffectsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryDeclarationByName"><span class="hs-identifier hs-type">QueryDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042445"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-type">QueryReturnTypeOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryDeclarationByName"><span class="hs-identifier hs-type">QueryDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042445"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-comment">--  | Lookup a declaration by name, which must exist, throwing an 'InternalError' if not found</span><span>
</span><span id="line-121"></span><span>    </span><span id="RequiredDeclarationByName"><span class="annot"><a href="Elara.Query.html#RequiredDeclarationByName"><span class="hs-identifier hs-var">RequiredDeclarationByName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-122"></span><span>        </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042447"><span class="annot"><a href="#local-6989586621680042447"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Select.html#LocatedAST"><span class="hs-identifier hs-type">LocatedAST</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-123"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680042447"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-124"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#SupportsQuery"><span class="hs-identifier hs-type">SupportsQuery</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryRequiredDeclarationByName"><span class="hs-identifier hs-type">QueryRequiredDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042447"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-125"></span><span>        </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-126"></span><span>        </span><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-type">QueryArgsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryRequiredDeclarationByName"><span class="hs-identifier hs-type">QueryRequiredDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042447"><span class="hs-identifier hs-type">ast</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span>
</span><span id="line-128"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryEffectsOf"><span class="hs-identifier hs-type">QueryEffectsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryRequiredDeclarationByName"><span class="hs-identifier hs-type">QueryRequiredDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042447"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-type">QueryReturnTypeOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryRequiredDeclarationByName"><span class="hs-identifier hs-type">QueryRequiredDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042447"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Looks up the declaration for a data constructor</span></span><span>
</span><span id="line-131"></span><span>    </span><span id="ConstructorDeclaration"><span class="annot"><a href="Elara.Query.html#ConstructorDeclaration"><span class="hs-identifier hs-var">ConstructorDeclaration</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-132"></span><span>        </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042449"><span class="annot"><a href="#local-6989586621680042449"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Select.html#LocatedAST"><span class="hs-identifier hs-type">LocatedAST</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-133"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680042449"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Select"><span class="hs-identifier hs-type">Select</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#ConRef"><span class="hs-identifier hs-type">ConRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042449"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Select"><span class="hs-identifier hs-type">Select</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#ConRef"><span class="hs-identifier hs-type">ConRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042449"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#SupportsQuery"><span class="hs-identifier hs-type">SupportsQuery</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryConstructorDeclaration"><span class="hs-identifier hs-type">QueryConstructorDeclaration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042449"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-134"></span><span>        </span><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-type">QueryArgsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryConstructorDeclaration"><span class="hs-identifier hs-type">QueryConstructorDeclaration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042449"><span class="hs-identifier hs-type">ast</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-135"></span><span>        </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryEffectsOf"><span class="hs-identifier hs-type">QueryEffectsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryConstructorDeclaration"><span class="hs-identifier hs-type">QueryConstructorDeclaration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042449"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-type">QueryReturnTypeOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryConstructorDeclaration"><span class="hs-identifier hs-type">QueryConstructorDeclaration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042449"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>    </span><span id="DeclarationAnnotations"><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-var">DeclarationAnnotations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-137"></span><span>        </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042451"><span class="annot"><a href="#local-6989586621680042451"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Select.html#LocatedAST"><span class="hs-identifier hs-type">LocatedAST</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-138"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680042451"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#SupportsQuery"><span class="hs-identifier hs-type">SupportsQuery</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-type">DeclarationAnnotations</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042451"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-139"></span><span>        </span><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-type">QueryArgsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryDeclarationByName"><span class="hs-identifier hs-type">QueryDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042451"><span class="hs-identifier hs-type">ast</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-140"></span><span>        </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryEffectsOf"><span class="hs-identifier hs-type">QueryEffectsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-type">DeclarationAnnotations</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042451"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-type">QueryReturnTypeOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-type">DeclarationAnnotations</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042451"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>    </span><span id="DeclarationAnnotationsOfType"><span class="annot"><a href="Elara.Query.html#DeclarationAnnotationsOfType"><span class="hs-identifier hs-var">DeclarationAnnotationsOfType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-142"></span><span>        </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042453"><span class="annot"><a href="#local-6989586621680042453"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Select.html#LocatedAST"><span class="hs-identifier hs-type">LocatedAST</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-143"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680042453"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-144"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#SupportsQuery"><span class="hs-identifier hs-type">SupportsQuery</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotationsOfType"><span class="hs-identifier hs-type">DeclarationAnnotationsOfType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042453"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-145"></span><span>        </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-146"></span><span>        </span><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-type">QueryArgsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotationsOfType"><span class="hs-identifier hs-type">DeclarationAnnotationsOfType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042453"><span class="hs-identifier hs-type">ast</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-147"></span><span>        </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span>
</span><span id="line-148"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryEffectsOf"><span class="hs-identifier hs-type">QueryEffectsOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-type">DeclarationAnnotations</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042453"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-type">QueryReturnTypeOf</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-type">DeclarationAnnotations</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042453"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-comment">-- \* Shunting Queries</span><span>
</span><span id="line-151"></span><span>    </span><span id="GetOpInfo"><span class="annot"><a href="Elara.Query.html#GetOpInfo"><span class="hs-identifier hs-var">GetOpInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.VarRef.html#IgnoreLocVarRef"><span class="hs-identifier hs-type">IgnoreLocVarRef</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntWarning"><span class="hs-identifier hs-type">ShuntWarning</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Error</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntError"><span class="hs-identifier hs-type">ShuntError</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-type">OpInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>    </span><span id="GetOpTableIn"><span class="annot"><a href="Elara.Query.html#GetOpTableIn"><span class="hs-identifier hs-var">GetOpTableIn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpTable"><span class="hs-identifier hs-type">OpTable</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-comment">-- \* Pre-Inference Queries</span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-comment">-- These are related to preparing SCCs etc for type inference</span><span>
</span><span id="line-155"></span><span>    </span><span id="FreeVarsOf"><span class="annot"><a href="Elara.Query.html#FreeVarsOf"><span class="hs-identifier hs-var">FreeVarsOf</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HashSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>    </span><span id="ReachableSubgraphOf"><span class="annot"><a href="Elara.Query.html#ReachableSubgraphOf"><span class="hs-identifier hs-var">ReachableSubgraphOf</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Elara.SCC.Type.html#ReachableSubgraph"><span class="hs-identifier hs-type">ReachableSubgraph</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span id="GetSCCsOf"><span class="annot"><a href="Elara.Query.html#GetSCCsOf"><span class="hs-identifier hs-var">GetSCCsOf</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SCC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-158"></span><span>    </span><span id="SCCKeyOf"><span class="annot"><a href="Elara.Query.html#SCCKeyOf"><span class="hs-identifier hs-var">SCCKeyOf</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Elara.SCC.Type.html#SCCKey"><span class="hs-identifier hs-type">SCCKey</span></a></span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-comment">-- \* Type and Kind Inference Queries</span><span>
</span><span id="line-160"></span><span>    </span><span id="TypeCheckedModule"><span class="annot"><a href="Elara.Query.html#TypeCheckedModule"><span class="hs-identifier hs-var">TypeCheckedModule</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Elara.AST.Select.html#Typed"><span class="hs-identifier hs-type">Typed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>    </span><span id="TypeCheckedExpr"><span class="annot"><a href="Elara.Query.html#TypeCheckedExpr"><span class="hs-identifier hs-var">TypeCheckedExpr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Elara.AST.Typed.html#TypedExpr"><span class="hs-identifier hs-type">TypedExpr</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span id="local-6989586621680042462"><span id="TypeOf"><span class="annot"><a href="Elara.Query.html#TypeOf"><span class="hs-identifier hs-var">TypeOf</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680042462"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Elara.AST.Region.html#SourceRegion"><span class="hs-identifier hs-type">SourceRegion</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Elara.TypeInfer.Environment.html#TypeEnvKey"><span class="hs-identifier hs-type">TypeEnvKey</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042462"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.TypeInfer.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042462"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-163"></span><span>    </span><span id="InferSCC"><span class="annot"><a href="Elara.Query.html#InferSCC"><span class="hs-identifier hs-var">InferSCC</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.SCC.Type.html#SCCKey"><span class="hs-identifier hs-type">SCCKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.TypeInfer.Type.html#Polytype"><span class="hs-identifier hs-type">Polytype</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Region.html#SourceRegion"><span class="hs-identifier hs-type">SourceRegion</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>    </span><span id="KindOf"><span class="annot"><a href="Elara.Query.html#KindOf"><span class="hs-identifier hs-var">KindOf</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#TypeName"><span class="hs-identifier hs-type">TypeName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Elara.Data.Kind.html#KindVar"><span class="hs-identifier hs-type">KindVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-comment">-- \* To Core Queries</span><span>
</span><span id="line-166"></span><span>    </span><span id="GetCoreModule"><span class="annot"><a href="Elara.Query.html#GetCoreModule"><span class="hs-identifier hs-var">GetCoreModule</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Core.Module.html#CoreModule"><span class="hs-identifier hs-type">CoreModule</span></a></span><span> </span><span class="annot"><a href="Elara.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>    </span><span id="GetTyCon"><span class="annot"><a href="Elara.Query.html#GetTyCon"><span class="hs-identifier hs-var">GetTyCon</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Elara.Core.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>    </span><span id="GetDataCon"><span class="annot"><a href="Elara.Query.html#GetDataCon"><span class="hs-identifier hs-var">GetDataCon</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#TypeName"><span class="hs-identifier hs-type">TypeName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Elara.Core.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-comment">-- \* Core To Core</span><span>
</span><span id="line-170"></span><span>    </span><span id="GetOptimisedCoreModule"><span class="annot"><a href="Elara.Query.html#GetOptimisedCoreModule"><span class="hs-identifier hs-var">GetOptimisedCoreModule</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Core.Module.html#CoreModule"><span class="hs-identifier hs-type">CoreModule</span></a></span><span> </span><span class="annot"><a href="Elara.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>    </span><span id="GetANFCoreModule"><span class="annot"><a href="Elara.Query.html#GetANFCoreModule"><span class="hs-identifier hs-var">GetANFCoreModule</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Core.Module.html#CoreModule"><span class="hs-identifier hs-type">CoreModule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Core.ANF.html#TopLevelBind"><span class="hs-identifier hs-type">ANF.TopLevelBind</span></a></span><span> </span><span class="annot"><a href="Elara.Core.html#Var"><span class="hs-identifier hs-type">Core.Var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>    </span><span id="GetClosureLiftedModule"><span class="annot"><a href="Elara.Query.html#GetClosureLiftedModule"><span class="hs-identifier hs-var">GetClosureLiftedModule</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Core.Module.html#CoreModule"><span class="hs-identifier hs-type">CoreModule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Core.ANF.html#TopLevelBind"><span class="hs-identifier hs-type">ANF.TopLevelBind</span></a></span><span> </span><span class="annot"><a href="Elara.Core.html#Var"><span class="hs-identifier hs-type">Core.Var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>    </span><span id="GetFinalisedCoreModule"><span class="annot"><a href="Elara.Query.html#GetFinalisedCoreModule"><span class="hs-identifier hs-var">GetFinalisedCoreModule</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#WithRock"><span class="hs-identifier hs-type">WithRock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Core.Module.html#CoreModule"><span class="hs-identifier hs-type">CoreModule</span></a></span><span> </span><span class="annot"><a href="Elara.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="annot"><span class="hs-comment">-- | List of query kinds at the type level</span></span><span>
</span><span id="line-176"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">data</span><span> </span><span id="QueryType"><span class="annot"><a href="Elara.Query.html#QueryType"><span class="hs-identifier hs-var">QueryType</span></a></span></span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="QueryRequiredDeclarationByName"><span class="annot"><a href="Elara.Query.html#QueryRequiredDeclarationByName"><span class="hs-identifier hs-var">QueryRequiredDeclarationByName</span></a></span></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="QueryDeclarationByName"><span class="annot"><a href="Elara.Query.html#QueryDeclarationByName"><span class="hs-identifier hs-var">QueryDeclarationByName</span></a></span></span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="QueryModuleByName"><span class="annot"><a href="Elara.Query.html#QueryModuleByName"><span class="hs-identifier hs-var">QueryModuleByName</span></a></span></span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="QueryConstructorDeclaration"><span class="annot"><a href="Elara.Query.html#QueryConstructorDeclaration"><span class="hs-identifier hs-var">QueryConstructorDeclaration</span></a></span></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="DeclarationAnnotations"><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-var">DeclarationAnnotations</span></a></span></span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="DeclarationAnnotationsOfType"><span class="annot"><a href="Elara.Query.html#DeclarationAnnotationsOfType"><span class="hs-identifier hs-var">DeclarationAnnotationsOfType</span></a></span></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="QueryReturnTypeOf"><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-var">QueryReturnTypeOf</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042473"><span class="annot"><a href="#local-6989586621680042473"><span class="hs-identifier hs-type">q</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Query.html#QueryType"><span class="hs-identifier hs-type">QueryType</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680042474"><span class="annot"><a href="#local-6989586621680042474"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680042475"><span class="annot"><a href="#local-6989586621680042475"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-185"></span><span>    </span><span id="QueryReturnTypeOf"><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-var">QueryReturnTypeOf</span></a></span></span><span> </span><span id="local-6989586621680042476"><span class="annot"><a href="Elara.Query.html#QueryDeclarationByName"><span class="hs-identifier hs-type">QueryDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042476"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-type">Declaration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042476"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>    </span><span id="QueryReturnTypeOf"><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-var">QueryReturnTypeOf</span></a></span></span><span> </span><span id="local-6989586621680042477"><span class="annot"><a href="Elara.Query.html#QueryRequiredDeclarationByName"><span class="hs-identifier hs-type">QueryRequiredDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042477"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-type">Declaration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042477"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span id="QueryReturnTypeOf"><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-var">QueryReturnTypeOf</span></a></span></span><span> </span><span id="local-6989586621680042478"><span class="annot"><a href="Elara.Query.html#QueryModuleByName"><span class="hs-identifier hs-type">QueryModuleByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042478"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042478"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span id="QueryReturnTypeOf"><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-var">QueryReturnTypeOf</span></a></span></span><span> </span><span id="local-6989586621680042479"><span class="annot"><a href="Elara.Query.html#QueryConstructorDeclaration"><span class="hs-identifier hs-type">QueryConstructorDeclaration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042479"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-type">Declaration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042479"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-189"></span><span>    </span><span id="QueryReturnTypeOf"><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-var">QueryReturnTypeOf</span></a></span></span><span> </span><span id="local-6989586621680042480"><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-type">DeclarationAnnotations</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042480"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042480"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-190"></span><span>    </span><span id="QueryReturnTypeOf"><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-var">QueryReturnTypeOf</span></a></span></span><span> </span><span id="local-6989586621680042481"><span class="annot"><a href="Elara.Query.html#DeclarationAnnotationsOfType"><span class="hs-identifier hs-type">DeclarationAnnotationsOfType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042481"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042481"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="QueryArgsOf"><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-var">QueryArgsOf</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042482"><span class="annot"><a href="#local-6989586621680042482"><span class="hs-identifier hs-type">q</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Query.html#QueryType"><span class="hs-identifier hs-type">QueryType</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680042483"><span class="annot"><a href="#local-6989586621680042483"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-193"></span><span>    </span><span id="QueryArgsOf"><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-var">QueryArgsOf</span></a></span></span><span> </span><span id="local-6989586621680042484"><span class="annot"><a href="Elara.Query.html#QueryDeclarationByName"><span class="hs-identifier hs-type">QueryDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042484"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-194"></span><span>    </span><span id="QueryArgsOf"><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-var">QueryArgsOf</span></a></span></span><span> </span><span id="local-6989586621680042485"><span class="annot"><a href="Elara.Query.html#QueryRequiredDeclarationByName"><span class="hs-identifier hs-type">QueryRequiredDeclarationByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042485"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span id="QueryArgsOf"><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-var">QueryArgsOf</span></a></span></span><span> </span><span id="local-6989586621680042486"><span class="annot"><a href="Elara.Query.html#QueryModuleByName"><span class="hs-identifier hs-type">QueryModuleByName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042486"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span id="QueryArgsOf"><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-var">QueryArgsOf</span></a></span></span><span> </span><span id="local-6989586621680042487"><span class="annot"><a href="Elara.Query.html#QueryConstructorDeclaration"><span class="hs-identifier hs-type">QueryConstructorDeclaration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042487"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Select"><span class="hs-identifier hs-type">Select</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#ConRef"><span class="hs-identifier hs-type">ConRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042487"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>    </span><span id="QueryArgsOf"><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-var">QueryArgsOf</span></a></span></span><span> </span><span id="local-6989586621680042488"><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-type">DeclarationAnnotations</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042488"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-comment">-- \| Args are (declaration name, type name)</span><span>
</span><span id="line-199"></span><span>    </span><span id="QueryArgsOf"><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-var">QueryArgsOf</span></a></span></span><span> </span><span id="local-6989586621680042489"><span class="annot"><a href="Elara.Query.html#DeclarationAnnotationsOfType"><span class="hs-identifier hs-type">DeclarationAnnotationsOfType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042489"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-200"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-201"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#TypeName"><span class="hs-identifier hs-type">TypeName</span></a></span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-keyword">class</span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621680042187"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.Effects.html#HasMinimumQueryEffects"><span class="hs-identifier hs-type">HasMinimumQueryEffects</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryEffectsOf"><span class="hs-identifier hs-type">QueryEffectsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042186"><span class="hs-identifier hs-type">q</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042187"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-208"></span><span>    </span><span id="SupportsQuery"><span class="annot"><a href="Elara.Query.html#SupportsQuery"><span class="hs-identifier hs-var">SupportsQuery</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042186"><span class="annot"><a href="#local-6989586621680042186"><span class="hs-identifier hs-type">q</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Query.html#QueryType"><span class="hs-identifier hs-type">QueryType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042187"><span class="annot"><a href="#local-6989586621680042187"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Select.html#LocatedAST"><span class="hs-identifier hs-type">LocatedAST</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-comment">{- | Effects that are &quot;unique&quot; to this query.
    Effects included in 'MinimumQueryEffects' should not be included here as they are expected to always be present
    -}</span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="QuerySpecificEffectsOf"><span class="annot"><a href="Elara.Query.html#QuerySpecificEffectsOf"><span class="hs-identifier hs-var">QuerySpecificEffectsOf</span></a></span></span><span> </span><span id="local-6989586621680042186"><span class="annot"><a href="#local-6989586621680042186"><span class="hs-identifier hs-type">q</span></a></span></span><span> </span><span id="local-6989586621680042187"><span class="annot"><a href="#local-6989586621680042187"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Effect</span></span><span class="hs-special">]</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="QuerySpecificEffectsOf"><span class="annot"><a href="Elara.Query.html#QuerySpecificEffectsOf"><span class="hs-identifier hs-var">QuerySpecificEffectsOf</span></a></span></span><span> </span><span id="local-6989586621680042492"><span id="local-6989586621680042493"><span class="annot"><a href="#local-6989586621680042492"><span class="hs-identifier hs-type">q</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042493"><span class="hs-identifier hs-type">ast</span></a></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.Query.Errors.html#StandardQueryError"><span class="hs-identifier hs-type">StandardQueryError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042493"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span>    </span><span id="query"><span class="annot"><a href="Elara.Query.html#query"><span class="hs-identifier hs-type">query</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#QueryArgsOf"><span class="hs-identifier hs-type">QueryArgsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042186"><span class="hs-identifier hs-type">q</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042187"><span class="hs-identifier hs-type">ast</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryEffectsOf"><span class="hs-identifier hs-type">QueryEffectsOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042186"><span class="hs-identifier hs-type">q</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042187"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#QueryReturnTypeOf"><span class="hs-identifier hs-type">QueryReturnTypeOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042186"><span class="hs-identifier hs-type">q</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042187"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="SupportsQueries"><span class="annot"><a href="Elara.Query.html#SupportsQueries"><span class="hs-identifier hs-var">SupportsQueries</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042498"><span class="annot"><a href="#local-6989586621680042498"><span class="hs-identifier hs-type">qs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Elara.Query.html#QueryType"><span class="hs-identifier hs-type">QueryType</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042499"><span class="annot"><a href="#local-6989586621680042499"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Select.html#LocatedAST"><span class="hs-identifier hs-type">LocatedAST</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680042500"><span class="annot"><a href="#local-6989586621680042500"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Constraint</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-220"></span><span>    </span><span id="SupportsQueries"><span class="annot"><a href="Elara.Query.html#SupportsQueries"><span class="hs-identifier hs-var">SupportsQueries</span></a></span></span><span> </span><span id="local-6989586621680042501"><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680042501"><span class="hs-identifier hs-type">ast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>    </span><span id="SupportsQueries"><span class="annot"><a href="Elara.Query.html#SupportsQueries"><span class="hs-identifier hs-var">SupportsQueries</span></a></span></span><span> </span><span id="local-6989586621680042502"><span id="local-6989586621680042503"><span id="local-6989586621680042504"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680042502"><span class="hs-identifier hs-type">q</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680042503"><span class="hs-identifier hs-type">qs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680042504"><span class="hs-identifier hs-type">ast</span></a></span></span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-222"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Elara.Query.html#SupportsQuery"><span class="hs-identifier hs-type">SupportsQuery</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042502"><span class="hs-identifier hs-type">q</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042504"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-223"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#SupportsQueries"><span class="hs-identifier hs-type">SupportsQueries</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042503"><span class="hs-identifier hs-type">qs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042504"><span class="hs-identifier hs-type">ast</span></a></span><span>
</span><span id="line-224"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680042197"><span id="local-6989586621680042198"><span id="local-6989586621680042508"><span class="annot"><span class="hs-identifier hs-type">GEq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042197"><span class="hs-identifier hs-type">es</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042197"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042198"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-227"></span><span>    </span><span id="local-6989586621680042513"><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680042513"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680042514"><span class="annot"><span class="annottext">== :: Query es a -&gt; Query es a -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621680042515"><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680042515"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Query es a -&gt; Query es a -&gt; Maybe (a :~: a)
forall a b. Query es a -&gt; Query es b -&gt; Maybe (a :~: b)
forall k (f :: k -&gt; *) (a :: k) (b :: k).
GEq f =&gt;
f a -&gt; f b -&gt; Maybe (a :~: b)
</span><span class="hs-identifier hs-var">geq</span></span><span> </span><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680042513"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680042515"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-228"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">a :~: a
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-229"></span><span>        </span><span class="annot"><span class="annottext">Maybe (a :~: a)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="hs-comment">-- deriving instance Show (Select ConRef ast) =&gt; Show (Query es a)</span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-special">$</span><span id="local-6989586621680042204"><span id="local-6989586621680042205"><span id="tagQuery"><span class="hs-special">(</span><span class="hs-identifier">makeTag</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Query</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-234"></span><span class="hs-special">$</span><span id="local-6989586621680042279"><span id="local-6989586621680042280"><span id="withMemoiseEQuery"><span class="hs-special">(</span><span class="hs-identifier">makeWithMemoiseE</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Query</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680042308"><span class="annot"><span class="hs-identifier hs-type">GCompare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042308"><span class="hs-identifier hs-type">es</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">GEq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042308"><span class="hs-identifier hs-type">es</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-237"></span><span>    </span><span id="local-6989586621680043199"><span class="annot"><span class="annottext">geq :: forall a b. Query es a -&gt; Query es b -&gt; Maybe (a :~: b)
</span><span class="hs-identifier hs-var hs-var hs-var">geq</span></span></span><span> </span><span id="local-6989586621680043200"><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680043200"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680043201"><span class="annot"><span class="annottext">Query es b
</span><a href="#local-6989586621680043201"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Query es a -&gt; Query es b -&gt; GOrdering a b
forall a b. Query es a -&gt; Query es b -&gt; GOrdering a b
forall k (f :: k -&gt; *) (a :: k) (b :: k).
GCompare f =&gt;
f a -&gt; f b -&gt; GOrdering a b
</span><span class="hs-identifier hs-var">gcompare</span></span><span> </span><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680043200"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Query es b
</span><a href="#local-6989586621680043201"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-238"></span><span>        </span><span class="annot"><span class="annottext">GOrdering a b
</span><span class="hs-identifier hs-var">GEQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a :~: b) -&gt; Maybe (a :~: b)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">a :~: a
a :~: b
forall {k} (a :: k). a :~: a
</span><span class="hs-identifier hs-var">Refl</span></span><span>
</span><span id="line-239"></span><span>        </span><span class="annot"><span class="annottext">GOrdering a b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (a :~: b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-240"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680042319"><span class="annot"><span class="hs-identifier hs-type">GCompare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042319"><span class="hs-identifier hs-type">es</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-241"></span><span>    </span><span id="local-6989586621680043213"><span class="annot"><span class="annottext">gcompare :: forall a b. Query es a -&gt; Query es b -&gt; GOrdering a b
</span><span class="hs-identifier hs-var hs-var hs-var">gcompare</span></span></span><span> </span><span id="local-6989586621680043214"><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680043214"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680043215"><span class="annot"><span class="annottext">Query es b
</span><a href="#local-6989586621680043215"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-242"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Query es a -&gt; Int
forall (es :: [Effect]) a. Query es a -&gt; Int
</span><a href="#local-6989586621680043217"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680043214"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Query es b -&gt; Int
forall (es :: [Effect]) a. Query es a -&gt; Int
</span><a href="#local-6989586621680043217"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Query es b
</span><a href="#local-6989586621680043215"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-comment">-- first compare tags (i.e. constructors)</span><span>
</span><span id="line-243"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a b
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-244"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a b
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-245"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Query es a -&gt; Query es b -&gt; GOrdering a b
forall a b. Query es a -&gt; Query es b -&gt; GOrdering a b
</span><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680043214"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Query es b
</span><a href="#local-6989586621680043215"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-246"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>        </span><span id="local-6989586621680043217"><span class="annot"><span class="annottext">tag :: Query es a -&gt; Int
</span><a href="#local-6989586621680043217"><span class="hs-identifier hs-var hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Query es a -&gt; Int
forall (es :: [Effect]) a. Query es a -&gt; Int
</span><a href="Elara.Query.html#tagQuery"><span class="hs-identifier hs-var">tagQuery</span></a></span><span>
</span><span id="line-248"></span><span>        </span><span id="local-6989586621680043221"><span id="local-6989586621680043222"><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-type">sameCtor</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-249"></span><span>            </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042319"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680043221"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042319"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680043222"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">GOrdering</span></span><span> </span><span class="annot"><a href="#local-6989586621680043221"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680043222"><span class="hs-identifier hs-type">y</span></a></span></span></span><span>
</span><span id="line-250"></span><span>        </span><span id="local-6989586621680043220"><span class="annot"><span class="annottext">sameCtor :: forall a b. Query es a -&gt; Query es b -&gt; GOrdering a b
</span><a href="#local-6989586621680043220"><span class="hs-identifier hs-var hs-var">sameCtor</span></a></span></span><span> </span><span class="annot"><span class="annottext">Query es x
</span><a href="Elara.Query.html#GetCompilerSettings"><span class="hs-identifier hs-var">GetCompilerSettings</span></a></span><span> </span><span class="annot"><span class="annottext">Query es y
</span><a href="Elara.Query.html#GetCompilerSettings"><span class="hs-identifier hs-var">GetCompilerSettings</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GOrdering x x
GOrdering x y
forall {k} (a :: k). GOrdering a a
</span><span class="hs-identifier hs-var">GEQ</span></span><span>
</span><span id="line-251"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="annot"><span class="annottext">Query es x
</span><a href="Elara.Query.html#InputFiles"><span class="hs-identifier hs-var">InputFiles</span></a></span><span> </span><span class="annot"><span class="annottext">Query es y
</span><a href="Elara.Query.html#InputFiles"><span class="hs-identifier hs-var">InputFiles</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GOrdering x x
GOrdering x y
forall {k} (a :: k). GOrdering a a
</span><span class="hs-identifier hs-var">GEQ</span></span><span>
</span><span id="line-252"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetFileContents"><span class="hs-identifier hs-type">GetFileContents</span></a></span><span> </span><span id="local-6989586621680043233"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043233"><span class="hs-identifier hs-var">p1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetFileContents"><span class="hs-identifier hs-type">GetFileContents</span></a></span><span> </span><span id="local-6989586621680043240"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043240"><span class="hs-identifier hs-var">p2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-253"></span><span>            </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043233"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043240"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-254"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ModulePath"><span class="hs-identifier hs-type">ModulePath</span></a></span><span> </span><span id="local-6989586621680043244"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043244"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ModulePath"><span class="hs-identifier hs-type">ModulePath</span></a></span><span> </span><span id="local-6989586621680043249"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043249"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-255"></span><span>            </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043244"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043249"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-256"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#LexedFile"><span class="hs-identifier hs-type">LexedFile</span></a></span><span> </span><span id="local-6989586621680043252"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043252"><span class="hs-identifier hs-var">p1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#LexedFile"><span class="hs-identifier hs-type">LexedFile</span></a></span><span> </span><span id="local-6989586621680043257"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043257"><span class="hs-identifier hs-var">p2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-257"></span><span>            </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043252"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043257"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-258"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ParsedFile"><span class="hs-identifier hs-type">ParsedFile</span></a></span><span> </span><span id="local-6989586621680043260"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043260"><span class="hs-identifier hs-var">p1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ParsedFile"><span class="hs-identifier hs-type">ParsedFile</span></a></span><span> </span><span id="local-6989586621680043265"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043265"><span class="hs-identifier hs-var">p2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-259"></span><span>            </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043260"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043265"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-260"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ParsedModule"><span class="hs-identifier hs-type">ParsedModule</span></a></span><span> </span><span id="local-6989586621680043268"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043268"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ParsedModule"><span class="hs-identifier hs-type">ParsedModule</span></a></span><span> </span><span id="local-6989586621680043272"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043272"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-261"></span><span>            </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043268"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043272"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-262"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#DesugaredModule"><span class="hs-identifier hs-type">DesugaredModule</span></a></span><span> </span><span id="local-6989586621680043275"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043275"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#DesugaredModule"><span class="hs-identifier hs-type">DesugaredModule</span></a></span><span> </span><span id="local-6989586621680043279"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043279"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-263"></span><span>            </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043275"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043279"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-264"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#RenamedModule"><span class="hs-identifier hs-type">RenamedModule</span></a></span><span> </span><span id="local-6989586621680043282"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043282"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#RenamedModule"><span class="hs-identifier hs-type">RenamedModule</span></a></span><span> </span><span id="local-6989586621680043286"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043286"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-265"></span><span>            </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043282"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043286"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-266"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetOpInfo"><span class="hs-identifier hs-type">GetOpInfo</span></a></span><span> </span><span id="local-6989586621680043289"><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680043289"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetOpInfo"><span class="hs-identifier hs-type">GetOpInfo</span></a></span><span> </span><span id="local-6989586621680043305"><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680043305"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-267"></span><span>            </span><span class="annot"><span class="annottext">IgnoreLocVarRef Name -&gt; IgnoreLocVarRef Name -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680043289"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680043305"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-268"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetOpTableIn"><span class="hs-identifier hs-type">GetOpTableIn</span></a></span><span> </span><span id="local-6989586621680043308"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043308"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetOpTableIn"><span class="hs-identifier hs-type">GetOpTableIn</span></a></span><span> </span><span id="local-6989586621680043312"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043312"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-269"></span><span>            </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043308"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043312"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-270"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#FreeVarsOf"><span class="hs-identifier hs-type">FreeVarsOf</span></a></span><span> </span><span id="local-6989586621680043315"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043315"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#FreeVarsOf"><span class="hs-identifier hs-type">FreeVarsOf</span></a></span><span> </span><span id="local-6989586621680043321"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043321"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-271"></span><span>            </span><span class="annot"><span class="annottext">Qualified VarName -&gt; Qualified VarName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043315"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043321"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-272"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ReachableSubgraphOf"><span class="hs-identifier hs-type">ReachableSubgraphOf</span></a></span><span> </span><span id="local-6989586621680043324"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043324"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ReachableSubgraphOf"><span class="hs-identifier hs-type">ReachableSubgraphOf</span></a></span><span> </span><span id="local-6989586621680043329"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043329"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-273"></span><span>            </span><span class="annot"><span class="annottext">Qualified VarName -&gt; Qualified VarName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043324"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043329"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-274"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetSCCsOf"><span class="hs-identifier hs-type">GetSCCsOf</span></a></span><span> </span><span id="local-6989586621680043332"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043332"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetSCCsOf"><span class="hs-identifier hs-type">GetSCCsOf</span></a></span><span> </span><span id="local-6989586621680043337"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043337"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-275"></span><span>            </span><span class="annot"><span class="annottext">Qualified VarName -&gt; Qualified VarName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043332"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043337"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-276"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#SCCKeyOf"><span class="hs-identifier hs-type">SCCKeyOf</span></a></span><span> </span><span id="local-6989586621680043340"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043340"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#SCCKeyOf"><span class="hs-identifier hs-type">SCCKeyOf</span></a></span><span> </span><span id="local-6989586621680043345"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043345"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-277"></span><span>            </span><span class="annot"><span class="annottext">Qualified VarName -&gt; Qualified VarName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043340"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043345"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-278"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#TypeCheckedModule"><span class="hs-identifier hs-type">TypeCheckedModule</span></a></span><span> </span><span id="local-6989586621680043348"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043348"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#TypeCheckedModule"><span class="hs-identifier hs-type">TypeCheckedModule</span></a></span><span> </span><span id="local-6989586621680043352"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043352"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-279"></span><span>            </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043348"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043352"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#TypeCheckedExpr"><span class="hs-identifier hs-type">TypeCheckedExpr</span></a></span><span> </span><span id="local-6989586621680043355"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043355"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#TypeCheckedExpr"><span class="hs-identifier hs-type">TypeCheckedExpr</span></a></span><span> </span><span id="local-6989586621680043360"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043360"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-281"></span><span>            </span><span class="annot"><span class="annottext">Qualified VarName -&gt; Qualified VarName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043355"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043360"><span class="hs-identifier hs-var">v2</span></a></span><span>
</span><span id="line-282"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#TypeOf"><span class="hs-identifier hs-type">TypeOf</span></a></span><span> </span><span id="local-6989586621680043365"><span class="annot"><span class="annottext">TypeEnvKey loc
</span><a href="#local-6989586621680043365"><span class="hs-identifier hs-var">k1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#TypeOf"><span class="hs-identifier hs-type">TypeOf</span></a></span><span> </span><span id="local-6989586621680043373"><span class="annot"><span class="annottext">TypeEnvKey loc
</span><a href="#local-6989586621680043373"><span class="hs-identifier hs-var">k2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-283"></span><span>            </span><span class="annot"><span class="annottext">TypeEnvKey loc -&gt; TypeEnvKey loc -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnvKey loc
</span><a href="#local-6989586621680043365"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnvKey loc
TypeEnvKey loc
</span><a href="#local-6989586621680043373"><span class="hs-identifier hs-var">k2</span></a></span><span>
</span><span id="line-284"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#InferSCC"><span class="hs-identifier hs-type">InferSCC</span></a></span><span> </span><span id="local-6989586621680043376"><span class="annot"><span class="annottext">SCCKey
</span><a href="#local-6989586621680043376"><span class="hs-identifier hs-var">k1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#InferSCC"><span class="hs-identifier hs-type">InferSCC</span></a></span><span> </span><span id="local-6989586621680043381"><span class="annot"><span class="annottext">SCCKey
</span><a href="#local-6989586621680043381"><span class="hs-identifier hs-var">k2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-285"></span><span>            </span><span class="annot"><span class="annottext">SCCKey -&gt; SCCKey -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">SCCKey
</span><a href="#local-6989586621680043376"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">SCCKey
</span><a href="#local-6989586621680043381"><span class="hs-identifier hs-var">k2</span></a></span><span>
</span><span id="line-286"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#KindOf"><span class="hs-identifier hs-type">KindOf</span></a></span><span> </span><span id="local-6989586621680043384"><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043384"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#KindOf"><span class="hs-identifier hs-type">KindOf</span></a></span><span> </span><span id="local-6989586621680043390"><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043390"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-287"></span><span>            </span><span class="annot"><span class="annottext">Qualified TypeName -&gt; Qualified TypeName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043384"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043390"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-288"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetCoreModule"><span class="hs-identifier hs-type">GetCoreModule</span></a></span><span> </span><span id="local-6989586621680043393"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043393"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetCoreModule"><span class="hs-identifier hs-type">GetCoreModule</span></a></span><span> </span><span id="local-6989586621680043397"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043397"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-289"></span><span>            </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043393"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043397"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-290"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetTyCon"><span class="hs-identifier hs-type">GetTyCon</span></a></span><span> </span><span id="local-6989586621680043400"><span class="annot"><span class="annottext">Qualified Text
</span><a href="#local-6989586621680043400"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetTyCon"><span class="hs-identifier hs-type">GetTyCon</span></a></span><span> </span><span id="local-6989586621680043406"><span class="annot"><span class="annottext">Qualified Text
</span><a href="#local-6989586621680043406"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-291"></span><span>            </span><span class="annot"><span class="annottext">Qualified Text -&gt; Qualified Text -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified Text
</span><a href="#local-6989586621680043400"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified Text
</span><a href="#local-6989586621680043406"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-292"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetDataCon"><span class="hs-identifier hs-type">GetDataCon</span></a></span><span> </span><span id="local-6989586621680043409"><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043409"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetDataCon"><span class="hs-identifier hs-type">GetDataCon</span></a></span><span> </span><span id="local-6989586621680043414"><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043414"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-293"></span><span>            </span><span class="annot"><span class="annottext">Qualified TypeName -&gt; Qualified TypeName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043409"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043414"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-294"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetOptimisedCoreModule"><span class="hs-identifier hs-type">GetOptimisedCoreModule</span></a></span><span> </span><span id="local-6989586621680043417"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043417"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetOptimisedCoreModule"><span class="hs-identifier hs-type">GetOptimisedCoreModule</span></a></span><span> </span><span id="local-6989586621680043421"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043421"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-295"></span><span>            </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043417"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043421"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-296"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetANFCoreModule"><span class="hs-identifier hs-type">GetANFCoreModule</span></a></span><span> </span><span id="local-6989586621680043424"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043424"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetANFCoreModule"><span class="hs-identifier hs-type">GetANFCoreModule</span></a></span><span> </span><span id="local-6989586621680043428"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043428"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-297"></span><span>            </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043424"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043428"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-298"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetClosureLiftedModule"><span class="hs-identifier hs-type">GetClosureLiftedModule</span></a></span><span> </span><span id="local-6989586621680043431"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043431"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetClosureLiftedModule"><span class="hs-identifier hs-type">GetClosureLiftedModule</span></a></span><span> </span><span id="local-6989586621680043435"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043435"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-299"></span><span>            </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043431"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043435"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-300"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetFinalisedCoreModule"><span class="hs-identifier hs-type">GetFinalisedCoreModule</span></a></span><span> </span><span id="local-6989586621680043438"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043438"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#GetFinalisedCoreModule"><span class="hs-identifier hs-type">GetFinalisedCoreModule</span></a></span><span> </span><span id="local-6989586621680043442"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043442"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-301"></span><span>            </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043438"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043442"><span class="hs-identifier hs-var">m2</span></a></span><span>
</span><span id="line-302"></span><span>        </span><span class="hs-comment">-- Special: compare both the name and the type index</span><span>
</span><span id="line-303"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#DeclarationByName"><span class="hs-identifier hs-type">DeclarationByName</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043448"><span class="annot"><a href="#local-6989586621680043448"><span class="hs-identifier hs-type hs-type">ast1</span></a></span></span><span> </span><span id="local-6989586621680043449"><span class="annot"><span class="annottext">QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043449"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#DeclarationByName"><span class="hs-identifier hs-type">DeclarationByName</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043463"><span class="annot"><a href="#local-6989586621680043463"><span class="hs-identifier hs-type hs-type">ast2</span></a></span></span><span> </span><span id="local-6989586621680043464"><span class="annot"><span class="annottext">QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043464"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-304"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Qualified Name -&gt; Qualified Name -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Qualified Name
QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043449"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified Name
QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043464"><span class="hs-identifier hs-var">n2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-305"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-306"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-307"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall (a :: LocatedAST) (b :: LocatedAST).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043448"><span class="hs-identifier hs-type">ast1</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043463"><span class="hs-identifier hs-type">ast2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-308"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">ast :~: ast
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x x
GOrdering x y
forall {k} (a :: k). GOrdering a a
</span><span class="hs-identifier hs-var">GEQ</span></span><span>
</span><span id="line-309"></span><span>                    </span><span class="annot"><span class="annottext">Maybe (ast :~: ast)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-310"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; TypeRep -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043448"><span class="hs-identifier hs-type">ast1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043463"><span class="hs-identifier hs-type">ast2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-311"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-312"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-313"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span> </span><span class="hs-comment">-- unreachable, but keep totality</span><span>
</span><span id="line-314"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#RequiredDeclarationByName"><span class="hs-identifier hs-type">RequiredDeclarationByName</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043473"><span class="annot"><a href="#local-6989586621680043473"><span class="hs-identifier hs-type hs-type">ast1</span></a></span></span><span> </span><span id="local-6989586621680043474"><span class="annot"><span class="annottext">QueryArgsOf QueryRequiredDeclarationByName ast
</span><a href="#local-6989586621680043474"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#RequiredDeclarationByName"><span class="hs-identifier hs-type">RequiredDeclarationByName</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043487"><span class="annot"><a href="#local-6989586621680043487"><span class="hs-identifier hs-type hs-type">ast2</span></a></span></span><span> </span><span id="local-6989586621680043488"><span class="annot"><span class="annottext">QueryArgsOf QueryRequiredDeclarationByName ast
</span><a href="#local-6989586621680043488"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-315"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Qualified Name -&gt; Qualified Name -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Qualified Name
QueryArgsOf QueryRequiredDeclarationByName ast
</span><a href="#local-6989586621680043474"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified Name
QueryArgsOf QueryRequiredDeclarationByName ast
</span><a href="#local-6989586621680043488"><span class="hs-identifier hs-var">n2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-316"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-317"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-318"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall (a :: LocatedAST) (b :: LocatedAST).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043473"><span class="hs-identifier hs-type">ast1</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043487"><span class="hs-identifier hs-type">ast2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-319"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">ast :~: ast
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x x
GOrdering x y
forall {k} (a :: k). GOrdering a a
</span><span class="hs-identifier hs-var">GEQ</span></span><span>
</span><span id="line-320"></span><span>                    </span><span class="annot"><span class="annottext">Maybe (ast :~: ast)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-321"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; TypeRep -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043473"><span class="hs-identifier hs-type">ast1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043487"><span class="hs-identifier hs-type">ast2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-322"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-323"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-324"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span> </span><span class="hs-comment">-- unreachable, but keep totality</span><span>
</span><span id="line-325"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ModuleByName"><span class="hs-identifier hs-type">ModuleByName</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043497"><span class="annot"><a href="#local-6989586621680043497"><span class="hs-identifier hs-type hs-type">ast1</span></a></span></span><span> </span><span id="local-6989586621680043498"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043498"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ModuleByName"><span class="hs-identifier hs-type">ModuleByName</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043511"><span class="annot"><a href="#local-6989586621680043511"><span class="hs-identifier hs-type hs-type">ast2</span></a></span></span><span> </span><span id="local-6989586621680043512"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043512"><span class="hs-identifier hs-var">m2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-326"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043498"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043512"><span class="hs-identifier hs-var">m2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-327"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-328"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-329"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall (a :: LocatedAST) (b :: LocatedAST).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043497"><span class="hs-identifier hs-type">ast1</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043511"><span class="hs-identifier hs-type">ast2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-330"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">ast :~: ast
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x x
GOrdering x y
forall {k} (a :: k). GOrdering a a
</span><span class="hs-identifier hs-var">GEQ</span></span><span>
</span><span id="line-331"></span><span>                    </span><span class="annot"><span class="annottext">Maybe (ast :~: ast)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-332"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; TypeRep -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043497"><span class="hs-identifier hs-type">ast1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043511"><span class="hs-identifier hs-type">ast2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-333"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-334"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-335"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span> </span><span class="hs-comment">-- unreachable, but keep totality</span><span>
</span><span id="line-336"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ConstructorDeclaration"><span class="hs-identifier hs-type">ConstructorDeclaration</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043522"><span class="annot"><a href="#local-6989586621680043522"><span class="hs-identifier hs-type hs-type">ast1</span></a></span></span><span> </span><span id="local-6989586621680043523"><span class="annot"><span class="annottext">QueryArgsOf QueryConstructorDeclaration ast
</span><a href="#local-6989586621680043523"><span class="hs-identifier hs-var">c1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#ConstructorDeclaration"><span class="hs-identifier hs-type">ConstructorDeclaration</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043536"><span class="annot"><a href="#local-6989586621680043536"><span class="hs-identifier hs-type hs-type">ast2</span></a></span></span><span> </span><span id="local-6989586621680043537"><span class="annot"><span class="annottext">QueryArgsOf QueryConstructorDeclaration ast
</span><a href="#local-6989586621680043537"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-337"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall (a :: LocatedAST) (b :: LocatedAST).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043522"><span class="hs-identifier hs-type">ast1</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043536"><span class="hs-identifier hs-type">ast2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-338"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">ast :~: ast
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Select ConRef ast -&gt; Select ConRef ast -&gt; GOrdering x x
forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">Select ConRef ast
QueryArgsOf QueryConstructorDeclaration ast
</span><a href="#local-6989586621680043523"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Select ConRef ast
QueryArgsOf QueryConstructorDeclaration ast
</span><a href="#local-6989586621680043537"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-339"></span><span>                </span><span class="annot"><span class="annottext">Maybe (ast :~: ast)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-340"></span><span>                    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; TypeRep -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043522"><span class="hs-identifier hs-type">ast1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043536"><span class="hs-identifier hs-type">ast2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-341"></span><span>                        </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-342"></span><span>                        </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-343"></span><span>                        </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span> </span><span class="hs-comment">-- unreachable, but keep totality</span><span>
</span><span id="line-344"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-type">DeclarationAnnotations</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043546"><span class="annot"><a href="#local-6989586621680043546"><span class="hs-identifier hs-type hs-type">ast1</span></a></span></span><span> </span><span id="local-6989586621680043547"><span class="annot"><span class="annottext">QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043547"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-type">DeclarationAnnotations</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043560"><span class="annot"><a href="#local-6989586621680043560"><span class="hs-identifier hs-type hs-type">ast2</span></a></span></span><span> </span><span id="local-6989586621680043561"><span class="annot"><span class="annottext">QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043561"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-345"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Qualified Name -&gt; Qualified Name -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Qualified Name
QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043547"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified Name
QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043561"><span class="hs-identifier hs-var">n2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-346"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-347"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-348"></span><span>                </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall (a :: LocatedAST) (b :: LocatedAST).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043546"><span class="hs-identifier hs-type">ast1</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043560"><span class="hs-identifier hs-type">ast2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-349"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">ast :~: ast
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x x
GOrdering x y
forall {k} (a :: k). GOrdering a a
</span><span class="hs-identifier hs-var">GEQ</span></span><span>
</span><span id="line-350"></span><span>                    </span><span class="annot"><span class="annottext">Maybe (ast :~: ast)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-351"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; TypeRep -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043546"><span class="hs-identifier hs-type">ast1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043560"><span class="hs-identifier hs-type">ast2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-352"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-353"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-354"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span> </span><span class="hs-comment">-- unreachable, but keep totality</span><span>
</span><span id="line-355"></span><span>        </span><span class="annot"><a href="#local-6989586621680043220"><span class="hs-identifier hs-var">sameCtor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotationsOfType"><span class="hs-identifier hs-type">DeclarationAnnotationsOfType</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043569"><span class="annot"><a href="#local-6989586621680043569"><span class="hs-identifier hs-type hs-type">ast1</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680043570"><span class="annot"><span class="annottext">Qualified Name
</span><a href="#local-6989586621680043570"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680043571"><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043571"><span class="hs-identifier hs-var">a1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotationsOfType"><span class="hs-identifier hs-type">DeclarationAnnotationsOfType</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043588"><span class="annot"><a href="#local-6989586621680043588"><span class="hs-identifier hs-type hs-type">ast2</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680043589"><span class="annot"><span class="annottext">Qualified Name
</span><a href="#local-6989586621680043589"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680043590"><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043590"><span class="hs-identifier hs-var">a2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-356"></span><span>            </span><span class="annot"><span class="annottext">(Qualified Name, Qualified TypeName)
-&gt; (Qualified Name, Qualified TypeName)
-&gt; GOrdering x y
-&gt; GOrdering x y
forall {k} {a} {a :: k} {b :: k}.
Ord a =&gt;
a -&gt; a -&gt; GOrdering a b -&gt; GOrdering a b
</span><a href="#local-6989586621680043591"><span class="hs-identifier hs-var">compareThen</span></a></span><span>
</span><span id="line-357"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Qualified Name
</span><a href="#local-6989586621680043570"><span class="hs-identifier hs-var">n1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043571"><span class="hs-identifier hs-var">a1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Qualified Name
</span><a href="#local-6989586621680043589"><span class="hs-identifier hs-var">n2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043590"><span class="hs-identifier hs-var">a2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall (a :: LocatedAST) (b :: LocatedAST).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043569"><span class="hs-identifier hs-type">ast1</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043588"><span class="hs-identifier hs-type">ast2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-360"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">ast :~: ast
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x x
GOrdering x y
forall {k} (a :: k). GOrdering a a
</span><span class="hs-identifier hs-var">GEQ</span></span><span>
</span><span id="line-361"></span><span>                    </span><span class="annot"><span class="annottext">Maybe (ast :~: ast)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-362"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; TypeRep -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043569"><span class="hs-identifier hs-type">ast1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043588"><span class="hs-identifier hs-type">ast2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-363"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-364"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-365"></span><span>                            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering x y
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span> </span><span class="hs-comment">-- unreachable, but keep totality</span><span>
</span><span id="line-366"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span>        </span><span id="local-6989586621680043591"><span class="annot"><span class="annottext">compareThen :: a -&gt; a -&gt; GOrdering a b -&gt; GOrdering a b
</span><a href="#local-6989586621680043591"><span class="hs-identifier hs-var hs-var">compareThen</span></a></span></span><span> </span><span id="local-6989586621680043599"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680043599"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680043600"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680043600"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680043601"><span class="annot"><span class="annottext">GOrdering a b
</span><a href="#local-6989586621680043601"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680043599"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680043600"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-369"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a b
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-370"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a b
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-371"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a b
</span><a href="#local-6989586621680043601"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-372"></span><span>        </span><span class="hs-comment">--  helper for payloads with Ord</span><span>
</span><span id="line-373"></span><span>        </span><span id="local-6989586621680042332"><span id="local-6989586621680042333"><span class="annot"><a href="#local-6989586621680043241"><span class="hs-identifier hs-type">ord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621680042332"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680042332"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680042332"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">GOrdering</span></span><span> </span><span class="annot"><a href="#local-6989586621680042333"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042333"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span>        </span><span id="local-6989586621680043241"><span class="annot"><span class="annottext">ord :: forall {k} v (a :: k). Ord v =&gt; v -&gt; v -&gt; GOrdering a a
</span><a href="#local-6989586621680043241"><span class="hs-identifier hs-var hs-var">ord</span></a></span></span><span> </span><span id="local-6989586621680043604"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680043604"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680043605"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680043605"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">v -&gt; v -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680043604"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621680043605"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-376"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a a
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GLT</span></span><span>
</span><span id="line-377"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a a
forall {k} (a :: k) (b :: k). GOrdering a b
</span><span class="hs-identifier hs-var">GGT</span></span><span>
</span><span id="line-378"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a a
forall {k} (a :: k). GOrdering a a
</span><span class="hs-identifier hs-var">GEQ</span></span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span class="hs-comment">-- ordAST :: forall ast1 -&gt; forall ast2 -&gt; GOrdering a a</span><span>
</span><span id="line-381"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680042386"><span id="local-6989586621680042387"><span id="local-6989586621680043611"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042386"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042387"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042386"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680042387"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621680043615"><span class="annot"><span class="annottext">hashWithSalt :: Int -&gt; Query es a -&gt; Int
</span><a href="#local-6989586621680043615"><span class="hs-identifier hs-var hs-var hs-var">hashWithSalt</span></a></span></span><span> </span><span id="local-6989586621680043617"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680043617"><span class="hs-identifier hs-var">salt</span></a></span></span><span> </span><span id="local-6989586621680043618"><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680043618"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680043618"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-383"></span><span>        </span><span class="annot"><span class="annottext">Query es a
</span><a href="Elara.Query.html#GetCompilerSettings"><span class="hs-identifier hs-var">GetCompilerSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>        </span><span class="annot"><span class="annottext">Query es a
</span><a href="Elara.Query.html#InputFiles"><span class="hs-identifier hs-var">InputFiles</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>        </span><span class="annot"><a href="Elara.Query.html#GetFileContents"><span class="hs-identifier hs-type">GetFileContents</span></a></span><span> </span><span id="local-6989586621680043633"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043633"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043633"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-386"></span><span>        </span><span class="annot"><a href="Elara.Query.html#LexedFile"><span class="hs-identifier hs-type">LexedFile</span></a></span><span> </span><span id="local-6989586621680043638"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043638"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043638"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-387"></span><span>        </span><span class="annot"><a href="Elara.Query.html#ParsedFile"><span class="hs-identifier hs-type">ParsedFile</span></a></span><span> </span><span id="local-6989586621680043643"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043643"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621680043643"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-388"></span><span>        </span><span class="annot"><a href="Elara.Query.html#ModulePath"><span class="hs-identifier hs-type">ModulePath</span></a></span><span> </span><span id="local-6989586621680043648"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043648"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043648"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-389"></span><span>        </span><span class="annot"><a href="Elara.Query.html#ParsedModule"><span class="hs-identifier hs-type">ParsedModule</span></a></span><span> </span><span id="local-6989586621680043652"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043652"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043652"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-390"></span><span>        </span><span class="annot"><a href="Elara.Query.html#DesugaredModule"><span class="hs-identifier hs-type">DesugaredModule</span></a></span><span> </span><span id="local-6989586621680043656"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043656"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043656"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-391"></span><span>        </span><span class="annot"><a href="Elara.Query.html#RenamedModule"><span class="hs-identifier hs-type">RenamedModule</span></a></span><span> </span><span id="local-6989586621680043660"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043660"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043660"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-392"></span><span>        </span><span class="annot"><a href="Elara.Query.html#DeclarationByName"><span class="hs-identifier hs-type">DeclarationByName</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043674"><span class="annot"><a href="#local-6989586621680043674"><span class="hs-identifier hs-type hs-type">ast</span></a></span></span><span> </span><span id="local-6989586621680043675"><span class="annot"><span class="annottext">QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043675"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Qualified Name, TypeRep) -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Qualified Name
QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043675"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043674"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span>        </span><span class="annot"><a href="Elara.Query.html#RequiredDeclarationByName"><span class="hs-identifier hs-type">RequiredDeclarationByName</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043685"><span class="annot"><a href="#local-6989586621680043685"><span class="hs-identifier hs-type hs-type">ast</span></a></span></span><span> </span><span id="local-6989586621680043686"><span class="annot"><span class="annottext">QueryArgsOf QueryRequiredDeclarationByName ast
</span><a href="#local-6989586621680043686"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Qualified Name, TypeRep) -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Qualified Name
QueryArgsOf QueryRequiredDeclarationByName ast
</span><a href="#local-6989586621680043686"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043685"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>        </span><span class="annot"><a href="Elara.Query.html#ModuleByName"><span class="hs-identifier hs-type">ModuleByName</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043696"><span class="annot"><a href="#local-6989586621680043696"><span class="hs-identifier hs-type hs-type">ast</span></a></span></span><span> </span><span id="local-6989586621680043697"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043697"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ModuleName, TypeRep) -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043697"><span class="hs-identifier hs-var">mn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043696"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>        </span><span class="annot"><a href="Elara.Query.html#ConstructorDeclaration"><span class="hs-identifier hs-type">ConstructorDeclaration</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043707"><span class="annot"><a href="#local-6989586621680043707"><span class="hs-identifier hs-type hs-type">ast</span></a></span></span><span> </span><span id="local-6989586621680043708"><span class="annot"><span class="annottext">QueryArgsOf QueryConstructorDeclaration ast
</span><a href="#local-6989586621680043708"><span class="hs-identifier hs-var">conRef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Select ConRef ast, TypeRep) -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Select ConRef ast
QueryArgsOf QueryConstructorDeclaration ast
</span><a href="#local-6989586621680043708"><span class="hs-identifier hs-var">conRef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043707"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span>        </span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-type">DeclarationAnnotations</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043718"><span class="annot"><a href="#local-6989586621680043718"><span class="hs-identifier hs-type hs-type">ast</span></a></span></span><span> </span><span id="local-6989586621680043719"><span class="annot"><span class="annottext">QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043719"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Qualified Name, TypeRep) -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Qualified Name
QueryArgsOf QueryDeclarationByName ast
</span><a href="#local-6989586621680043719"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043718"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>        </span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotationsOfType"><span class="hs-identifier hs-type">DeclarationAnnotationsOfType</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621680043733"><span class="annot"><a href="#local-6989586621680043733"><span class="hs-identifier hs-type hs-type">ast</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680043734"><span class="annot"><span class="annottext">Qualified Name
</span><a href="#local-6989586621680043734"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680043735"><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043735"><span class="hs-identifier hs-var">annName</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Qualified Name, Qualified TypeName, TypeRep) -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Qualified Name
</span><a href="#local-6989586621680043734"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043735"><span class="hs-identifier hs-var">annName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Proxy ast -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall (t :: LocatedAST). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680043733"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>        </span><span class="annot"><a href="Elara.Query.html#GetOpInfo"><span class="hs-identifier hs-type">GetOpInfo</span></a></span><span> </span><span id="local-6989586621680043758"><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680043758"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IgnoreLocVarRef Name -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680043758"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-399"></span><span>        </span><span class="annot"><a href="Elara.Query.html#GetOpTableIn"><span class="hs-identifier hs-type">GetOpTableIn</span></a></span><span> </span><span id="local-6989586621680043762"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043762"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043762"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-400"></span><span>        </span><span class="annot"><a href="Elara.Query.html#FreeVarsOf"><span class="hs-identifier hs-type">FreeVarsOf</span></a></span><span> </span><span id="local-6989586621680043768"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043768"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Qualified VarName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043768"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-401"></span><span>        </span><span class="annot"><a href="Elara.Query.html#ReachableSubgraphOf"><span class="hs-identifier hs-type">ReachableSubgraphOf</span></a></span><span> </span><span id="local-6989586621680043773"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043773"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Qualified VarName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043773"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-402"></span><span>        </span><span class="annot"><a href="Elara.Query.html#GetSCCsOf"><span class="hs-identifier hs-type">GetSCCsOf</span></a></span><span> </span><span id="local-6989586621680043778"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043778"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Qualified VarName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043778"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-403"></span><span>        </span><span class="annot"><a href="Elara.Query.html#SCCKeyOf"><span class="hs-identifier hs-type">SCCKeyOf</span></a></span><span> </span><span id="local-6989586621680043783"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043783"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Qualified VarName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043783"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-404"></span><span>        </span><span class="annot"><a href="Elara.Query.html#TypeCheckedModule"><span class="hs-identifier hs-type">TypeCheckedModule</span></a></span><span> </span><span id="local-6989586621680043787"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043787"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043787"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-405"></span><span>        </span><span class="annot"><a href="Elara.Query.html#TypeOf"><span class="hs-identifier hs-type">TypeOf</span></a></span><span> </span><span id="local-6989586621680043795"><span class="annot"><span class="annottext">TypeEnvKey loc
</span><a href="#local-6989586621680043795"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeEnvKey loc -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnvKey loc
</span><a href="#local-6989586621680043795"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-406"></span><span>        </span><span class="annot"><a href="Elara.Query.html#InferSCC"><span class="hs-identifier hs-type">InferSCC</span></a></span><span> </span><span id="local-6989586621680043800"><span class="annot"><span class="annottext">SCCKey
</span><a href="#local-6989586621680043800"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SCCKey -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">SCCKey
</span><a href="#local-6989586621680043800"><span class="hs-identifier hs-var">key</span></a></span><span>
</span><span id="line-407"></span><span>        </span><span class="annot"><a href="Elara.Query.html#KindOf"><span class="hs-identifier hs-type">KindOf</span></a></span><span> </span><span id="local-6989586621680043805"><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043805"><span class="hs-identifier hs-var">qtn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Qualified TypeName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043805"><span class="hs-identifier hs-var">qtn</span></a></span><span>
</span><span id="line-408"></span><span>        </span><span class="annot"><a href="Elara.Query.html#GetCoreModule"><span class="hs-identifier hs-type">GetCoreModule</span></a></span><span> </span><span id="local-6989586621680043809"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043809"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043809"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-409"></span><span>        </span><span class="annot"><a href="Elara.Query.html#GetTyCon"><span class="hs-identifier hs-type">GetTyCon</span></a></span><span> </span><span id="local-6989586621680043815"><span class="annot"><span class="annottext">Qualified Text
</span><a href="#local-6989586621680043815"><span class="hs-identifier hs-var">qn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Qualified Text -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified Text
</span><a href="#local-6989586621680043815"><span class="hs-identifier hs-var">qn</span></a></span><span>
</span><span id="line-410"></span><span>        </span><span class="annot"><a href="Elara.Query.html#GetDataCon"><span class="hs-identifier hs-type">GetDataCon</span></a></span><span> </span><span id="local-6989586621680043820"><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043820"><span class="hs-identifier hs-var">qn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Qualified TypeName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="#local-6989586621680043820"><span class="hs-identifier hs-var">qn</span></a></span><span>
</span><span id="line-411"></span><span>        </span><span class="annot"><a href="Elara.Query.html#GetOptimisedCoreModule"><span class="hs-identifier hs-type">GetOptimisedCoreModule</span></a></span><span> </span><span id="local-6989586621680043824"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043824"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043824"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-412"></span><span>        </span><span class="annot"><a href="Elara.Query.html#GetANFCoreModule"><span class="hs-identifier hs-type">GetANFCoreModule</span></a></span><span> </span><span id="local-6989586621680043828"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043828"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043828"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-413"></span><span>        </span><span class="annot"><a href="Elara.Query.html#GetClosureLiftedModule"><span class="hs-identifier hs-type">GetClosureLiftedModule</span></a></span><span> </span><span id="local-6989586621680043832"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043832"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043832"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-414"></span><span>        </span><span class="annot"><a href="Elara.Query.html#GetFinalisedCoreModule"><span class="hs-identifier hs-type">GetFinalisedCoreModule</span></a></span><span> </span><span id="local-6989586621680043836"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043836"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680043836"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-415"></span><span>        </span><span class="annot"><a href="Elara.Query.html#TypeCheckedExpr"><span class="hs-identifier hs-type">TypeCheckedExpr</span></a></span><span> </span><span id="local-6989586621680043841"><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043841"><span class="hs-identifier hs-var">qn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Qualified VarName -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified VarName
</span><a href="#local-6989586621680043841"><span class="hs-identifier hs-var">qn</span></a></span><span>
</span><span id="line-416"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-417"></span><span>        </span><span id="local-6989586621680043842"><span class="annot"><span class="annottext">t :: Int
</span><a href="#local-6989586621680043842"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Query es a -&gt; Int
forall (es :: [Effect]) a. Query es a -&gt; Int
</span><a href="Elara.Query.html#tagQuery"><span class="hs-identifier hs-var">tagQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Query es a
</span><a href="#local-6989586621680043618"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-418"></span><span>        </span><span class="annot"><a href="#local-6989586621680043623"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680042388"><span class="annot"><a href="#local-6989586621680042388"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621680042388"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680042388"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-419"></span><span>        </span><span id="local-6989586621680043623"><span class="annot"><span class="annottext">h :: forall b. Hashable b =&gt; b -&gt; Int
</span><a href="#local-6989586621680043623"><span class="hs-identifier hs-var hs-var">h</span></a></span></span><span> </span><span id="local-6989586621680043848"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680043848"><span class="hs-identifier hs-var">payload</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
forall b. Hashable b =&gt; b -&gt; Int
</span><span class="hs-identifier hs-var">hash</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680043842"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; b -&gt; Int
forall a. Hashable a =&gt; Int -&gt; a -&gt; Int
</span><span class="hs-operator hs-var">`hashWithSalt`</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680043848"><span class="hs-identifier hs-var">payload</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Hashable a =&gt; Int -&gt; a -&gt; Int
</span><span class="hs-operator hs-var">`hashWithSalt`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680043617"><span class="hs-identifier hs-var">salt</span></a></span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Rock.Memo.html#HasMemoiseE"><span class="hs-identifier hs-type">HasMemoiseE</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-422"></span><span>    </span><span id="local-6989586621680043852"><span class="annot"><span class="annottext">withMemoiseE :: forall (es :: [Effect]) a.
Query es a
-&gt; ((Memoise :&gt; es, Concurrent :&gt; es) =&gt; Eff es a) -&gt; Eff es a
</span><a href="#local-6989586621680043852"><span class="hs-identifier hs-var hs-var hs-var">withMemoiseE</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Query es a
-&gt; ((Memoise :&gt; es, Concurrent :&gt; es) =&gt; Eff es a) -&gt; Eff es a
forall (es :: [Effect]) a.
Query es a
-&gt; ((Memoise :&gt; es, Concurrent :&gt; es) =&gt; Eff es a) -&gt; Eff es a
</span><a href="Elara.Query.html#withMemoiseEQuery"><span class="hs-identifier hs-var">withMemoiseEQuery</span></a></span><span>
</span><span id="line-423"></span></pre></body></html>