<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Elara.Error.Effect.html"><span class="hs-identifier">Elara.Error.Effect</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Dispatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Dynamic</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">DispatchOf</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Eff</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Effect</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(:&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.Dispatch.Dynamic</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">interpret</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">reinterpret</span></span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.State.Static.Local</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.TH</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">makeEffect</span></span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Error.Diagnose.Diagnostic</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Diagnostic</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Error.Diagnose.Diagnostic</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Diagnostic</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">addFile</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">addReport</span></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Error.Diagnose.Report</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Report</span></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="annot"><span class="hs-comment">{- | Essentially a very specialised Writer effect for Diagnostics, but safer
| Because the Semigroup instance for Diagnostics is a little funky, there's a chance of accidentally overwriting the
| entire FileMap, so this effect is designed to prevent that, and also prevent the state / writer boilerplate as an added bonus :)
-}</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">data</span><span> </span><span id="DiagnosticWriter"><span class="annot"><a href="Elara.Error.Effect.html#DiagnosticWriter"><span class="hs-identifier hs-var">DiagnosticWriter</span></a></span></span><span> </span><span id="local-6989586621679999731"><span class="annot"><a href="#local-6989586621679999731"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Effect</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-18"></span><span>    </span><span id="local-6989586621679999647"><span id="local-6989586621679999664"><span id="WriteDiagnostic"><span class="annot"><a href="Elara.Error.Effect.html#WriteDiagnostic"><span class="hs-identifier hs-var">WriteDiagnostic</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Diagnostic</span></span><span> </span><span class="annot"><a href="#local-6989586621679999647"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Error.Effect.html#DiagnosticWriter"><span class="hs-identifier hs-type">DiagnosticWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679999647"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679999664"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-19"></span><span>    </span><span id="local-6989586621679999644"><span id="local-6989586621679999663"><span id="WriteReport"><span class="annot"><a href="Elara.Error.Effect.html#WriteReport"><span class="hs-identifier hs-var">WriteReport</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Report</span></span><span> </span><span class="annot"><a href="#local-6989586621679999644"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Error.Effect.html#DiagnosticWriter"><span class="hs-identifier hs-type">DiagnosticWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679999644"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679999663"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-20"></span><span>    </span><span id="local-6989586621679999638"><span id="local-6989586621679999662"><span id="AddFile"><span class="annot"><a href="Elara.Error.Effect.html#AddFile"><span class="hs-identifier hs-var">AddFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Error.Effect.html#DiagnosticWriter"><span class="hs-identifier hs-type">DiagnosticWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679999638"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679999662"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="DispatchOf"><span class="annot"><span class="hs-identifier hs-var">DispatchOf</span></span></span><span> </span><span id="local-6989586621679999735"><span class="hs-special">(</span><span class="annot"><a href="Elara.Error.Effect.html#DiagnosticWriter"><span class="hs-identifier hs-type">DiagnosticWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679999735"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Dynamic</span></span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span id="local-6989586621679999638"><span id="local-6989586621679999640"><span id="local-6989586621679999644"><span id="local-6989586621679999645"><span id="local-6989586621679999647"><span id="local-6989586621679999648"><span id="DispatchOf"><span id="addFile"><span id="writeReport"><span id="writeDiagnostic"><span class="hs-identifier">makeEffect</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DiagnosticWriter</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span id="local-6989586621679999668"><span id="local-6989586621679999669"><span id="local-6989586621679999670"><span class="annot"><a href="Elara.Error.Effect.html#execDiagnosticWriter"><span class="hs-identifier hs-type">execDiagnosticWriter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Error.Effect.html#DiagnosticWriter"><span class="hs-identifier hs-type">DiagnosticWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679999668"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679999669"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679999670"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621679999669"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Diagnostic</span></span><span> </span><span class="annot"><a href="#local-6989586621679999668"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-27"></span><span id="execDiagnosticWriter"><span class="annot"><span class="annottext">execDiagnosticWriter :: forall t (r :: [Effect]) a.
Eff (DiagnosticWriter t : r) a -&gt; Eff r (Diagnostic t)
</span><a href="Elara.Error.Effect.html#execDiagnosticWriter"><span class="hs-identifier hs-var hs-var">execDiagnosticWriter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Diagnostic t, a) -&gt; Diagnostic t)
-&gt; Eff r (Diagnostic t, a) -&gt; Eff r (Diagnostic t)
forall a b. (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(Diagnostic t, a) -&gt; Diagnostic t
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(Eff r (Diagnostic t, a) -&gt; Eff r (Diagnostic t))
-&gt; (Eff (DiagnosticWriter t : r) a -&gt; Eff r (Diagnostic t, a))
-&gt; Eff (DiagnosticWriter t : r) a
-&gt; Eff r (Diagnostic t)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Eff (DiagnosticWriter t : r) a -&gt; Eff r (Diagnostic t, a)
forall t (r :: [Effect]) a.
Eff (DiagnosticWriter t : r) a -&gt; Eff r (Diagnostic t, a)
</span><a href="Elara.Error.Effect.html#runDiagnosticWriter"><span class="hs-identifier hs-var">runDiagnosticWriter</span></a></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span id="local-6989586621679999686"><span id="local-6989586621679999687"><span id="local-6989586621679999688"><span class="annot"><a href="Elara.Error.Effect.html#evalDiagnosticWriter"><span class="hs-identifier hs-type">evalDiagnosticWriter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Error.Effect.html#DiagnosticWriter"><span class="hs-identifier hs-type">DiagnosticWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679999686"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679999687"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679999688"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621679999687"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679999688"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-30"></span><span id="evalDiagnosticWriter"><span class="annot"><span class="annottext">evalDiagnosticWriter :: forall t (r :: [Effect]) a.
Eff (DiagnosticWriter t : r) a -&gt; Eff r a
</span><a href="Elara.Error.Effect.html#evalDiagnosticWriter"><span class="hs-identifier hs-var hs-var">evalDiagnosticWriter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Diagnostic t, a) -&gt; a) -&gt; Eff r (Diagnostic t, a) -&gt; Eff r a
forall a b. (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(Diagnostic t, a) -&gt; a
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">(Eff r (Diagnostic t, a) -&gt; Eff r a)
-&gt; (Eff (DiagnosticWriter t : r) a -&gt; Eff r (Diagnostic t, a))
-&gt; Eff (DiagnosticWriter t : r) a
-&gt; Eff r a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Eff (DiagnosticWriter t : r) a -&gt; Eff r (Diagnostic t, a)
forall t (r :: [Effect]) a.
Eff (DiagnosticWriter t : r) a -&gt; Eff r (Diagnostic t, a)
</span><a href="Elara.Error.Effect.html#runDiagnosticWriter"><span class="hs-identifier hs-var">runDiagnosticWriter</span></a></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span id="local-6989586621679999683"><span id="local-6989586621679999684"><span id="local-6989586621679999685"><span class="annot"><a href="Elara.Error.Effect.html#runDiagnosticWriter"><span class="hs-identifier hs-type">runDiagnosticWriter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Error.Effect.html#DiagnosticWriter"><span class="hs-identifier hs-type">DiagnosticWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679999683"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679999684"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679999685"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621679999684"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Diagnostic</span></span><span> </span><span class="annot"><a href="#local-6989586621679999683"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679999685"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-33"></span><span id="runDiagnosticWriter"><span class="annot"><span class="annottext">runDiagnosticWriter :: forall t (r :: [Effect]) a.
Eff (DiagnosticWriter t : r) a -&gt; Eff r (Diagnostic t, a)
</span><a href="Elara.Error.Effect.html#runDiagnosticWriter"><span class="hs-identifier hs-var hs-var">runDiagnosticWriter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Eff (State (Diagnostic t) : r) a -&gt; Eff r (Diagnostic t, a))
-&gt; EffectHandler (DiagnosticWriter t) (State (Diagnostic t) : r)
-&gt; Eff (DiagnosticWriter t : r) a
-&gt; Eff r (Diagnostic t, a)
forall (e :: Effect) (handlerEs :: [Effect]) a (es :: [Effect]) b.
(HasCallStack, DispatchOf e ~ 'Dynamic) =&gt;
(Eff handlerEs a -&gt; Eff es b)
-&gt; EffectHandler e handlerEs -&gt; Eff (e : es) a -&gt; Eff es b
</span><span class="hs-identifier hs-var">reinterpret</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((a, Diagnostic t) -&gt; (Diagnostic t, a))
-&gt; Eff r (a, Diagnostic t) -&gt; Eff r (Diagnostic t, a)
forall a b. (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(a, Diagnostic t) -&gt; (Diagnostic t, a)
forall a b. (a, b) -&gt; (b, a)
</span><span class="hs-identifier hs-var">swap</span></span><span> </span><span class="annot"><span class="annottext">(Eff r (a, Diagnostic t) -&gt; Eff r (Diagnostic t, a))
-&gt; (Eff (State (Diagnostic t) : r) a -&gt; Eff r (a, Diagnostic t))
-&gt; Eff (State (Diagnostic t) : r) a
-&gt; Eff r (Diagnostic t, a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Diagnostic t
-&gt; Eff (State (Diagnostic t) : r) a -&gt; Eff r (a, Diagnostic t)
forall s (es :: [Effect]) a.
HasCallStack =&gt;
s -&gt; Eff (State s : es) a -&gt; Eff es (a, s)
</span><span class="hs-identifier hs-var">runState</span></span><span> </span><span class="annot"><span class="annottext">Diagnostic t
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(EffectHandler (DiagnosticWriter t) (State (Diagnostic t) : r)
 -&gt; Eff (DiagnosticWriter t : r) a -&gt; Eff r (Diagnostic t, a))
-&gt; EffectHandler (DiagnosticWriter t) (State (Diagnostic t) : r)
-&gt; Eff (DiagnosticWriter t : r) a
-&gt; Eff r (Diagnostic t, a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">LocalEnv localEs (State (Diagnostic t) : r)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Elara.Error.Effect.html#WriteDiagnostic"><span class="hs-identifier hs-type">WriteDiagnostic</span></a></span><span> </span><span id="local-6989586621679999794"><span class="annot"><span class="annottext">Diagnostic t
</span><a href="#local-6989586621679999794"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Diagnostic t -&gt; Diagnostic t) -&gt; Eff (State (Diagnostic t) : r) ()
forall s (es :: [Effect]).
(HasCallStack, State s :&gt; es) =&gt;
(s -&gt; s) -&gt; Eff es ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Diagnostic t -&gt; Diagnostic t -&gt; Diagnostic t
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Diagnostic t
</span><a href="#local-6989586621679999794"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Elara.Error.Effect.html#WriteReport"><span class="hs-identifier hs-type">WriteReport</span></a></span><span> </span><span id="local-6989586621679999800"><span class="annot"><span class="annottext">Report t
</span><a href="#local-6989586621679999800"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Diagnostic t -&gt; Diagnostic t) -&gt; Eff (State (Diagnostic t) : r) ()
forall s (es :: [Effect]).
(HasCallStack, State s :&gt; es) =&gt;
(s -&gt; s) -&gt; Eff es ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Diagnostic t -&gt; Report t -&gt; Diagnostic t
forall msg. Diagnostic msg -&gt; Report msg -&gt; Diagnostic msg
</span><span class="hs-operator hs-var">`Diagnostic.addReport`</span></span><span> </span><span class="annot"><span class="annottext">Report t
</span><a href="#local-6989586621679999800"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Elara.Error.Effect.html#AddFile"><span class="hs-identifier hs-type">AddFile</span></a></span><span> </span><span id="local-6989586621679999805"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679999805"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621679999806"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679999806"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Diagnostic t -&gt; Diagnostic t) -&gt; Eff (State (Diagnostic t) : r) ()
forall s (es :: [Effect]).
(HasCallStack, State s :&gt; es) =&gt;
(s -&gt; s) -&gt; Eff es ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679999807"><span class="annot"><span class="annottext">Diagnostic t
</span><a href="#local-6989586621679999807"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Diagnostic t -&gt; FilePath -&gt; FilePath -&gt; Diagnostic t
forall msg.
Diagnostic msg -&gt; FilePath -&gt; FilePath -&gt; Diagnostic msg
</span><span class="hs-identifier hs-var">Diagnostic.addFile</span></span><span> </span><span class="annot"><span class="annottext">Diagnostic t
</span><a href="#local-6989586621679999807"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679999805"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679999806"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span></pre></body></html>