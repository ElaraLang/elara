<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ImplicitParams #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE PartialTypeSignatures #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Elara.Shunt.html"><span class="hs-identifier">Elara.Shunt</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Generics.Product</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HasField'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">field'</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Generics.Wrapped</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Eff</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">IOE</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">inject</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(:&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.Error.Static</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Eff</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.State.Static.Local</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">execState</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">modify</span></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.Writer.Static.Local</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Eff</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Generic.html"><span class="hs-identifier">Elara.AST.Generic</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Common.html"><span class="hs-identifier">Elara.AST.Generic.Common</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Module.html"><span class="hs-identifier">Elara.AST.Module</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Name.html"><span class="hs-identifier">Elara.AST.Name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier">ModuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier">Name</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier">Qualified</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier">VarName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarOrConName"><span class="hs-identifier">VarOrConName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Region.html"><span class="hs-identifier">Elara.AST.Region</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#IgnoreLocation"><span class="hs-identifier">IgnoreLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#SourceRegion"><span class="hs-identifier">SourceRegion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#sourceRegion"><span class="hs-identifier">sourceRegion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier">unlocated</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#withLocationOf"><span class="hs-identifier">withLocationOf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Region.html"><span class="hs-identifier">Elara.AST.Region</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Located</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html"><span class="hs-identifier">Elara.AST.Renamed</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Select.html"><span class="hs-identifier">Elara.AST.Select</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html"><span class="hs-identifier">Elara.AST.Shunted</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.VarRef.html"><span class="hs-identifier">Elara.AST.VarRef</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Data.Pretty.html"><span class="hs-identifier">Elara.Data.Pretty</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Data.Unique.html"><span class="hs-identifier">Elara.Data.Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier">Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier">Unique</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Error.html"><span class="hs-identifier">Elara.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Error.html#runErrorOrReport"><span class="hs-identifier">runErrorOrReport</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Query.html"><span class="hs-identifier">Elara.Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Query.Effects.html"><span class="hs-identifier">Elara.Query.Effects</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Rename.Error.html"><span class="hs-identifier">Elara.Rename.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Rename.Error.html#RenameError"><span class="hs-identifier">RenameError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html"><span class="hs-identifier">Elara.Shunt.Error</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html"><span class="hs-identifier">Elara.Shunt.Operator</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Exts</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">the</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Optics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Field4</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_4</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Field5</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_5</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">filtered</span></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Print.html"><span class="hs-identifier">Print</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Print.html#debugPretty"><span class="hs-identifier">debugPretty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Rock.html"><span class="hs-identifier">Rock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier">Rock</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Rock.html#fetch"><span class="hs-identifier">fetch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Prelude.html"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">modify'</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-comment">-- effects the shunter itself needs</span><span>
</span><span id="line-42"></span><span class="hs-keyword">type</span><span> </span><span id="ShuntEffects"><span class="annot"><a href="Elara.Shunt.html#ShuntEffects"><span class="hs-identifier hs-var">ShuntEffects</span></a></span></span><span> </span><span id="local-6989586621680054934"><span class="annot"><a href="#local-6989586621680054934"><span class="hs-identifier hs-type">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Error</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntError"><span class="hs-identifier hs-type">ShuntError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680054934"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntWarning"><span class="hs-identifier hs-type">ShuntWarning</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680054934"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="annot"><span class="hs-comment">-- | A function that can lookup operator info</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">type</span><span> </span><span id="OpLookup"><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-var">OpLookup</span></a></span></span><span> </span><span id="local-6989586621680054935"><span class="annot"><a href="#local-6989586621680054935"><span class="hs-identifier hs-type">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.AST.VarRef.html#IgnoreLocVarRef"><span class="hs-identifier hs-type">IgnoreLocVarRef</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054935"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-type">OpInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span id="local-6989586621680054240"><span class="annot"><a href="Elara.Shunt.html#lookupFromOpTable"><span class="hs-identifier hs-type">lookupFromOpTable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpTable"><span class="hs-identifier hs-type">OpTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054240"><span class="hs-identifier hs-type">es</span></a></span></span><span>
</span><span id="line-51"></span><span id="lookupFromOpTable"><span class="annot"><span class="annottext">lookupFromOpTable :: forall (es :: [Effect]). OpTable -&gt; OpLookup es
</span><a href="Elara.Shunt.html#lookupFromOpTable"><span class="hs-identifier hs-var hs-var">lookupFromOpTable</span></a></span></span><span> </span><span id="local-6989586621680054952"><span class="annot"><span class="annottext">OpTable
</span><a href="#local-6989586621680054952"><span class="hs-identifier hs-var">table</span></a></span></span><span> </span><span id="local-6989586621680054953"><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680054953"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe OpInfo -&gt; Eff es (Maybe OpInfo)
forall a. a -&gt; Eff es a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IgnoreLocVarRef Name -&gt; OpTable -&gt; Maybe OpInfo
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680054953"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">OpTable
</span><a href="#local-6989586621680054952"><span class="hs-identifier hs-var">table</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Elara.Shunt.html#InExpr"><span class="hs-identifier hs-type">InExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr%27"><span class="hs-identifier hs-type">RenamedExpr'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">pattern</span><span> </span><span id="InExpr"><span id="%24mInExpr"><span class="annot"><span class="annottext">$mInExpr :: forall {r}. RenamedExpr -&gt; (RenamedExpr' -&gt; r) -&gt; ((# #) -&gt; r) -&gt; r
</span><a href="Elara.Shunt.html#InExpr"><span class="hs-identifier hs-var hs-var">InExpr</span></a></span></span></span><span> </span><span class="annot"><a href="#local-6989586621680054957"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680054957"><span class="annot"><a href="#local-6989586621680054957"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Elara.Shunt.html#InExpr%27"><span class="hs-identifier hs-type">InExpr'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#SourceRegion"><span class="hs-identifier hs-type">SourceRegion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr%27"><span class="hs-identifier hs-type">RenamedExpr'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">pattern</span><span> </span><span id="InExpr%27"><span id="%24mInExpr%27"><span class="annot"><span class="annottext">$mInExpr' :: forall {r}.
RenamedExpr
-&gt; (SourceRegion -&gt; RenamedExpr' -&gt; r) -&gt; ((# #) -&gt; r) -&gt; r
</span><a href="Elara.Shunt.html#InExpr%27"><span class="hs-identifier hs-var hs-var">InExpr'</span></a></span></span></span><span> </span><span class="annot"><a href="#local-6989586621680054962"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054963"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span id="local-6989586621680054962"><span class="annot"><a href="#local-6989586621680054962"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680054963"><span class="annot"><a href="#local-6989586621680054963"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="annot"><a href="Elara.Shunt.html#runGetShuntedModuleQuery"><span class="hs-identifier hs-type">runGetShuntedModuleQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span>
</span><span id="line-62"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span>
</span><span id="line-63"></span><span>            </span><span class="hs-special">'</span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Error</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntError"><span class="hs-identifier hs-type">ShuntError</span></a></span><span>
</span><span id="line-64"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntWarning"><span class="hs-identifier hs-type">ShuntWarning</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Elara.Query.Query</span></a></span><span>
</span><span id="line-66"></span><span>             </span><span class="hs-special">]</span><span>
</span><span id="line-67"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Elara.AST.Select.html#Shunted"><span class="hs-identifier hs-type">Shunted</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span id="runGetShuntedModuleQuery"><span class="annot"><span class="annottext">runGetShuntedModuleQuery :: ModuleName
-&gt; Eff
     (ConsQueryEffects
        '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module 'Shunted)
</span><a href="Elara.Shunt.html#runGetShuntedModuleQuery"><span class="hs-identifier hs-var hs-var">runGetShuntedModuleQuery</span></a></span></span><span> </span><span id="local-6989586621680055075"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680055075"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-70"></span><span>    </span><span id="local-6989586621680055076"><span class="annot"><a href="#local-6989586621680055076"><span class="hs-identifier hs-var">renamed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e (r :: [Effect]) a.
(DiagnosticWriter (Doc AnsiStyle) :&gt; r,
 Error SomeReportableError :&gt; r, ReportableError e) =&gt;
Eff (Error e : r) a -&gt; Eff r a
</span><a href="Elara.Error.html#runErrorOrReport"><span class="hs-identifier hs-var">runErrorOrReport</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Elara.Rename.Error.html#RenameError"><span class="hs-identifier hs-type">RenameError</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff
   (Error RenameError
      : ConsQueryEffects
          '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
   (Module 'Renamed)
 -&gt; Eff
      (ConsQueryEffects
         '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
      (Module 'Renamed))
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects
            '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module 'Renamed)
-&gt; Eff
     (ConsQueryEffects
        '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module 'Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Query
  (Rock Query : ConsQueryEffects '[Error RenameError])
  (Module 'Renamed)
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects
            '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module 'Renamed)
forall (xs :: [Effect]) (es :: [Effect]) (f :: [Effect] -&gt; * -&gt; *)
       a.
(Subset xs es, Rock f :&gt; es, HasCallStack) =&gt;
f xs a -&gt; Eff es a
</span><a href="Rock.html#fetch"><span class="hs-identifier hs-var">Rock.fetch</span></a></span><span> </span><span class="annot"><span class="annottext">(Query
   (Rock Query : ConsQueryEffects '[Error RenameError])
   (Module 'Renamed)
 -&gt; Eff
      (Error RenameError
         : ConsQueryEffects
             '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
      (Module 'Renamed))
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error RenameError])
     (Module 'Renamed)
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects
            '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module 'Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error RenameError])
     (Module 'Renamed)
</span><a href="Elara.Query.html#RenamedModule"><span class="hs-identifier hs-var">Elara.Query.RenamedModule</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680055075"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#shuntWith"><span class="hs-identifier hs-type">shuntWith</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680055079"><span class="hs-identifier hs-type">opLookupQueries</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680055076"><span class="hs-identifier hs-type">renamed</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-73"></span><span>    </span><span id="local-6989586621680055079"><span class="annot"><span class="annottext">opLookupQueries :: IgnoreLocVarRef Name -&gt; Eff es (Maybe OpInfo)
</span><a href="#local-6989586621680055079"><span class="hs-identifier hs-var hs-var">opLookupQueries</span></a></span></span><span> </span><span id="local-6989586621680055112"><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680055112"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Query
  (Rock Query : ConsQueryEffects '[Writer (Set ShuntWarning)])
  (Maybe OpInfo)
-&gt; Eff es (Maybe OpInfo)
forall (xs :: [Effect]) (es :: [Effect]) (f :: [Effect] -&gt; * -&gt; *)
       a.
(Subset xs es, Rock f :&gt; es, HasCallStack) =&gt;
f xs a -&gt; Eff es a
</span><a href="Rock.html#fetch"><span class="hs-identifier hs-var">Rock.fetch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IgnoreLocVarRef Name
-&gt; Query
     (Rock Query : ConsQueryEffects '[Writer (Set ShuntWarning)])
     (Maybe OpInfo)
</span><a href="Elara.Query.html#GetOpInfo"><span class="hs-identifier hs-var">Elara.Query.GetOpInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680055112"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="annot"><a href="Elara.Shunt.html#runShuntedDeclarationByNameQuery"><span class="hs-identifier hs-type">runShuntedDeclarationByNameQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Elara.Query.Query</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-type">Declaration</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Elara.AST.Select.html#Shunted"><span class="hs-identifier hs-type">Shunted</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span id="runShuntedDeclarationByNameQuery"><span class="annot"><span class="annottext">runShuntedDeclarationByNameQuery :: Qualified Name
-&gt; Eff (ConsQueryEffects '[Rock Query]) (Declaration 'Shunted)
</span><a href="Elara.Shunt.html#runShuntedDeclarationByNameQuery"><span class="hs-identifier hs-var hs-var">runShuntedDeclarationByNameQuery</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span id="local-6989586621680055297"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680055297"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680055298"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680055298"><span class="hs-identifier hs-var">modName</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-77"></span><span>    </span><span id="local-6989586621680055299"><span class="annot"><a href="#local-6989586621680055299"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e (r :: [Effect]) a.
(DiagnosticWriter (Doc AnsiStyle) :&gt; r,
 Error SomeReportableError :&gt; r, ReportableError e) =&gt;
Eff (Error e : r) a -&gt; Eff r a
</span><a href="Elara.Error.html#runErrorOrReport"><span class="hs-identifier hs-var">runErrorOrReport</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntError"><span class="hs-identifier hs-type">ShuntError</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff
   (Error ShuntError : ConsQueryEffects '[Rock Query])
   (Module 'Shunted)
 -&gt; Eff (ConsQueryEffects '[Rock Query]) (Module 'Shunted))
-&gt; Eff
     (Error ShuntError : ConsQueryEffects '[Rock Query])
     (Module 'Shunted)
-&gt; Eff (ConsQueryEffects '[Rock Query]) (Module 'Shunted)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Query
  (Rock Query : ConsQueryEffects '[Error ShuntError])
  (Module 'Shunted)
-&gt; Eff
     (Error ShuntError : ConsQueryEffects '[Rock Query])
     (Module 'Shunted)
forall (xs :: [Effect]) (es :: [Effect]) (f :: [Effect] -&gt; * -&gt; *)
       a.
(Subset xs es, Rock f :&gt; es, HasCallStack) =&gt;
f xs a -&gt; Eff es a
</span><a href="Rock.html#fetch"><span class="hs-identifier hs-var">Rock.fetch</span></a></span><span> </span><span class="annot"><span class="annottext">(Query
   (Rock Query : ConsQueryEffects '[Error ShuntError])
   (Module 'Shunted)
 -&gt; Eff
      (Error ShuntError : ConsQueryEffects '[Rock Query])
      (Module 'Shunted))
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error ShuntError])
     (Module 'Shunted)
-&gt; Eff
     (Error ShuntError : ConsQueryEffects '[Rock Query])
     (Module 'Shunted)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error ShuntError])
     (Module 'Shunted)
</span><a href="Elara.Query.html#ShuntedModule"><span class="hs-identifier hs-var">Elara.Query.ShuntedModule</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680055298"><span class="hs-identifier hs-var">modName</span></a></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680055301"><span class="annot"><a href="#local-6989586621680055301"><span class="hs-identifier hs-var hs-var">matchingBodies</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-80"></span><span>            </span><span class="annot"><span class="annottext">Module 'Shunted
</span><a href="#local-6989586621680055299"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-81"></span><span>                </span><span class="annot"><span class="annottext">Module 'Shunted
-&gt; Optic' A_Fold '[Int] (Module 'Shunted) (Declaration 'Shunted)
-&gt; [Declaration 'Shunted]
forall k s (is :: IxList) a.
Is k A_Fold =&gt;
s -&gt; Optic' k is s a -&gt; [a]
</span><span class="hs-operator hs-var">^..</span></span><span> </span><span class="annot"><span class="annottext">Iso
  (Module 'Shunted)
  (Module 'Shunted)
  (Located (Module' 'Shunted))
  (Located (Module' 'Shunted))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span>
</span><span id="line-82"></span><span>                </span><span class="annot"><span class="annottext">Iso
  (Module 'Shunted)
  (Module 'Shunted)
  (Located (Module' 'Shunted))
  (Located (Module' 'Shunted))
-&gt; Optic
     A_Lens
     '[]
     (Located (Module' 'Shunted))
     (Located (Module' 'Shunted))
     (Module' 'Shunted)
     (Module' 'Shunted)
-&gt; Optic
     A_Lens
     '[]
     (Module 'Shunted)
     (Module 'Shunted)
     (Module' 'Shunted)
     (Module' 'Shunted)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Module' 'Shunted))
  (Located (Module' 'Shunted))
  (Module' 'Shunted)
  (Module' 'Shunted)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span>
</span><span id="line-83"></span><span>                </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Module 'Shunted)
  (Module 'Shunted)
  (Module' 'Shunted)
  (Module' 'Shunted)
-&gt; Optic
     A_Lens
     '[]
     (Module' 'Shunted)
     (Module' 'Shunted)
     [Declaration 'Shunted]
     [Declaration 'Shunted]
-&gt; Optic
     A_Lens
     '[]
     (Module 'Shunted)
     (Module 'Shunted)
     [Declaration 'Shunted]
     [Declaration 'Shunted]
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">forall (field :: Symbol) s a. HasField' field s a =&gt; Lens s s a a
</span><span class="hs-identifier hs-var">field'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;declarations&quot;</span></span><span>
</span><span id="line-84"></span><span>                </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Module 'Shunted)
  (Module 'Shunted)
  [Declaration 'Shunted]
  [Declaration 'Shunted]
-&gt; Optic
     A_Traversal
     '[Int]
     [Declaration 'Shunted]
     [Declaration 'Shunted]
     (Declaration 'Shunted)
     (Declaration 'Shunted)
-&gt; Optic
     A_Traversal
     '[Int]
     (Module 'Shunted)
     (Module 'Shunted)
     (Declaration 'Shunted)
     (Declaration 'Shunted)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  [Declaration 'Shunted]
  [Declaration 'Shunted]
  (Declaration 'Shunted)
  (Declaration 'Shunted)
forall i s t a b. Each i s t a b =&gt; IxTraversal i s t a b
</span><span class="hs-identifier hs-var">each</span></span><span>
</span><span id="line-85"></span><span>                </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  (Module 'Shunted)
  (Module 'Shunted)
  (Declaration 'Shunted)
  (Declaration 'Shunted)
-&gt; Optic
     An_AffineFold
     '[]
     (Declaration 'Shunted)
     (Declaration 'Shunted)
     (Declaration 'Shunted)
     (Declaration 'Shunted)
-&gt; Optic' A_Fold '[Int] (Module 'Shunted) (Declaration 'Shunted)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">(Declaration 'Shunted -&gt; Bool)
-&gt; Optic
     An_AffineFold
     '[]
     (Declaration 'Shunted)
     (Declaration 'Shunted)
     (Declaration 'Shunted)
     (Declaration 'Shunted)
forall a. (a -&gt; Bool) -&gt; AffineFold a a
</span><span class="hs-identifier hs-var">filtered</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680055306"><span class="annot"><span class="annottext">Declaration 'Shunted
</span><a href="#local-6989586621680055306"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Declaration 'Shunted
</span><a href="#local-6989586621680055306"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Declaration 'Shunted
-&gt; Optic' A_Getter '[] (Declaration 'Shunted) Name -&gt; Name
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Getter
  '[]
  (Declaration 'Shunted)
  (Declaration 'Shunted)
  (Located Name)
  (Located Name)
Getter
  (Declaration 'Shunted) (CleanupLocated (ASTLocate' 'Shunted Name))
forall {a} (ast :: a).
(CleanupLocated (Located (Select &quot;TypeName&quot; ast))
 ~ Located (Select &quot;TypeName&quot; ast),
 CleanupLocated (Located (Select &quot;ValueName&quot; ast))
 ~ Located (Select &quot;ValueName&quot; ast),
 CleanupLocated (Located (Select &quot;AnyName&quot; ast))
 ~ Located (Select &quot;AnyName&quot; ast),
 RUnlocate ast,
 DataConAs (Select &quot;InfixDecl&quot; ast) (InfixDeclaration ast),
 ToName (Select &quot;TypeName&quot; ast), ToName (Select &quot;ValueName&quot; ast),
 ToName (Select &quot;AnyName&quot; ast)) =&gt;
Getter (Declaration ast) (CleanupLocated (ASTLocate' ast Name))
</span><a href="Elara.AST.Generic.Types.html#declarationName"><span class="hs-identifier hs-var">declarationName</span></a></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Getter
  '[]
  (Declaration 'Shunted)
  (Declaration 'Shunted)
  (Located Name)
  (Located Name)
-&gt; Optic A_Lens '[] (Located Name) (Located Name) Name Name
-&gt; Optic' A_Getter '[] (Declaration 'Shunted) Name
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Lens '[] (Located Name) (Located Name) Name Name
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680055297"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621680055301"><span class="hs-identifier hs-type">matchingBodies</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-88"></span><span>        </span><span class="hs-special">[</span><span id="local-6989586621680055309"><span class="annot"><span class="annottext">Declaration 'Shunted
</span><a href="#local-6989586621680055309"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Declaration 'Shunted
-&gt; Eff (ConsQueryEffects '[Rock Query]) (Declaration 'Shunted)
forall a. a -&gt; Eff (ConsQueryEffects '[Rock Query]) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Declaration 'Shunted
</span><a href="#local-6989586621680055309"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-89"></span><span>        </span><span class="annot"><span class="annottext">[Declaration 'Shunted]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Eff (ConsQueryEffects '[Rock Query]) (Declaration 'Shunted)
forall a t. (HasCallStack, IsText t) =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ambigious&quot;</span></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="annot"><a href="Elara.Shunt.html#runGetOpInfoQuery"><span class="hs-identifier hs-type">runGetOpInfoQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.VarRef.html#IgnoreLocVarRef"><span class="hs-identifier hs-type">IgnoreLocVarRef</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Eff.Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntWarning"><span class="hs-identifier hs-type">ShuntWarning</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Elara.Query.Query</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-type">OpInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span id="runGetOpInfoQuery"><span class="annot"><span class="annottext">runGetOpInfoQuery :: IgnoreLocVarRef Name
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Maybe OpInfo)
</span><a href="Elara.Shunt.html#runGetOpInfoQuery"><span class="hs-identifier hs-var hs-var">runGetOpInfoQuery</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.VarRef.html#Global"><span class="hs-identifier hs-type">Global</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#IgnoreLocation"><span class="hs-identifier hs-type">IgnoreLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span id="local-6989586621680055962"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680055962"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680055963"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680055963"><span class="hs-identifier hs-var">modName</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-comment">-- I would love to be able to use ShuntedDeclarationByName but it will recurse forever :(</span><span>
</span><span id="line-94"></span><span>    </span><span id="local-6989586621680055964"><span class="annot"><a href="#local-6989586621680055964"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e (r :: [Effect]) a.
(DiagnosticWriter (Doc AnsiStyle) :&gt; r,
 Error SomeReportableError :&gt; r, ReportableError e) =&gt;
Eff (Error e : r) a -&gt; Eff r a
</span><a href="Elara.Error.html#runErrorOrReport"><span class="hs-identifier hs-var">runErrorOrReport</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Elara.Rename.Error.html#RenameError"><span class="hs-identifier hs-type">RenameError</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff
   (Error RenameError
      : ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
   (Module 'Renamed)
 -&gt; Eff
      (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
      (Module 'Renamed))
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Module 'Renamed)
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Module 'Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Query
  (Rock Query : ConsQueryEffects '[Error RenameError])
  (Module 'Renamed)
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Module 'Renamed)
forall (xs :: [Effect]) (es :: [Effect]) (f :: [Effect] -&gt; * -&gt; *)
       a.
(Subset xs es, Rock f :&gt; es, HasCallStack) =&gt;
f xs a -&gt; Eff es a
</span><a href="Rock.html#fetch"><span class="hs-identifier hs-var">Rock.fetch</span></a></span><span> </span><span class="annot"><span class="annottext">(Query
   (Rock Query : ConsQueryEffects '[Error RenameError])
   (Module 'Renamed)
 -&gt; Eff
      (Error RenameError
         : ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
      (Module 'Renamed))
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error RenameError])
     (Module 'Renamed)
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Module 'Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error RenameError])
     (Module 'Renamed)
</span><a href="Elara.Query.html#RenamedModule"><span class="hs-identifier hs-var">Elara.Query.RenamedModule</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680055963"><span class="hs-identifier hs-var">modName</span></a></span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680055965"><span class="annot"><a href="#local-6989586621680055965"><span class="hs-identifier hs-var hs-var">matchingBodies</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-96"></span><span>            </span><span class="annot"><span class="annottext">Module 'Renamed
</span><a href="#local-6989586621680055964"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-97"></span><span>                </span><span class="annot"><span class="annottext">Module 'Renamed
-&gt; Optic'
     A_Fold '[Int] (Module 'Renamed) (DeclarationBody 'Renamed)
-&gt; [DeclarationBody 'Renamed]
forall k s (is :: IxList) a.
Is k A_Fold =&gt;
s -&gt; Optic' k is s a -&gt; [a]
</span><span class="hs-operator hs-var">^..</span></span><span> </span><span class="annot"><span class="annottext">Iso
  (Module 'Renamed)
  (Module 'Renamed)
  (Located (Module' 'Renamed))
  (Located (Module' 'Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span>
</span><span id="line-98"></span><span>                </span><span class="annot"><span class="annottext">Iso
  (Module 'Renamed)
  (Module 'Renamed)
  (Located (Module' 'Renamed))
  (Located (Module' 'Renamed))
-&gt; Optic
     A_Lens
     '[]
     (Located (Module' 'Renamed))
     (Located (Module' 'Renamed))
     (Module' 'Renamed)
     (Module' 'Renamed)
-&gt; Optic
     A_Lens
     '[]
     (Module 'Renamed)
     (Module 'Renamed)
     (Module' 'Renamed)
     (Module' 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Module' 'Renamed))
  (Located (Module' 'Renamed))
  (Module' 'Renamed)
  (Module' 'Renamed)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span>
</span><span id="line-99"></span><span>                </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Module 'Renamed)
  (Module 'Renamed)
  (Module' 'Renamed)
  (Module' 'Renamed)
-&gt; Optic
     A_Lens
     '[]
     (Module' 'Renamed)
     (Module' 'Renamed)
     [Declaration 'Renamed]
     [Declaration 'Renamed]
-&gt; Optic
     A_Lens
     '[]
     (Module 'Renamed)
     (Module 'Renamed)
     [Declaration 'Renamed]
     [Declaration 'Renamed]
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">forall (field :: Symbol) s a. HasField' field s a =&gt; Lens s s a a
</span><span class="hs-identifier hs-var">field'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;declarations&quot;</span></span><span>
</span><span id="line-100"></span><span>                </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Module 'Renamed)
  (Module 'Renamed)
  [Declaration 'Renamed]
  [Declaration 'Renamed]
-&gt; Optic
     A_Traversal
     '[Int]
     [Declaration 'Renamed]
     [Declaration 'Renamed]
     (Declaration 'Renamed)
     (Declaration 'Renamed)
-&gt; Optic
     A_Traversal
     '[Int]
     (Module 'Renamed)
     (Module 'Renamed)
     (Declaration 'Renamed)
     (Declaration 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  [Declaration 'Renamed]
  [Declaration 'Renamed]
  (Declaration 'Renamed)
  (Declaration 'Renamed)
forall i s t a b. Each i s t a b =&gt; IxTraversal i s t a b
</span><span class="hs-identifier hs-var">each</span></span><span>
</span><span id="line-101"></span><span>                </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  (Module 'Renamed)
  (Module 'Renamed)
  (Declaration 'Renamed)
  (Declaration 'Renamed)
-&gt; Optic
     An_Iso
     '[]
     (Declaration 'Renamed)
     (Declaration 'Renamed)
     (Located (Declaration' 'Renamed))
     (Located (Declaration' 'Renamed))
-&gt; Optic
     A_Traversal
     '[Int]
     (Module 'Renamed)
     (Module 'Renamed)
     (Located (Declaration' 'Renamed))
     (Located (Declaration' 'Renamed))
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  An_Iso
  '[]
  (Declaration 'Renamed)
  (Declaration 'Renamed)
  (Located (Declaration' 'Renamed))
  (Located (Declaration' 'Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span>
</span><span id="line-102"></span><span>                </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  (Module 'Renamed)
  (Module 'Renamed)
  (Located (Declaration' 'Renamed))
  (Located (Declaration' 'Renamed))
-&gt; Optic
     A_Lens
     '[]
     (Located (Declaration' 'Renamed))
     (Located (Declaration' 'Renamed))
     (Declaration' 'Renamed)
     (Declaration' 'Renamed)
-&gt; Optic
     A_Traversal
     '[Int]
     (Module 'Renamed)
     (Module 'Renamed)
     (Declaration' 'Renamed)
     (Declaration' 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Declaration' 'Renamed))
  (Located (Declaration' 'Renamed))
  (Declaration' 'Renamed)
  (Declaration' 'Renamed)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span>
</span><span id="line-103"></span><span>                </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  (Module 'Renamed)
  (Module 'Renamed)
  (Declaration' 'Renamed)
  (Declaration' 'Renamed)
-&gt; Optic
     A_Lens
     '[]
     (Declaration' 'Renamed)
     (Declaration' 'Renamed)
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
-&gt; Optic
     A_Traversal
     '[Int]
     (Module 'Renamed)
     (Module 'Renamed)
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">forall (field :: Symbol) s a. HasField' field s a =&gt; Lens s s a a
</span><span class="hs-identifier hs-var">field'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;body&quot;</span></span><span>
</span><span id="line-104"></span><span>                </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  (Module 'Renamed)
  (Module 'Renamed)
  (DeclarationBody 'Renamed)
  (DeclarationBody 'Renamed)
-&gt; Optic
     An_AffineFold
     '[]
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
-&gt; Optic'
     A_Fold '[Int] (Module 'Renamed) (DeclarationBody 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">(DeclarationBody 'Renamed -&gt; Bool)
-&gt; Optic
     An_AffineFold
     '[]
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
forall a. (a -&gt; Bool) -&gt; AffineFold a a
</span><span class="hs-identifier hs-var">filtered</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680055966"><span class="annot"><span class="annottext">DeclarationBody 'Renamed
</span><a href="#local-6989586621680055966"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DeclarationBody 'Renamed
</span><a href="#local-6989586621680055966"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">DeclarationBody 'Renamed
-&gt; Optic' A_Getter '[] (DeclarationBody 'Renamed) Name -&gt; Name
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Getter
  '[]
  (DeclarationBody 'Renamed)
  (DeclarationBody 'Renamed)
  (Located Name)
  (Located Name)
Getter
  (DeclarationBody 'Renamed)
  (CleanupLocated (ASTLocate' 'Renamed Name))
forall {a} (ast :: a).
(CleanupLocated (Located (Select &quot;TypeName&quot; ast))
 ~ Located (Select &quot;TypeName&quot; ast),
 CleanupLocated (Located (Select &quot;ValueName&quot; ast))
 ~ Located (Select &quot;ValueName&quot; ast),
 CleanupLocated (Located (Select &quot;AnyName&quot; ast))
 ~ Located (Select &quot;AnyName&quot; ast),
 RUnlocate ast,
 DataConAs (Select &quot;InfixDecl&quot; ast) (InfixDeclaration ast),
 ToName (Select &quot;TypeName&quot; ast), ToName (Select &quot;ValueName&quot; ast),
 ToName (Select &quot;AnyName&quot; ast)) =&gt;
Getter (DeclarationBody ast) (CleanupLocated (ASTLocate' ast Name))
</span><a href="Elara.AST.Generic.Types.html#declarationBodyName"><span class="hs-identifier hs-var">declarationBodyName</span></a></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Getter
  '[]
  (DeclarationBody 'Renamed)
  (DeclarationBody 'Renamed)
  (Located Name)
  (Located Name)
-&gt; Optic A_Lens '[] (Located Name) (Located Name) Name Name
-&gt; Optic' A_Getter '[] (DeclarationBody 'Renamed) Name
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Lens '[] (Located Name) (Located Name) Name Name
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680055962"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span>        </span><span id="local-6989586621680055968"><span class="annot"><a href="#local-6989586621680055968"><span class="hs-identifier hs-var hs-var">valueInfixDecls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[DeclarationBody 'Renamed]
</span><a href="#local-6989586621680055965"><span class="hs-identifier hs-var">matchingBodies</span></a></span><span> </span><span class="annot"><span class="annottext">[DeclarationBody 'Renamed]
-&gt; Optic'
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     (Maybe (InfixDeclaration 'Renamed))
-&gt; [Maybe (InfixDeclaration 'Renamed)]
forall k s (is :: IxList) a.
Is k A_Fold =&gt;
s -&gt; Optic' k is s a -&gt; [a]
</span><span class="hs-operator hs-var">^..</span></span><span> </span><span class="annot"><span class="annottext">IxTraversal
  Int
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (DeclarationBody 'Renamed)
  (DeclarationBody 'Renamed)
forall i s t a b. Each i s t a b =&gt; IxTraversal i s t a b
</span><span class="hs-identifier hs-var">each</span></span><span> </span><span class="annot"><span class="annottext">IxTraversal
  Int
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (DeclarationBody 'Renamed)
  (DeclarationBody 'Renamed)
-&gt; Optic
     An_Iso
     '[]
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
     (Located (DeclarationBody' 'Renamed))
     (Located (DeclarationBody' 'Renamed))
-&gt; Optic
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     [DeclarationBody 'Renamed]
     (Located (DeclarationBody' 'Renamed))
     (Located (DeclarationBody' 'Renamed))
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  An_Iso
  '[]
  (DeclarationBody 'Renamed)
  (DeclarationBody 'Renamed)
  (Located (DeclarationBody' 'Renamed))
  (Located (DeclarationBody' 'Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (Located (DeclarationBody' 'Renamed))
  (Located (DeclarationBody' 'Renamed))
-&gt; Optic
     A_Lens
     '[]
     (Located (DeclarationBody' 'Renamed))
     (Located (DeclarationBody' 'Renamed))
     (DeclarationBody' 'Renamed)
     (DeclarationBody' 'Renamed)
-&gt; Optic
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     [DeclarationBody 'Renamed]
     (DeclarationBody' 'Renamed)
     (DeclarationBody' 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (DeclarationBody' 'Renamed))
  (Located (DeclarationBody' 'Renamed))
  (DeclarationBody' 'Renamed)
  (DeclarationBody' 'Renamed)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (DeclarationBody' 'Renamed)
  (DeclarationBody' 'Renamed)
-&gt; Optic
     A_Prism
     '[]
     (DeclarationBody' 'Renamed)
     (DeclarationBody' 'Renamed)
     (Located (Qualified VarName), RenamedExpr, NoFieldValue,
      Maybe RenamedType, ValueDeclAnnotations 'Renamed)
     (Located (Qualified VarName), RenamedExpr, NoFieldValue,
      Maybe RenamedType, ValueDeclAnnotations 'Renamed)
-&gt; Optic
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     [DeclarationBody 'Renamed]
     (Located (Qualified VarName), RenamedExpr, NoFieldValue,
      Maybe RenamedType, ValueDeclAnnotations 'Renamed)
     (Located (Qualified VarName), RenamedExpr, NoFieldValue,
      Maybe RenamedType, ValueDeclAnnotations 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">forall (ctor :: Symbol) s a.
AsConstructor' ctor s a =&gt;
Prism s s a a
</span><span class="hs-identifier hs-var">_Ctor'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;Value&quot;</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (Located (Qualified VarName), RenamedExpr, NoFieldValue,
   Maybe RenamedType, ValueDeclAnnotations 'Renamed)
  (Located (Qualified VarName), RenamedExpr, NoFieldValue,
   Maybe RenamedType, ValueDeclAnnotations 'Renamed)
-&gt; Optic
     A_Lens
     '[]
     (Located (Qualified VarName), RenamedExpr, NoFieldValue,
      Maybe RenamedType, ValueDeclAnnotations 'Renamed)
     (Located (Qualified VarName), RenamedExpr, NoFieldValue,
      Maybe RenamedType, ValueDeclAnnotations 'Renamed)
     (ValueDeclAnnotations 'Renamed)
     (ValueDeclAnnotations 'Renamed)
-&gt; Optic
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     [DeclarationBody 'Renamed]
     (ValueDeclAnnotations 'Renamed)
     (ValueDeclAnnotations 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Qualified VarName), RenamedExpr, NoFieldValue,
   Maybe RenamedType, ValueDeclAnnotations 'Renamed)
  (Located (Qualified VarName), RenamedExpr, NoFieldValue,
   Maybe RenamedType, ValueDeclAnnotations 'Renamed)
  (ValueDeclAnnotations 'Renamed)
  (ValueDeclAnnotations 'Renamed)
forall s t a b. Field5 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_5</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (ValueDeclAnnotations 'Renamed)
  (ValueDeclAnnotations 'Renamed)
-&gt; Optic
     A_Lens
     '[]
     (ValueDeclAnnotations 'Renamed)
     (ValueDeclAnnotations 'Renamed)
     (Maybe (InfixDeclaration 'Renamed))
     (Maybe (InfixDeclaration 'Renamed))
-&gt; Optic'
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     (Maybe (InfixDeclaration 'Renamed))
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">forall (field :: Symbol) s a. HasField' field s a =&gt; Lens s s a a
</span><span class="hs-identifier hs-var">field'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;infixValueDecl&quot;</span></span><span>
</span><span id="line-107"></span><span>        </span><span id="local-6989586621680055970"><span class="annot"><a href="#local-6989586621680055970"><span class="hs-identifier hs-var hs-var">typeInfixDecls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[DeclarationBody 'Renamed]
</span><a href="#local-6989586621680055965"><span class="hs-identifier hs-var">matchingBodies</span></a></span><span> </span><span class="annot"><span class="annottext">[DeclarationBody 'Renamed]
-&gt; Optic'
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     (Maybe (InfixDeclaration 'Renamed))
-&gt; [Maybe (InfixDeclaration 'Renamed)]
forall k s (is :: IxList) a.
Is k A_Fold =&gt;
s -&gt; Optic' k is s a -&gt; [a]
</span><span class="hs-operator hs-var">^..</span></span><span> </span><span class="annot"><span class="annottext">IxTraversal
  Int
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (DeclarationBody 'Renamed)
  (DeclarationBody 'Renamed)
forall i s t a b. Each i s t a b =&gt; IxTraversal i s t a b
</span><span class="hs-identifier hs-var">each</span></span><span> </span><span class="annot"><span class="annottext">IxTraversal
  Int
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (DeclarationBody 'Renamed)
  (DeclarationBody 'Renamed)
-&gt; Optic
     An_Iso
     '[]
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
     (Located (DeclarationBody' 'Renamed))
     (Located (DeclarationBody' 'Renamed))
-&gt; Optic
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     [DeclarationBody 'Renamed]
     (Located (DeclarationBody' 'Renamed))
     (Located (DeclarationBody' 'Renamed))
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  An_Iso
  '[]
  (DeclarationBody 'Renamed)
  (DeclarationBody 'Renamed)
  (Located (DeclarationBody' 'Renamed))
  (Located (DeclarationBody' 'Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (Located (DeclarationBody' 'Renamed))
  (Located (DeclarationBody' 'Renamed))
-&gt; Optic
     A_Lens
     '[]
     (Located (DeclarationBody' 'Renamed))
     (Located (DeclarationBody' 'Renamed))
     (DeclarationBody' 'Renamed)
     (DeclarationBody' 'Renamed)
-&gt; Optic
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     [DeclarationBody 'Renamed]
     (DeclarationBody' 'Renamed)
     (DeclarationBody' 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (DeclarationBody' 'Renamed))
  (Located (DeclarationBody' 'Renamed))
  (DeclarationBody' 'Renamed)
  (DeclarationBody' 'Renamed)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (DeclarationBody' 'Renamed)
  (DeclarationBody' 'Renamed)
-&gt; Optic
     A_Prism
     '[]
     (DeclarationBody' 'Renamed)
     (DeclarationBody' 'Renamed)
     (Located (Qualified TypeName), [Located (Unique LowerAlphaName)],
      Located (TypeDeclaration 'Renamed), TypeDeclAnnotations 'Renamed)
     (Located (Qualified TypeName), [Located (Unique LowerAlphaName)],
      Located (TypeDeclaration 'Renamed), TypeDeclAnnotations 'Renamed)
-&gt; Optic
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     [DeclarationBody 'Renamed]
     (Located (Qualified TypeName), [Located (Unique LowerAlphaName)],
      Located (TypeDeclaration 'Renamed), TypeDeclAnnotations 'Renamed)
     (Located (Qualified TypeName), [Located (Unique LowerAlphaName)],
      Located (TypeDeclaration 'Renamed), TypeDeclAnnotations 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">forall (ctor :: Symbol) s a.
AsConstructor' ctor s a =&gt;
Prism s s a a
</span><span class="hs-identifier hs-var">_Ctor'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;TypeDeclaration&quot;</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (Located (Qualified TypeName), [Located (Unique LowerAlphaName)],
   Located (TypeDeclaration 'Renamed), TypeDeclAnnotations 'Renamed)
  (Located (Qualified TypeName), [Located (Unique LowerAlphaName)],
   Located (TypeDeclaration 'Renamed), TypeDeclAnnotations 'Renamed)
-&gt; Optic
     A_Lens
     '[]
     (Located (Qualified TypeName), [Located (Unique LowerAlphaName)],
      Located (TypeDeclaration 'Renamed), TypeDeclAnnotations 'Renamed)
     (Located (Qualified TypeName), [Located (Unique LowerAlphaName)],
      Located (TypeDeclaration 'Renamed), TypeDeclAnnotations 'Renamed)
     (TypeDeclAnnotations 'Renamed)
     (TypeDeclAnnotations 'Renamed)
-&gt; Optic
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     [DeclarationBody 'Renamed]
     (TypeDeclAnnotations 'Renamed)
     (TypeDeclAnnotations 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Qualified TypeName), [Located (Unique LowerAlphaName)],
   Located (TypeDeclaration 'Renamed), TypeDeclAnnotations 'Renamed)
  (Located (Qualified TypeName), [Located (Unique LowerAlphaName)],
   Located (TypeDeclaration 'Renamed), TypeDeclAnnotations 'Renamed)
  (TypeDeclAnnotations 'Renamed)
  (TypeDeclAnnotations 'Renamed)
forall s t a b. Field4 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_4</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  '[Int]
  [DeclarationBody 'Renamed]
  [DeclarationBody 'Renamed]
  (TypeDeclAnnotations 'Renamed)
  (TypeDeclAnnotations 'Renamed)
-&gt; Optic
     A_Lens
     '[]
     (TypeDeclAnnotations 'Renamed)
     (TypeDeclAnnotations 'Renamed)
     (Maybe (InfixDeclaration 'Renamed))
     (Maybe (InfixDeclaration 'Renamed))
-&gt; Optic'
     A_Traversal
     '[Int]
     [DeclarationBody 'Renamed]
     (Maybe (InfixDeclaration 'Renamed))
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">forall (field :: Symbol) s a. HasField' field s a =&gt; Lens s s a a
</span><span class="hs-identifier hs-var">field'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;infixTypeDecl&quot;</span></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span>        </span><span id="local-6989586621680055971"><span class="annot"><a href="#local-6989586621680055971"><span class="hs-identifier hs-var hs-var">infixDecls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Maybe (InfixDeclaration 'Renamed)]
</span><a href="#local-6989586621680055968"><span class="hs-identifier hs-var">valueInfixDecls</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe (InfixDeclaration 'Renamed)]
-&gt; [Maybe (InfixDeclaration 'Renamed)]
-&gt; [Maybe (InfixDeclaration 'Renamed)]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (InfixDeclaration 'Renamed)]
</span><a href="#local-6989586621680055970"><span class="hs-identifier hs-var">typeInfixDecls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Maybe (InfixDeclaration 'Renamed)]
-&gt; Optic'
     A_Traversal
     '[Int]
     [Maybe (InfixDeclaration 'Renamed)]
     (InfixDeclaration 'Renamed)
-&gt; [InfixDeclaration 'Renamed]
forall k s (is :: IxList) a.
Is k A_Fold =&gt;
s -&gt; Optic' k is s a -&gt; [a]
</span><span class="hs-operator hs-var">^..</span></span><span> </span><span class="annot"><span class="annottext">IxTraversal
  Int
  [Maybe (InfixDeclaration 'Renamed)]
  [Maybe (InfixDeclaration 'Renamed)]
  (Maybe (InfixDeclaration 'Renamed))
  (Maybe (InfixDeclaration 'Renamed))
forall i s t a b. Each i s t a b =&gt; IxTraversal i s t a b
</span><span class="hs-identifier hs-var">each</span></span><span> </span><span class="annot"><span class="annottext">IxTraversal
  Int
  [Maybe (InfixDeclaration 'Renamed)]
  [Maybe (InfixDeclaration 'Renamed)]
  (Maybe (InfixDeclaration 'Renamed))
  (Maybe (InfixDeclaration 'Renamed))
-&gt; Optic
     A_Prism
     '[]
     (Maybe (InfixDeclaration 'Renamed))
     (Maybe (InfixDeclaration 'Renamed))
     (InfixDeclaration 'Renamed)
     (InfixDeclaration 'Renamed)
-&gt; Optic'
     A_Traversal
     '[Int]
     [Maybe (InfixDeclaration 'Renamed)]
     (InfixDeclaration 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Prism
  '[]
  (Maybe (InfixDeclaration 'Renamed))
  (Maybe (InfixDeclaration 'Renamed))
  (InfixDeclaration 'Renamed)
  (InfixDeclaration 'Renamed)
forall a b. Prism (Maybe a) (Maybe b) a b
</span><span class="hs-identifier hs-var">_Just</span></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621680055971"><span class="hs-identifier hs-type">infixDecls</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-112"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-113"></span><span>            </span><span class="annot"><span class="annottext">Set ShuntWarning
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query]) ()
forall w (es :: [Effect]).
(HasCallStack, Writer w :&gt; es, Monoid w) =&gt;
w -&gt; Eff es ()
</span><span class="hs-identifier hs-var">Eff.tell</span></span><span> </span><span class="annot"><span class="annottext">(Set ShuntWarning
 -&gt; Eff
      (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query]) ())
-&gt; Set ShuntWarning
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query]) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OneItem (Set ShuntWarning) -&gt; Set ShuntWarning
forall x. One x =&gt; OneItem x -&gt; x
</span><span class="hs-identifier hs-var">one</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OpTable -&gt; DeclarationBody 'Renamed -&gt; ShuntWarning
</span><a href="Elara.Shunt.Error.html#UnknownPrecedence"><span class="hs-identifier hs-var">UnknownPrecedence</span></a></span><span> </span><span class="annot"><span class="annottext">OpTable
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DeclarationBody 'Renamed] -&gt; DeclarationBody 'Renamed
forall a. Eq a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">the</span></span><span> </span><span class="annot"><span class="annottext">[DeclarationBody 'Renamed]
</span><a href="#local-6989586621680055965"><span class="hs-identifier hs-var">matchingBodies</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>            </span><span class="annot"><span class="annottext">Maybe OpInfo
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Maybe OpInfo)
forall a.
a
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query]) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe OpInfo
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-115"></span><span>        </span><span class="hs-special">[</span><span id="local-6989586621680055976"><span class="annot"><span class="annottext">InfixDeclaration 'Renamed
</span><a href="#local-6989586621680055976"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe OpInfo
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Maybe OpInfo)
forall a.
a
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query]) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe OpInfo
 -&gt; Eff
      (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
      (Maybe OpInfo))
-&gt; Maybe OpInfo
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Maybe OpInfo)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OpInfo -&gt; Maybe OpInfo
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(OpInfo -&gt; Maybe OpInfo) -&gt; OpInfo -&gt; Maybe OpInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">InfixDeclaration 'Renamed -&gt; OpInfo
</span><a href="Elara.Shunt.html#infixDeclToOpInfo"><span class="hs-identifier hs-var">infixDeclToOpInfo</span></a></span><span> </span><span class="annot"><span class="annottext">InfixDeclaration 'Renamed
</span><a href="#local-6989586621680055976"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-116"></span><span>        </span><span id="local-6989586621680055978"><span class="annot"><span class="annottext">[InfixDeclaration 'Renamed]
</span><a href="#local-6989586621680055978"><span class="hs-identifier hs-var">_tooMany</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Maybe OpInfo)
forall a t. (HasCallStack, IsText t) =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ambiguous&quot;</span></span><span>
</span><span id="line-117"></span><span class="annot"><a href="Elara.Shunt.html#runGetOpInfoQuery"><span class="hs-identifier hs-var">runGetOpInfoQuery</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.VarRef.html#Local"><span class="hs-identifier hs-type">Local</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><span class="annottext">Maybe OpInfo
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Maybe OpInfo)
forall a.
a
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query]) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe OpInfo
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- TODO there must be a way of getting local operator info</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="annot"><a href="Elara.Shunt.html#runGetOpTableInQuery"><span class="hs-identifier hs-type">runGetOpTableInQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Elara.Query.Query</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpTable"><span class="hs-identifier hs-type">OpTable</span></a></span><span>
</span><span id="line-121"></span><span id="runGetOpTableInQuery"><span class="annot"><span class="annottext">runGetOpTableInQuery :: ModuleName -&gt; Eff (ConsQueryEffects '[Rock Query]) OpTable
</span><a href="Elara.Shunt.html#runGetOpTableInQuery"><span class="hs-identifier hs-var hs-var">runGetOpTableInQuery</span></a></span></span><span> </span><span id="local-6989586621680056051"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680056051"><span class="hs-identifier hs-var">moduleName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-122"></span><span>    </span><span id="local-6989586621680056052"><span class="annot"><a href="#local-6989586621680056052"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e (r :: [Effect]) a.
(DiagnosticWriter (Doc AnsiStyle) :&gt; r,
 Error SomeReportableError :&gt; r, ReportableError e) =&gt;
Eff (Error e : r) a -&gt; Eff r a
</span><a href="Elara.Error.html#runErrorOrReport"><span class="hs-identifier hs-var">runErrorOrReport</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Elara.Rename.Error.html#RenameError"><span class="hs-identifier hs-type">RenameError</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff
   (Error RenameError : ConsQueryEffects '[Rock Query])
   (Module 'Renamed)
 -&gt; Eff (ConsQueryEffects '[Rock Query]) (Module 'Renamed))
-&gt; Eff
     (Error RenameError : ConsQueryEffects '[Rock Query])
     (Module 'Renamed)
-&gt; Eff (ConsQueryEffects '[Rock Query]) (Module 'Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Query
  (Rock Query : ConsQueryEffects '[Error RenameError])
  (Module 'Renamed)
-&gt; Eff
     (Error RenameError : ConsQueryEffects '[Rock Query])
     (Module 'Renamed)
forall (xs :: [Effect]) (es :: [Effect]) (f :: [Effect] -&gt; * -&gt; *)
       a.
(Subset xs es, Rock f :&gt; es, HasCallStack) =&gt;
f xs a -&gt; Eff es a
</span><a href="Rock.html#fetch"><span class="hs-identifier hs-var">Rock.fetch</span></a></span><span> </span><span class="annot"><span class="annottext">(Query
   (Rock Query : ConsQueryEffects '[Error RenameError])
   (Module 'Renamed)
 -&gt; Eff
      (Error RenameError : ConsQueryEffects '[Rock Query])
      (Module 'Renamed))
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error RenameError])
     (Module 'Renamed)
-&gt; Eff
     (Error RenameError : ConsQueryEffects '[Rock Query])
     (Module 'Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error RenameError])
     (Module 'Renamed)
</span><a href="Elara.Query.html#RenamedModule"><span class="hs-identifier hs-var">Elara.Query.RenamedModule</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680056051"><span class="hs-identifier hs-var">moduleName</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#createOpTable"><span class="hs-identifier hs-type">createOpTable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056052"><span class="hs-identifier hs-type">mod</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span id="local-6989586621680054727"><span class="annot"><a href="Elara.Shunt.html#createOpTable"><span class="hs-identifier hs-type">createOpTable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054727"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpTable"><span class="hs-identifier hs-type">OpTable</span></a></span></span><span>
</span><span id="line-126"></span><span id="createOpTable"><span class="annot"><span class="annottext">createOpTable :: forall (es :: [Effect]). Module 'Renamed -&gt; Eff es OpTable
</span><a href="Elara.Shunt.html#createOpTable"><span class="hs-identifier hs-var hs-var">createOpTable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OpTable -&gt; Eff (State OpTable : es) () -&gt; Eff es OpTable
forall s (es :: [Effect]) a.
HasCallStack =&gt;
s -&gt; Eff (State s : es) a -&gt; Eff es s
</span><span class="hs-identifier hs-var">execState</span></span><span> </span><span class="annot"><span class="annottext">OpTable
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">(Eff (State OpTable : es) () -&gt; Eff es OpTable)
-&gt; (Module 'Renamed -&gt; Eff (State OpTable : es) ())
-&gt; Module 'Renamed
-&gt; Eff es OpTable
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Declaration 'Renamed -&gt; Eff (State OpTable : es) ())
-&gt; Module 'Renamed -&gt; Eff (State OpTable : es) ()
forall a4 (f :: * -&gt; *) s1 {s} {t :: * -&gt; *}.
(ErrorUnlessOnlyOne s1 (Rep s1), Applicative f, Generic s1,
 GWrapped (Rep s1) (Rep s1) (Located s) (Located s),
 UnifyHead s1 s1, Foldable t, HasField' &quot;declarations&quot; s (t a4)) =&gt;
(a4 -&gt; f ()) -&gt; s1 -&gt; f ()
</span><a href="Elara.AST.Module.html#traverseModule_"><span class="hs-identifier hs-var">traverseModule_</span></a></span><span> </span><span class="annot"><span class="annottext">Declaration 'Renamed -&gt; Eff (State OpTable : es) ()
forall (r :: [Effect]) {c :: VarRefKind} {n} {c :: VarRefKind} {n}.
(VarRefImpl c (Qualified n) ~ IgnoreLocation (Qualified Name),
 VarRefImpl c (Qualified n) ~ IgnoreLocation (Qualified Name),
 State (Map (VarRef' c n) OpInfo) :&gt; r,
 State (Map (VarRef' c n) OpInfo) :&gt; r,
 Ord (VarRefImpl c (Unique n)), Ord (VarRefImpl c (Unique n))) =&gt;
Declaration 'Renamed -&gt; Eff r ()
</span><a href="Elara.Shunt.html#addDeclsToOpTable%27"><span class="hs-identifier hs-var">addDeclsToOpTable'</span></a></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span id="local-6989586621680056105"><span class="annot"><a href="Elara.Shunt.html#addDeclsToOpTable%27"><span class="hs-identifier hs-type">addDeclsToOpTable'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-type">Declaration</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680056105"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-129"></span><span id="addDeclsToOpTable%27"><span class="annot"><span class="annottext">addDeclsToOpTable' :: Declaration 'Renamed -&gt; Eff r ()
</span><a href="Elara.Shunt.html#addDeclsToOpTable%27"><span class="hs-identifier hs-var hs-var">addDeclsToOpTable'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-type">Declaration</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680056195"><span class="annot"><span class="annottext">Declaration' 'Renamed
</span><a href="#local-6989586621680056195"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Declaration' 'Renamed
</span><a href="#local-6989586621680056195"><span class="hs-identifier hs-var">decl</span></a></span><span> </span><span class="annot"><span class="annottext">Declaration' 'Renamed
-&gt; Optic'
     A_Lens '[] (Declaration' 'Renamed) (DeclarationBody' 'Renamed)
-&gt; DeclarationBody' 'Renamed
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">forall (field :: Symbol) s a. HasField' field s a =&gt; Lens s s a a
</span><span class="hs-identifier hs-var">field'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;body&quot;</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Declaration' 'Renamed)
  (Declaration' 'Renamed)
  (DeclarationBody 'Renamed)
  (DeclarationBody 'Renamed)
-&gt; Optic
     An_Iso
     '[]
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
     (Located (DeclarationBody' 'Renamed))
     (Located (DeclarationBody' 'Renamed))
-&gt; Optic
     A_Lens
     '[]
     (Declaration' 'Renamed)
     (Declaration' 'Renamed)
     (Located (DeclarationBody' 'Renamed))
     (Located (DeclarationBody' 'Renamed))
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  An_Iso
  '[]
  (DeclarationBody 'Renamed)
  (DeclarationBody 'Renamed)
  (Located (DeclarationBody' 'Renamed))
  (Located (DeclarationBody' 'Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Declaration' 'Renamed)
  (Declaration' 'Renamed)
  (Located (DeclarationBody' 'Renamed))
  (Located (DeclarationBody' 'Renamed))
-&gt; Optic
     A_Lens
     '[]
     (Located (DeclarationBody' 'Renamed))
     (Located (DeclarationBody' 'Renamed))
     (DeclarationBody' 'Renamed)
     (DeclarationBody' 'Renamed)
-&gt; Optic'
     A_Lens '[] (Declaration' 'Renamed) (DeclarationBody' 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (DeclarationBody' 'Renamed))
  (Located (DeclarationBody' 'Renamed))
  (DeclarationBody' 'Renamed)
  (DeclarationBody' 'Renamed)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span class="hs-special">{</span><span id="local-6989586621680056197"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;ValueName&quot; 'Renamed)
_valueName :: ASTLocate 'Renamed (Select &quot;ValueName&quot; 'Renamed)
_valueName :: forall a (ast :: a).
DeclarationBody' ast -&gt; ASTLocate ast (Select &quot;ValueName&quot; ast)
</span><a href="#local-6989586621680056197"><span class="hs-identifier hs-var hs-var">_valueName</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_valueAnnotations :: forall a (ast :: a).
DeclarationBody' ast -&gt; ValueDeclAnnotations ast
</span><a href="Elara.AST.Generic.Types.html#_valueAnnotations"><span class="hs-identifier hs-var">_valueAnnotations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#ValueDeclAnnotations"><span class="hs-identifier hs-type">ValueDeclAnnotations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680056201"><span class="annot"><span class="annottext">InfixDeclaration 'Renamed
</span><a href="#local-6989586621680056201"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-131"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680056202"><span class="annot"><span class="annottext">nameRef :: VarRef' c n
</span><a href="#local-6989586621680056202"><span class="hs-identifier hs-var hs-var">nameRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VarRefImpl c (Qualified n) -&gt; VarRef' c n
forall (c :: VarRefKind) n.
VarRefImpl c (Qualified n) -&gt; VarRef' c n
</span><a href="Elara.AST.VarRef.html#Global"><span class="hs-identifier hs-var">Global</span></a></span><span> </span><span class="annot"><span class="annottext">(VarRefImpl c (Qualified n) -&gt; VarRef' c n)
-&gt; VarRefImpl c (Qualified n) -&gt; VarRef' c n
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Located (Qualified Name) -&gt; IgnoreLocation (Qualified Name)
forall a. Located a -&gt; IgnoreLocation a
</span><a href="Elara.AST.Region.html#IgnoreLocation"><span class="hs-identifier hs-var">IgnoreLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarName -&gt; Name
</span><a href="Elara.AST.Name.html#NVarName"><span class="hs-identifier hs-var">NVarName</span></a></span><span> </span><span class="annot"><span class="annottext">(VarName -&gt; Name)
-&gt; Located (Qualified VarName) -&gt; Located (Qualified Name)
forall (f :: * -&gt; *) (g :: * -&gt; *) a b.
(Functor f, Functor g) =&gt;
(a -&gt; b) -&gt; f (g a) -&gt; f (g b)
</span><span class="hs-operator hs-var">&lt;&lt;$&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Located (Qualified VarName)
ASTLocate 'Renamed (Select &quot;ValueName&quot; 'Renamed)
</span><a href="#local-6989586621680056197"><span class="hs-identifier hs-var">_valueName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(Map (VarRef' c n) OpInfo -&gt; Map (VarRef' c n) OpInfo) -&gt; Eff r ()
forall s (es :: [Effect]).
(HasCallStack, State s :&gt; es) =&gt;
(s -&gt; s) -&gt; Eff es ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((Map (VarRef' c n) OpInfo -&gt; Map (VarRef' c n) OpInfo)
 -&gt; Eff r ())
-&gt; (Map (VarRef' c n) OpInfo -&gt; Map (VarRef' c n) OpInfo)
-&gt; Eff r ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VarRef' c n
-&gt; OpInfo -&gt; Map (VarRef' c n) OpInfo -&gt; Map (VarRef' c n) OpInfo
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">VarRef' c n
</span><a href="#local-6989586621680056202"><span class="hs-identifier hs-var">nameRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InfixDeclaration 'Renamed -&gt; OpInfo
</span><a href="Elara.Shunt.html#infixDeclToOpInfo"><span class="hs-identifier hs-var">infixDeclToOpInfo</span></a></span><span> </span><span class="annot"><span class="annottext">InfixDeclaration 'Renamed
</span><a href="#local-6989586621680056201"><span class="hs-identifier hs-var">fixity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>    </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span class="hs-special">{</span><span id="local-6989586621680056206"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;ValueName&quot; 'Renamed)
_valueName :: forall a (ast :: a).
DeclarationBody' ast -&gt; ASTLocate ast (Select &quot;ValueName&quot; ast)
_valueName :: ASTLocate 'Renamed (Select &quot;ValueName&quot; 'Renamed)
</span><a href="Elara.AST.Generic.Types.html#_valueName"><span class="hs-identifier hs-var hs-var">_valueName</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_valueAnnotations :: forall a (ast :: a).
DeclarationBody' ast -&gt; ValueDeclAnnotations ast
</span><a href="Elara.AST.Generic.Types.html#_valueAnnotations"><span class="hs-identifier hs-var">_valueAnnotations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#ValueDeclAnnotations"><span class="hs-identifier hs-type">ValueDeclAnnotations</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (InfixDeclaration 'Renamed)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-134"></span><span>        </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; Eff r ()
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m ()
</span><a href="Print.html#debugPretty"><span class="hs-identifier hs-var">debugPretty</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; Eff r ()) -&gt; Doc AnsiStyle -&gt; Eff r ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;No fixity for value declaration: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; Doc AnsiStyle -&gt; Doc AnsiStyle
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Located (Qualified VarName) -&gt; Doc AnsiStyle
forall a. Pretty a =&gt; a -&gt; Doc AnsiStyle
</span><a href="Elara.Data.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Located (Qualified VarName)
ASTLocate 'Renamed (Select &quot;ValueName&quot; 'Renamed)
</span><a href="#local-6989586621680056206"><span class="hs-identifier hs-var">_valueName</span></a></span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeDeclaration"><span class="hs-identifier hs-type">TypeDeclaration</span></a></span><span> </span><span id="local-6989586621680056209"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;TypeName&quot; 'Renamed)
</span><a href="#local-6989586621680056209"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">[ASTLocate 'Renamed (Select &quot;TypeVar&quot; 'Renamed)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Renamed (TypeDeclaration 'Renamed)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeDeclAnnotations"><span class="hs-identifier hs-type">TypeDeclAnnotations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680056211"><span class="annot"><span class="annottext">InfixDeclaration 'Renamed
</span><a href="#local-6989586621680056211"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NoFieldValue
Select &quot;KindAnnotation&quot; 'Renamed
</span><a href="Elara.AST.Generic.Common.html#NoFieldValue"><span class="hs-identifier hs-var">NoFieldValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-136"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680056213"><span class="annot"><span class="annottext">nameRef :: VarRef' c n
</span><a href="#local-6989586621680056213"><span class="hs-identifier hs-var hs-var">nameRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VarRefImpl c (Qualified n) -&gt; VarRef' c n
forall (c :: VarRefKind) n.
VarRefImpl c (Qualified n) -&gt; VarRef' c n
</span><a href="Elara.AST.VarRef.html#Global"><span class="hs-identifier hs-var">Global</span></a></span><span> </span><span class="annot"><span class="annottext">(VarRefImpl c (Qualified n) -&gt; VarRef' c n)
-&gt; VarRefImpl c (Qualified n) -&gt; VarRef' c n
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Located (Qualified Name) -&gt; IgnoreLocation (Qualified Name)
forall a. Located a -&gt; IgnoreLocation a
</span><a href="Elara.AST.Region.html#IgnoreLocation"><span class="hs-identifier hs-var">IgnoreLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeName -&gt; Name
</span><a href="Elara.AST.Name.html#NTypeName"><span class="hs-identifier hs-var">NTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeName -&gt; Name)
-&gt; Located (Qualified TypeName) -&gt; Located (Qualified Name)
forall (f :: * -&gt; *) (g :: * -&gt; *) a b.
(Functor f, Functor g) =&gt;
(a -&gt; b) -&gt; f (g a) -&gt; f (g b)
</span><span class="hs-operator hs-var">&lt;&lt;$&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Located (Qualified TypeName)
ASTLocate 'Renamed (Select &quot;TypeName&quot; 'Renamed)
</span><a href="#local-6989586621680056209"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(Map (VarRef' c n) OpInfo -&gt; Map (VarRef' c n) OpInfo) -&gt; Eff r ()
forall s (es :: [Effect]).
(HasCallStack, State s :&gt; es) =&gt;
(s -&gt; s) -&gt; Eff es ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((Map (VarRef' c n) OpInfo -&gt; Map (VarRef' c n) OpInfo)
 -&gt; Eff r ())
-&gt; (Map (VarRef' c n) OpInfo -&gt; Map (VarRef' c n) OpInfo)
-&gt; Eff r ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VarRef' c n
-&gt; OpInfo -&gt; Map (VarRef' c n) OpInfo -&gt; Map (VarRef' c n) OpInfo
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">VarRef' c n
</span><a href="#local-6989586621680056213"><span class="hs-identifier hs-var">nameRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InfixDeclaration 'Renamed -&gt; OpInfo
</span><a href="Elara.Shunt.html#infixDeclToOpInfo"><span class="hs-identifier hs-var">infixDeclToOpInfo</span></a></span><span> </span><span class="annot"><span class="annottext">InfixDeclaration 'Renamed
</span><a href="#local-6989586621680056211"><span class="hs-identifier hs-var">fixity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><span class="annottext">DeclarationBody' 'Renamed
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Eff r ()
forall (f :: * -&gt; *). Applicative f =&gt; f ()
</span><span class="hs-identifier hs-var">pass</span></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">-- Convert operator to its qualified name for lookup</span><span>
</span><span id="line-141"></span><span class="annot"><a href="Elara.Shunt.html#opNameOf"><span class="hs-identifier hs-type">opNameOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedBinaryOperator"><span class="hs-identifier hs-type">RenamedBinaryOperator</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.VarRef.html#IgnoreLocVarRef"><span class="hs-identifier hs-type">IgnoreLocVarRef</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-142"></span><span id="opNameOf"><span class="annot"><span class="annottext">opNameOf :: RenamedBinaryOperator -&gt; IgnoreLocVarRef Name
</span><a href="Elara.Shunt.html#opNameOf"><span class="hs-identifier hs-var hs-var">opNameOf</span></a></span></span><span> </span><span id="local-6989586621680056246"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056246"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056246"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
-&gt; Optic'
     A_Lens '[] RenamedBinaryOperator (BinaryOperator' 'Renamed)
-&gt; BinaryOperator' 'Renamed
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedBinaryOperator
  RenamedBinaryOperator
  (Located (BinaryOperator' 'Renamed))
  (Located (BinaryOperator' 'Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedBinaryOperator
  RenamedBinaryOperator
  (Located (BinaryOperator' 'Renamed))
  (Located (BinaryOperator' 'Renamed))
-&gt; Optic
     A_Lens
     '[]
     (Located (BinaryOperator' 'Renamed))
     (Located (BinaryOperator' 'Renamed))
     (BinaryOperator' 'Renamed)
     (BinaryOperator' 'Renamed)
-&gt; Optic'
     A_Lens '[] RenamedBinaryOperator (BinaryOperator' 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (BinaryOperator' 'Renamed))
  (Located (BinaryOperator' 'Renamed))
  (BinaryOperator' 'Renamed)
  (BinaryOperator' 'Renamed)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-144"></span><span>        </span><span class="annot"><a href="Elara.AST.Generic.Types.html#SymOp"><span class="hs-identifier hs-type">SymOp</span></a></span><span> </span><span id="local-6989586621680056248"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;SymOp&quot; 'Renamed)
</span><a href="#local-6989586621680056248"><span class="hs-identifier hs-var">opName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VarRef Name -&gt; IgnoreLocVarRef Name
forall n. VarRef n -&gt; IgnoreLocVarRef n
</span><a href="Elara.AST.VarRef.html#ignoreLocation"><span class="hs-identifier hs-var">ignoreLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarName -&gt; Name
</span><a href="Elara.AST.Name.html#NVarName"><span class="hs-identifier hs-var">NVarName</span></a></span><span> </span><span class="annot"><span class="annottext">(VarName -&gt; Name) -&gt; (OpName -&gt; VarName) -&gt; OpName -&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">OpName -&gt; VarName
</span><a href="Elara.AST.Name.html#OperatorVarName"><span class="hs-identifier hs-var">OperatorVarName</span></a></span><span> </span><span class="annot"><span class="annottext">(OpName -&gt; Name) -&gt; VarRef OpName -&gt; VarRef Name
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Located (VarRef OpName)
ASTLocate 'Renamed (Select &quot;SymOp&quot; 'Renamed)
</span><a href="#local-6989586621680056248"><span class="hs-identifier hs-var">opName</span></a></span><span> </span><span class="annot"><span class="annottext">Located (VarRef OpName)
-&gt; Optic' A_Lens '[] (Located (VarRef OpName)) (VarRef OpName)
-&gt; VarRef OpName
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens '[] (Located (VarRef OpName)) (VarRef OpName)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>        </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Infixed"><span class="hs-identifier hs-type">Infixed</span></a></span><span> </span><span id="local-6989586621680056253"><span class="annot"><span class="annottext">Select &quot;Infixed&quot; 'Renamed
</span><a href="#local-6989586621680056253"><span class="hs-identifier hs-var">vn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VarRef Name -&gt; IgnoreLocVarRef Name
forall n. VarRef n -&gt; IgnoreLocVarRef n
</span><a href="Elara.AST.VarRef.html#ignoreLocation"><span class="hs-identifier hs-var">ignoreLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarOrConName -&gt; Name
</span><a href="#local-6989586621680056254"><span class="hs-identifier hs-var">toName</span></a></span><span> </span><span class="annot"><span class="annottext">(VarOrConName -&gt; Name) -&gt; VarRef VarOrConName -&gt; VarRef Name
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VarRef VarOrConName
Select &quot;Infixed&quot; 'Renamed
</span><a href="#local-6989586621680056253"><span class="hs-identifier hs-var">vn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-147"></span><span>            </span><span id="local-6989586621680056254"><span class="annot"><span class="annottext">toName :: VarOrConName -&gt; Name
</span><a href="#local-6989586621680056254"><span class="hs-identifier hs-var hs-var">toName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span id="local-6989586621680056256"><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680056256"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VarName -&gt; Name
</span><a href="Elara.AST.Name.html#NVarName"><span class="hs-identifier hs-var">NVarName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LowerAlphaName -&gt; VarName
</span><a href="Elara.AST.Name.html#NormalVarName"><span class="hs-identifier hs-var">NormalVarName</span></a></span><span> </span><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680056256"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>            </span><span class="annot"><a href="#local-6989586621680056254"><span class="hs-identifier hs-var">toName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#ConName"><span class="hs-identifier hs-type">ConName</span></a></span><span> </span><span id="local-6989586621680056259"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621680056259"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; Name
</span><a href="Elara.AST.Name.html#NTypeName"><span class="hs-identifier hs-var">NTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621680056259"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-comment">{-
 | Fix the operators in an expression to the correct precedence
 | For example given ((+) = 1l) and ((*) = 2r)
 | 1 + 2 * 3 * 4 + 5 + 6 should be parsed as (((1 + (2 * 3)) * 4) + 5) + 6
 | https://stackoverflow.com/a/67992584/6272977 This answer was a huge help in designing this
-}</span><span>
</span><span id="line-156"></span><span class="annot"><a href="Elara.Shunt.html#fixOperators"><span class="hs-identifier hs-type">fixOperators</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680054781"><span class="annot"><a href="#local-6989586621680054781"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054781"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="">?lookup</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054781"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054781"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span>
</span><span id="line-157"></span><span id="fixOperators"><span class="annot"><span class="annottext">fixOperators :: forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="Elara.Shunt.html#fixOperators"><span class="hs-identifier hs-var hs-var">fixOperators</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="#local-6989586621680056323"><span class="hs-identifier hs-var">reassoc</span></a></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><a href="#local-6989586621680056324"><span class="hs-identifier hs-type">withLocationOf'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr%27"><span class="hs-identifier hs-type">RenamedExpr'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span>
</span><span id="line-160"></span><span>    </span><span id="local-6989586621680056324"><span class="annot"><span class="annottext">withLocationOf' :: RenamedExpr -&gt; RenamedExpr' -&gt; RenamedExpr
</span><a href="#local-6989586621680056324"><span class="hs-identifier hs-var hs-var">withLocationOf'</span></a></span></span><span> </span><span id="local-6989586621680056325"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056325"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680056326"><span class="annot"><span class="annottext">RenamedExpr'
</span><a href="#local-6989586621680056326"><span class="hs-identifier hs-var">repl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  RenamedExpr
  RenamedExpr
  (Located RenamedExpr')
  (Located RenamedExpr')
-&gt; (Located RenamedExpr' -&gt; Located RenamedExpr')
-&gt; RenamedExpr
-&gt; RenamedExpr
forall k (is :: IxList) s t a b.
Is k A_Setter =&gt;
Optic k is s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Iso
  RenamedExpr
  RenamedExpr
  (Located RenamedExpr', Maybe RenamedType)
  (Located RenamedExpr', Maybe RenamedType)
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedExpr
  RenamedExpr
  (Located RenamedExpr', Maybe RenamedType)
  (Located RenamedExpr', Maybe RenamedType)
-&gt; Optic
     A_Lens
     '[]
     (Located RenamedExpr', Maybe RenamedType)
     (Located RenamedExpr', Maybe RenamedType)
     (Located RenamedExpr')
     (Located RenamedExpr')
-&gt; Optic
     A_Lens
     '[]
     RenamedExpr
     RenamedExpr
     (Located RenamedExpr')
     (Located RenamedExpr')
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located RenamedExpr', Maybe RenamedType)
  (Located RenamedExpr', Maybe RenamedType)
  (Located RenamedExpr')
  (Located RenamedExpr')
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedExpr'
</span><a href="#local-6989586621680056326"><span class="hs-identifier hs-var">repl</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr' -&gt; Located RenamedExpr' -&gt; Located RenamedExpr'
forall a b. a -&gt; Located b -&gt; Located a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056325"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><a href="#local-6989586621680056323"><span class="hs-identifier hs-type">reassoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054781"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span id="local-6989586621680056323"><span class="annot"><span class="annottext">reassoc :: RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="#local-6989586621680056323"><span class="hs-identifier hs-var hs-var">reassoc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span id="local-6989586621680056330"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056330"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#InParens"><span class="hs-identifier hs-type">InParens</span></a></span><span> </span><span id="local-6989586621680056332"><span class="annot"><span class="annottext">Select &quot;InParens&quot; 'Renamed
</span><a href="#local-6989586621680056332"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680056333"><span class="annot"><span class="annottext">Select &quot;ExprType&quot; 'Renamed
</span><a href="#local-6989586621680056333"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-164"></span><span>        </span><span id="local-6989586621680056334"><span class="annot"><a href="#local-6989586621680056334"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="#local-6989586621680056323"><span class="hs-identifier hs-var">reassoc</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
Select &quot;InParens&quot; 'Renamed
</span><a href="#local-6989586621680056332"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-165"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056330"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#InParens"><span class="hs-identifier hs-type">InParens</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056334"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680056333"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><a href="#local-6989586621680056323"><span class="hs-identifier hs-var">reassoc</span></a></span><span> </span><span id="local-6989586621680056335"><span class="annot"><span class="annottext">e :: RenamedExpr
</span><a href="#local-6989586621680056335"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.html#InExpr%27"><span class="hs-identifier hs-type">InExpr'</span></a></span><span> </span><span id="local-6989586621680056336"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056336"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-type">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680056338"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056338"><span class="hs-identifier hs-var">operator</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680056339"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056339"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680056340"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056340"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-167"></span><span>        </span><span id="local-6989586621680056341"><span class="annot"><a href="#local-6989586621680056341"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r RenamedExpr
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="Elara.Shunt.html#fixOperators"><span class="hs-identifier hs-var">fixOperators</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056339"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-168"></span><span>        </span><span id="local-6989586621680056342"><span class="annot"><a href="#local-6989586621680056342"><span class="hs-identifier hs-var">r'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.Shunt.html#fixOperators"><span class="hs-identifier hs-type">fixOperators</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056340"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-169"></span><span>        </span><span class="annot"><a href="#local-6989586621680056324"><span class="hs-identifier hs-type">withLocationOf'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056335"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680056343"><span class="hs-identifier hs-type">reassoc'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056336"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056338"><span class="hs-identifier hs-type">operator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056341"><span class="hs-identifier hs-type">l'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056342"><span class="hs-identifier hs-type">r'</span></a></span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><a href="#local-6989586621680056323"><span class="hs-identifier hs-var">reassoc</span></a></span><span> </span><span id="local-6989586621680056344"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056344"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r RenamedExpr
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056344"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><a href="#local-6989586621680056343"><span class="hs-identifier hs-type">reassoc'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#SourceRegion"><span class="hs-identifier hs-type">SourceRegion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedBinaryOperator"><span class="hs-identifier hs-type">RenamedBinaryOperator</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054781"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr%27"><span class="hs-identifier hs-type">RenamedExpr'</span></a></span><span>
</span><span id="line-173"></span><span>    </span><span id="local-6989586621680056343"><span class="annot"><span class="annottext">reassoc' :: SourceRegion
-&gt; RenamedBinaryOperator
-&gt; RenamedExpr
-&gt; RenamedExpr
-&gt; Eff r RenamedExpr'
</span><a href="#local-6989586621680056343"><span class="hs-identifier hs-var hs-var">reassoc'</span></a></span></span><span> </span><span id="local-6989586621680056345"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056345"><span class="hs-identifier hs-var">sr</span></a></span></span><span> </span><span id="local-6989586621680056346"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056346"><span class="hs-identifier hs-var">o1</span></a></span></span><span> </span><span id="local-6989586621680056347"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056347"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621680056348"><span class="annot"><span class="annottext">r :: RenamedExpr
</span><a href="#local-6989586621680056348"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.html#InExpr"><span class="hs-identifier hs-type">InExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-type">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680056349"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056349"><span class="hs-identifier hs-var">o2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680056350"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056350"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680056351"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056351"><span class="hs-identifier hs-var">e3</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-174"></span><span>        </span><span id="local-6989586621680056352"><span class="annot"><a href="#local-6989586621680056352"><span class="hs-identifier hs-var">info1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator -&gt; Eff r OpInfo
</span><a href="#local-6989586621680056353"><span class="hs-identifier hs-var">getInfoOrWarn</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056346"><span class="hs-identifier hs-var">o1</span></a></span><span>
</span><span id="line-175"></span><span>        </span><span id="local-6989586621680056354"><span class="annot"><a href="#local-6989586621680056354"><span class="hs-identifier hs-var">info2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621680056353"><span class="hs-identifier hs-type">getInfoOrWarn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056349"><span class="hs-identifier hs-type">o2</span></a></span><span>
</span><span id="line-176"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="hs-identifier hs-type">compare</span></span><span> </span><span class="annot"><span class="hs-identifier">info1</span></span><span class="hs-operator">.</span><span class="hs-identifier">precedence</span><span> </span><span class="annot"><span class="hs-identifier">info2</span></span><span class="hs-operator">.</span><span class="hs-identifier">precedence</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-177"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Eff r RenamedExpr'
</span><a href="#local-6989586621680056356"><span class="hs-identifier hs-var">assocLeft</span></a></span><span>
</span><span id="line-178"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Eff r RenamedExpr'
</span><a href="#local-6989586621680056357"><span class="hs-identifier hs-var">assocRight</span></a></span><span>
</span><span id="line-179"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680056352"><span class="hs-identifier hs-var">info1</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">associativity</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680056354"><span class="hs-identifier hs-var">info2</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">associativity</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-180"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#LeftAssociative"><span class="hs-identifier hs-var">LeftAssociative</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#LeftAssociative"><span class="hs-identifier hs-var">LeftAssociative</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Eff r RenamedExpr'
</span><a href="#local-6989586621680056356"><span class="hs-identifier hs-var">assocLeft</span></a></span><span>
</span><span id="line-181"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#RightAssociative"><span class="hs-identifier hs-var">RightAssociative</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#RightAssociative"><span class="hs-identifier hs-var">RightAssociative</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Eff r RenamedExpr'
</span><a href="#local-6989586621680056357"><span class="hs-identifier hs-var">assocRight</span></a></span><span>
</span><span id="line-182"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Associativity
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ShuntError -&gt; Eff r RenamedExpr'
forall e (es :: [Effect]) a.
(HasCallStack, Error e :&gt; es, Show e) =&gt;
e -&gt; Eff es a
</span><span class="hs-identifier hs-var">Eff.throwError</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RenamedBinaryOperator, OpInfo)
-&gt; (RenamedBinaryOperator, OpInfo) -&gt; ShuntError
</span><a href="Elara.Shunt.Error.html#SamePrecedenceError"><span class="hs-identifier hs-var">SamePrecedenceError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056346"><span class="hs-identifier hs-var">o1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680056352"><span class="hs-identifier hs-var">info1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056349"><span class="hs-identifier hs-var">o2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680056354"><span class="hs-identifier hs-var">info2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-184"></span><span>        </span><span id="local-6989586621680056356"><span class="annot"><span class="annottext">assocLeft :: Eff r RenamedExpr'
</span><a href="#local-6989586621680056356"><span class="hs-identifier hs-var hs-var">assocLeft</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-185"></span><span>            </span><span id="local-6989586621680056362"><span class="annot"><a href="#local-6989586621680056362"><span class="hs-identifier hs-var">reassociated'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceRegion
-&gt; RenamedBinaryOperator
-&gt; RenamedExpr
-&gt; RenamedExpr
-&gt; Eff r RenamedExpr'
</span><a href="#local-6989586621680056343"><span class="hs-identifier hs-var">reassoc'</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056345"><span class="hs-identifier hs-var">sr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056346"><span class="hs-identifier hs-var">o1</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056347"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056350"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-186"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680056363"><span class="annot"><a href="#local-6989586621680056363"><span class="hs-identifier hs-var hs-var">reassociated</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ASTLocate 'Renamed RenamedExpr', Select &quot;ExprType&quot; 'Renamed)
-&gt; RenamedExpr
forall a (ast :: a).
(ASTLocate ast (Expr' ast), Select &quot;ExprType&quot; ast) -&gt; Expr ast
</span><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion -&gt; RenamedExpr' -&gt; Located RenamedExpr'
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056345"><span class="hs-identifier hs-var">sr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr'
</span><a href="#local-6989586621680056362"><span class="hs-identifier hs-var">reassociated'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe RenamedType
Select &quot;ExprType&quot; 'Renamed
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-type">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680056349"><span class="hs-identifier hs-type">o2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680056363"><span class="hs-identifier hs-type">reassociated</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680056351"><span class="hs-identifier hs-type">e3</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span>        </span><span id="local-6989586621680056357"><span class="annot"><span class="annottext">assocRight :: Eff r RenamedExpr'
</span><a href="#local-6989586621680056357"><span class="hs-identifier hs-var hs-var">assocRight</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RenamedExpr' -&gt; Eff r RenamedExpr'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Select &quot;BinaryOperator&quot; 'Renamed -&gt; RenamedExpr'
forall a (ast :: a). Select &quot;BinaryOperator&quot; ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-var">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056346"><span class="hs-identifier hs-var">o1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056347"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056348"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span>        </span><span class="annot"><a href="#local-6989586621680056353"><span class="hs-identifier hs-type">getInfoOrWarn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedBinaryOperator"><span class="hs-identifier hs-type">RenamedBinaryOperator</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054781"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-type">OpInfo</span></a></span><span>
</span><span id="line-192"></span><span>        </span><span id="local-6989586621680056353"><span class="annot"><span class="annottext">getInfoOrWarn :: RenamedBinaryOperator -&gt; Eff r OpInfo
</span><a href="#local-6989586621680056353"><span class="hs-identifier hs-var hs-var">getInfoOrWarn</span></a></span></span><span> </span><span id="local-6989586621680056364"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056364"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-193"></span><span>            </span><span id="local-6989586621680056365"><span class="annot"><a href="#local-6989586621680056365"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">?lookup::OpLookup r
OpLookup r
</span><a href="#local-6989586621680056264"><span class="hs-var">?lookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator -&gt; IgnoreLocVarRef Name
</span><a href="Elara.Shunt.html#opNameOf"><span class="hs-identifier hs-var">opNameOf</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056364"><span class="hs-identifier hs-var">operator</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621680056365"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-195"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680056366"><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680056366"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OpInfo -&gt; Eff r OpInfo
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680056366"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-196"></span><span>                </span><span class="annot"><span class="annottext">Maybe OpInfo
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-197"></span><span>                    </span><span class="hs-comment">-- use default precedence 9 left associative</span><span>
</span><span id="line-198"></span><span>                    </span><span class="annot"><span class="annottext">OpInfo -&gt; Eff r OpInfo
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Precedence -&gt; Associativity -&gt; OpInfo
</span><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-var">OpInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Precedence
</span><a href="Elara.Shunt.Operator.html#mkPrecedence"><span class="hs-identifier hs-var">mkPrecedence</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#LeftAssociative"><span class="hs-identifier hs-var">LeftAssociative</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>    </span><span class="annot"><a href="#local-6989586621680056343"><span class="hs-identifier hs-var">reassoc'</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680056369"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056369"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span id="local-6989586621680056370"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056370"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621680056371"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056371"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RenamedExpr' -&gt; Eff r RenamedExpr'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Select &quot;BinaryOperator&quot; 'Renamed -&gt; RenamedExpr'
forall a (ast :: a). Select &quot;BinaryOperator&quot; ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-var">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056369"><span class="hs-identifier hs-var">operator</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056370"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056371"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="annot"><a href="Elara.Shunt.html#opInfo"><span class="hs-identifier hs-type">opInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedBinaryOperator"><span class="hs-identifier hs-type">RenamedBinaryOperator</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Eff.Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntWarning"><span class="hs-identifier hs-type">ShuntWarning</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Elara.Query.Query</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-type">OpInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span id="opInfo"><span class="annot"><span class="annottext">opInfo :: RenamedBinaryOperator
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Maybe OpInfo)
</span><a href="Elara.Shunt.html#opInfo"><span class="hs-identifier hs-var hs-var">opInfo</span></a></span></span><span> </span><span id="local-6989586621680056441"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056441"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680056442"><span class="annot"><span class="annottext">name :: IgnoreLocVarRef Name
</span><a href="#local-6989586621680056442"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator -&gt; IgnoreLocVarRef Name
</span><a href="Elara.Shunt.html#opNameOf"><span class="hs-identifier hs-var">opNameOf</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056441"><span class="hs-identifier hs-var">operator</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><span class="annottext">Query
  (Rock Query : ConsQueryEffects '[Writer (Set ShuntWarning)])
  (Maybe OpInfo)
-&gt; Eff
     (ConsQueryEffects '[Writer (Set ShuntWarning), Rock Query])
     (Maybe OpInfo)
forall (xs :: [Effect]) (es :: [Effect]) (f :: [Effect] -&gt; * -&gt; *)
       a.
(Subset xs es, Rock f :&gt; es, HasCallStack) =&gt;
f xs a -&gt; Eff es a
</span><a href="Rock.html#fetch"><span class="hs-identifier hs-var">Rock.fetch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IgnoreLocVarRef Name
-&gt; Query
     (Rock Query : ConsQueryEffects '[Writer (Set ShuntWarning)])
     (Maybe OpInfo)
</span><a href="Elara.Query.html#GetOpInfo"><span class="hs-identifier hs-var">Elara.Query.GetOpInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680056442"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="hs-keyword">type</span><span> </span><span id="ShuntPipelineEffects"><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-var">ShuntPipelineEffects</span></a></span></span><span> </span><span id="local-6989586621680056443"><span class="annot"><a href="#local-6989586621680056443"><span class="hs-identifier hs-type">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Elara.Query.Effects.html#QueryEffects"><span class="hs-identifier hs-type">QueryEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056443"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Error</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntError"><span class="hs-identifier hs-type">ShuntError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680056443"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntWarning"><span class="hs-identifier hs-type">ShuntWarning</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680056443"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Elara.Query.Query</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680056443"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="annot"><a href="Elara.Shunt.html#infixDeclToOpInfo"><span class="hs-identifier hs-type">infixDeclToOpInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#InfixDeclaration"><span class="hs-identifier hs-type">InfixDeclaration</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-type">OpInfo</span></a></span><span>
</span><span id="line-214"></span><span id="infixDeclToOpInfo"><span class="annot"><span class="annottext">infixDeclToOpInfo :: InfixDeclaration 'Renamed -&gt; OpInfo
</span><a href="Elara.Shunt.html#infixDeclToOpInfo"><span class="hs-identifier hs-var hs-var">infixDeclToOpInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#InfixDeclaration"><span class="hs-identifier hs-type">InfixDeclaration</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;AnyName&quot; 'Renamed)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680056447"><span class="annot"><span class="annottext">ASTLocate 'Renamed Int
</span><a href="#local-6989586621680056447"><span class="hs-identifier hs-var">prec</span></a></span></span><span> </span><span id="local-6989586621680056448"><span class="annot"><span class="annottext">ASTLocate 'Renamed AssociativityType
</span><a href="#local-6989586621680056448"><span class="hs-identifier hs-var">assoc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Precedence -&gt; Associativity -&gt; OpInfo
</span><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-var">OpInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Precedence
</span><a href="Elara.Shunt.Operator.html#Precedence"><span class="hs-identifier hs-var">Precedence</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Precedence) -&gt; Int -&gt; Precedence
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Located Int
ASTLocate 'Renamed Int
</span><a href="#local-6989586621680056447"><span class="hs-identifier hs-var">prec</span></a></span><span> </span><span class="annot"><span class="annottext">Located Int -&gt; Optic' A_Lens '[] (Located Int) Int -&gt; Int
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens '[] (Located Int) Int
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AssociativityType -&gt; Associativity
</span><a href="#local-6989586621680056450"><span class="hs-identifier hs-var">convAssoc</span></a></span><span> </span><span class="annot"><span class="annottext">(AssociativityType -&gt; Associativity)
-&gt; AssociativityType -&gt; Associativity
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Located AssociativityType
ASTLocate 'Renamed AssociativityType
</span><a href="#local-6989586621680056448"><span class="hs-identifier hs-var">assoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located AssociativityType
-&gt; Optic' A_Lens '[] (Located AssociativityType) AssociativityType
-&gt; AssociativityType
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens '[] (Located AssociativityType) AssociativityType
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-216"></span><span>    </span><span id="local-6989586621680056450"><span class="annot"><span class="annottext">convAssoc :: AssociativityType -&gt; Associativity
</span><a href="#local-6989586621680056450"><span class="hs-identifier hs-var hs-var">convAssoc</span></a></span></span><span> </span><span class="annot"><span class="annottext">AssociativityType
</span><a href="Elara.AST.Generic.Types.html#LeftAssoc"><span class="hs-identifier hs-var">LeftAssoc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#LeftAssociative"><span class="hs-identifier hs-var">LeftAssociative</span></a></span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><a href="#local-6989586621680056450"><span class="hs-identifier hs-var">convAssoc</span></a></span><span> </span><span class="annot"><span class="annottext">AssociativityType
</span><a href="Elara.AST.Generic.Types.html#RightAssoc"><span class="hs-identifier hs-var">RightAssoc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#RightAssociative"><span class="hs-identifier hs-var">RightAssociative</span></a></span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><a href="#local-6989586621680056450"><span class="hs-identifier hs-var">convAssoc</span></a></span><span> </span><span class="annot"><span class="annottext">AssociativityType
</span><a href="Elara.AST.Generic.Types.html#NonAssoc"><span class="hs-identifier hs-var">NonAssoc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#NonAssociative"><span class="hs-identifier hs-var">NonAssociative</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="annot"><a href="Elara.Shunt.html#shuntWith"><span class="hs-identifier hs-type">shuntWith</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680054337"><span class="annot"><a href="#local-6989586621680054337"><span class="hs-identifier hs-type">es</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-222"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054337"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054337"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-224"></span><span>    </span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-225"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054337"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Elara.AST.Select.html#Shunted"><span class="hs-identifier hs-type">Shunted</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span id="shuntWith"><span class="annot"><span class="annottext">shuntWith :: forall (es :: [Effect]).
ShuntPipelineEffects es =&gt;
OpLookup es -&gt; Module 'Renamed -&gt; Eff es (Module 'Shunted)
</span><a href="Elara.Shunt.html#shuntWith"><span class="hs-identifier hs-var hs-var">shuntWith</span></a></span></span><span> </span><span id="local-6989586621680056549"><span class="annot"><span class="annottext">OpLookup es
</span><a href="#local-6989586621680056549"><span class="hs-identifier hs-var">opL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Declaration 'Renamed -&gt; Eff es (Declaration 'Shunted))
-&gt; Module 'Renamed -&gt; Eff es (Module 'Shunted)
forall {a1} {astK} {a2} a4 (f :: * -&gt; *) (ast :: a1) s1 t
       {ast2 :: astK} {ast3 :: a2} {s}.
(CleanupLocated (ASTLocate' ast2 (ASTQual ast2 OpName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast OpName)),
 CleanupLocated (ASTLocate' ast2 (ASTQual ast2 VarName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast VarName)),
 CleanupLocated (ASTLocate' ast2 (ASTQual ast2 TypeName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast TypeName)),
 CleanupLocated (ASTLocate' ast2 (Import' ast))
 ~ CleanupLocated (ASTLocate' ast (Import' ast)),
 CleanupLocated (ASTLocate' ast2 ModuleName)
 ~ CleanupLocated (ASTLocate' ast ModuleName),
 CleanupLocated (ASTLocate' ast3 (ASTQual ast3 VarName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast VarName)),
 CleanupLocated (ASTLocate' ast3 (ASTQual ast3 OpName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast OpName)),
 CleanupLocated (ASTLocate' ast3 (ASTQual ast3 TypeName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast TypeName)),
 ErrorUnlessOnlyOne s1 (Rep s1), Generic s1, Generic t,
 GWrapped (Rep s1) (Rep t) (Located s) (Located (Module' ast)),
 UnifyHead s1 t, UnifyHead t s1, RUnlocate ast2, Monad f,
 HasField' &quot;name&quot; s (CleanupLocated (ASTLocate' ast ModuleName)),
 HasField' &quot;exposing&quot; s (Exposing ast3),
 HasField' &quot;declarations&quot; s [a4],
 HasField' &quot;imports&quot; s [Import ast2]) =&gt;
(a4 -&gt; f (Declaration ast)) -&gt; s1 -&gt; f t
</span><a href="Elara.AST.Module.html#traverseModule"><span class="hs-identifier hs-var">traverseModule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OpLookup es
-&gt; Declaration 'Renamed -&gt; Eff es (Declaration 'Shunted)
forall (es :: [Effect]).
ShuntPipelineEffects es =&gt;
OpLookup es
-&gt; Declaration 'Renamed -&gt; Eff es (Declaration 'Shunted)
</span><a href="Elara.Shunt.html#shuntWithDeclaration"><span class="hs-identifier hs-var">shuntWithDeclaration</span></a></span><span> </span><span class="annot"><span class="annottext">OpLookup es
</span><a href="#local-6989586621680056549"><span class="hs-identifier hs-var">opL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="annot"><a href="Elara.Shunt.html#shuntWithDeclaration"><span class="hs-identifier hs-type">shuntWithDeclaration</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-229"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680054828"><span class="annot"><a href="#local-6989586621680054828"><span class="hs-identifier hs-type">es</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054828"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-231"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054828"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-232"></span><span>    </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedDeclaration"><span class="hs-identifier hs-type">RenamedDeclaration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054828"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedDeclaration"><span class="hs-identifier hs-type">ShuntedDeclaration</span></a></span><span>
</span><span id="line-234"></span><span id="shuntWithDeclaration"><span class="annot"><span class="annottext">shuntWithDeclaration :: forall (es :: [Effect]).
ShuntPipelineEffects es =&gt;
OpLookup es
-&gt; Declaration 'Renamed -&gt; Eff es (Declaration 'Shunted)
</span><a href="Elara.Shunt.html#shuntWithDeclaration"><span class="hs-identifier hs-var hs-var">shuntWithDeclaration</span></a></span></span><span> </span><span id="local-6989586621680056587"><span class="annot"><span class="annottext">OpLookup es
</span><a href="#local-6989586621680056587"><span class="hs-identifier hs-var">opL</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-type">Declaration</span></a></span><span> </span><span id="local-6989586621680056588"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Declaration' 'Renamed)
</span><a href="#local-6989586621680056588"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><span class="annottext">Located (Declaration' 'Shunted) -&gt; Declaration 'Shunted
ASTLocate 'Shunted (Declaration' 'Shunted) -&gt; Declaration 'Shunted
forall {a} (ast :: a).
ASTLocate ast (Declaration' ast) -&gt; Declaration ast
</span><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-var">Declaration</span></a></span><span>
</span><span id="line-236"></span><span>        </span><span class="annot"><span class="annottext">(Located (Declaration' 'Shunted) -&gt; Declaration 'Shunted)
-&gt; Eff es (Located (Declaration' 'Shunted))
-&gt; Eff es (Declaration 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Declaration' 'Renamed))
  (Located (Declaration' 'Shunted))
  (Declaration' 'Renamed)
  (Declaration' 'Shunted)
-&gt; (Declaration' 'Renamed -&gt; Eff es (Declaration' 'Shunted))
-&gt; Located (Declaration' 'Renamed)
-&gt; Eff es (Located (Declaration' 'Shunted))
forall k (f :: * -&gt; *) (is :: IxList) s t a b.
(Is k A_Traversal, Applicative f) =&gt;
Optic k is s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t
</span><span class="hs-identifier hs-var">traverseOf</span></span><span>
</span><span id="line-237"></span><span>            </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Declaration' 'Renamed))
  (Located (Declaration' 'Shunted))
  (Declaration' 'Renamed)
  (Declaration' 'Shunted)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span>
</span><span id="line-238"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680056590"><span class="annot"><span class="annottext">Declaration' 'Renamed
</span><a href="#local-6989586621680056590"><span class="hs-identifier hs-var">decl'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedDeclaration%27"><span class="hs-identifier hs-type">RenamedDeclaration'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-239"></span><span>                </span><span id="local-6989586621680056592"><span class="annot"><a href="#local-6989586621680056592"><span class="hs-identifier hs-var">body'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OpLookup es
-&gt; DeclarationBody 'Renamed -&gt; Eff es ShuntedDeclarationBody
forall (es :: [Effect]).
ShuntPipelineEffects es =&gt;
OpLookup es
-&gt; DeclarationBody 'Renamed -&gt; Eff es ShuntedDeclarationBody
</span><a href="Elara.Shunt.html#shuntDeclarationBody"><span class="hs-identifier hs-var">shuntDeclarationBody</span></a></span><span> </span><span class="annot"><span class="annottext">OpLookup es
</span><a href="#local-6989586621680056587"><span class="hs-identifier hs-var">opL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Declaration' 'Renamed
</span><a href="#local-6989586621680056590"><span class="hs-identifier hs-var">decl'</span></a></span><span> </span><span class="annot"><span class="annottext">Declaration' 'Renamed
-&gt; Optic
     A_Lens
     '[]
     (Declaration' 'Renamed)
     (Declaration' 'Renamed)
     (DeclarationBody 'Renamed)
     (DeclarationBody 'Renamed)
-&gt; DeclarationBody 'Renamed
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">forall (field :: Symbol) s a. HasField' field s a =&gt; Lens s s a a
</span><span class="hs-identifier hs-var">field'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;body&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration%27"><span class="hs-identifier hs-type">Declaration'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680056590"><span class="hs-identifier hs-type">decl'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">^.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">field'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;moduleName&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680056592"><span class="hs-identifier hs-type">body'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>            </span><span class="annot"><span class="annottext">Located (Declaration' 'Renamed)
ASTLocate 'Renamed (Declaration' 'Renamed)
</span><a href="#local-6989586621680056588"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="annot"><a href="Elara.Shunt.html#shuntDeclarationBody"><span class="hs-identifier hs-type">shuntDeclarationBody</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680054840"><span class="annot"><a href="#local-6989586621680054840"><span class="hs-identifier hs-type">es</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054840"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-247"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054840"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedDeclarationBody"><span class="hs-identifier hs-type">RenamedDeclarationBody</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-249"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054840"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedDeclarationBody"><span class="hs-identifier hs-type">ShuntedDeclarationBody</span></a></span><span>
</span><span id="line-250"></span><span id="shuntDeclarationBody"><span class="annot"><span class="annottext">shuntDeclarationBody :: forall (es :: [Effect]).
ShuntPipelineEffects es =&gt;
OpLookup es
-&gt; DeclarationBody 'Renamed -&gt; Eff es ShuntedDeclarationBody
</span><a href="Elara.Shunt.html#shuntDeclarationBody"><span class="hs-identifier hs-var hs-var">shuntDeclarationBody</span></a></span></span><span> </span><span id="local-6989586621680056657"><span class="annot"><span class="annottext">OpLookup es
</span><a href="#local-6989586621680056657"><span class="hs-identifier hs-var">opL</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#DeclarationBody"><span class="hs-identifier hs-type">DeclarationBody</span></a></span><span> </span><span id="local-6989586621680056659"><span class="annot"><span class="annottext">ASTLocate 'Renamed (DeclarationBody' 'Renamed)
</span><a href="#local-6989586621680056659"><span class="hs-identifier hs-var">rdb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Located (DeclarationBody' 'Shunted) -&gt; ShuntedDeclarationBody
ASTLocate 'Shunted (DeclarationBody' 'Shunted)
-&gt; ShuntedDeclarationBody
forall a (ast :: a).
ASTLocate ast (DeclarationBody' ast) -&gt; DeclarationBody ast
</span><a href="Elara.AST.Generic.Types.html#DeclarationBody"><span class="hs-identifier hs-var">DeclarationBody</span></a></span><span> </span><span class="annot"><span class="annottext">(Located (DeclarationBody' 'Shunted) -&gt; ShuntedDeclarationBody)
-&gt; Eff es (Located (DeclarationBody' 'Shunted))
-&gt; Eff es ShuntedDeclarationBody
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (DeclarationBody' 'Renamed))
  (Located (DeclarationBody' 'Shunted))
  (DeclarationBody' 'Renamed)
  (DeclarationBody' 'Shunted)
-&gt; (DeclarationBody' 'Renamed
    -&gt; Eff es (DeclarationBody' 'Shunted))
-&gt; Located (DeclarationBody' 'Renamed)
-&gt; Eff es (Located (DeclarationBody' 'Shunted))
forall k (f :: * -&gt; *) (is :: IxList) s t a b.
(Is k A_Traversal, Applicative f) =&gt;
Optic k is s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (DeclarationBody' 'Renamed))
  (Located (DeclarationBody' 'Shunted))
  (DeclarationBody' 'Renamed)
  (DeclarationBody' 'Shunted)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">DeclarationBody' 'Renamed -&gt; Eff es (DeclarationBody' 'Shunted)
</span><a href="#local-6989586621680056660"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Located (DeclarationBody' 'Renamed)
ASTLocate 'Renamed (DeclarationBody' 'Renamed)
</span><a href="#local-6989586621680056659"><span class="hs-identifier hs-var">rdb</span></a></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-252"></span><span>    </span><span class="annot"><a href="#local-6989586621680056660"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedDeclarationBody%27"><span class="hs-identifier hs-type">RenamedDeclarationBody'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054840"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedDeclarationBody%27"><span class="hs-identifier hs-type">ShuntedDeclarationBody'</span></a></span><span>
</span><span id="line-253"></span><span>    </span><span id="local-6989586621680056660"><span class="annot"><span class="annottext">go :: DeclarationBody' 'Renamed -&gt; Eff es (DeclarationBody' 'Shunted)
</span><a href="#local-6989586621680056660"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span id="local-6989586621680056663"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;ValueName&quot; 'Renamed)
</span><a href="#local-6989586621680056663"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680056664"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056664"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">Select &quot;ValuePatterns&quot; 'Renamed
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680056665"><span class="annot"><span class="annottext">Select &quot;ValueType&quot; 'Renamed
</span><a href="#local-6989586621680056665"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680056666"><span class="annot"><span class="annottext">ValueDeclAnnotations 'Renamed
</span><a href="#local-6989586621680056666"><span class="hs-identifier hs-var">ann</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-254"></span><span>        </span><span id="local-6989586621680056667"><span class="annot"><a href="#local-6989586621680056667"><span class="hs-identifier hs-var">shunted</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="">?lookup</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">?lookup::OpLookup es
OpLookup es
</span><a href="#local-6989586621680056657"><span class="hs-identifier hs-var">opL</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff es (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056664"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-255"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680056672"><span class="annot"><a href="#local-6989586621680056672"><span class="hs-identifier hs-var hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RenamedType -&gt; Type 'Shunted)
-&gt; Maybe RenamedType -&gt; Maybe (Type 'Shunted)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">RenamedType -&gt; Type 'Shunted
forall {a1} {a2} (ast1 :: a1) (ast2 :: a2) {f :: * -&gt; *}.
(Select &quot;TypeKind&quot; ast1 ~ Select &quot;TypeKind&quot; ast2,
 CleanupLocated (ASTLocate' ast2 (Type' ast2)) ~ f (Type' ast2),
 CleanupLocated (ASTLocate' ast1 (Select &quot;TypeVar&quot; ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select &quot;TypeVar&quot; ast2)),
 CleanupLocated (ASTLocate' ast1 (Select &quot;UserDefinedType&quot; ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select &quot;UserDefinedType&quot; ast2)),
 CleanupLocated (ASTLocate' ast1 (Type' ast1)) ~ f (Type' ast1),
 CleanupLocated (ASTLocate' ast1 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast2 LowerAlphaName),
 Functor f) =&gt;
Type ast1 -&gt; Type ast2
</span><a href="Elara.AST.Generic.Types.html#coerceType"><span class="hs-identifier hs-var">coerceType</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RenamedType
Select &quot;ValueType&quot; 'Renamed
</span><a href="#local-6989586621680056665"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-256"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056663"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056667"><span class="hs-identifier hs-type">shunted</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Generic.Common.html#NoFieldValue"><span class="hs-identifier hs-type">NoFieldValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056672"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#coerceValueDeclAnnotations"><span class="hs-identifier hs-type">coerceValueDeclAnnotations</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056666"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>    </span><span class="annot"><a href="#local-6989586621680056660"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeDeclaration"><span class="hs-identifier hs-type">TypeDeclaration</span></a></span><span> </span><span id="local-6989586621680056675"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;TypeName&quot; 'Renamed)
</span><a href="#local-6989586621680056675"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680056676"><span class="annot"><span class="annottext">[ASTLocate 'Renamed (Select &quot;TypeVar&quot; 'Renamed)]
</span><a href="#local-6989586621680056676"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621680056677"><span class="annot"><span class="annottext">ASTLocate 'Renamed (TypeDeclaration 'Renamed)
</span><a href="#local-6989586621680056677"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680056678"><span class="annot"><span class="annottext">TypeDeclAnnotations 'Renamed
</span><a href="#local-6989586621680056678"><span class="hs-identifier hs-var">ann</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-258"></span><span>        </span><span class="annot"><span class="annottext">DeclarationBody' 'Shunted -&gt; Eff es (DeclarationBody' 'Shunted)
forall a. a -&gt; Eff es a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTLocate 'Shunted (Select &quot;TypeName&quot; 'Shunted)
-&gt; [CleanupLocated
      (ASTLocate' 'Shunted (Select &quot;TypeVar&quot; 'Shunted))]
-&gt; ASTLocate 'Shunted (TypeDeclaration 'Shunted)
-&gt; TypeDeclAnnotations 'Shunted
-&gt; DeclarationBody' 'Shunted
forall a (ast :: a).
ASTLocate ast (Select &quot;TypeName&quot; ast)
-&gt; [ASTLocate ast (Select &quot;TypeVar&quot; ast)]
-&gt; ASTLocate ast (TypeDeclaration ast)
-&gt; TypeDeclAnnotations ast
-&gt; DeclarationBody' ast
</span><a href="Elara.AST.Generic.Types.html#TypeDeclaration"><span class="hs-identifier hs-var">TypeDeclaration</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;TypeName&quot; 'Renamed)
ASTLocate 'Shunted (Select &quot;TypeName&quot; 'Shunted)
</span><a href="#local-6989586621680056675"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">[ASTLocate 'Renamed (Select &quot;TypeVar&quot; 'Renamed)]
[CleanupLocated (ASTLocate' 'Shunted (Select &quot;TypeVar&quot; 'Shunted))]
</span><a href="#local-6989586621680056676"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeDeclaration 'Renamed -&gt; TypeDeclaration 'Shunted
forall {a1} {a2} {a3} {a4} {a5} {a6} (ast4 :: a1) (ast5 :: a2)
       {ast6 :: a3} {ast7 :: a4} {ast8 :: a5} {ast9 :: a6} {f1 :: * -&gt; *}
       {f2 :: * -&gt; *}.
(Select &quot;TypeKind&quot; ast6 ~ Select &quot;TypeKind&quot; ast7,
 Select &quot;Alias&quot; ast4 ~ Type ast6,
 Select &quot;ADTParam&quot; ast4 ~ Type ast8,
 Select &quot;TypeKind&quot; ast8 ~ Select &quot;TypeKind&quot; ast9,
 Select &quot;Alias&quot; ast5 ~ Type ast7,
 Select &quot;ADTParam&quot; ast5 ~ Type ast9,
 CleanupLocated (ASTLocate' ast8 (Select &quot;TypeVar&quot; ast8))
 ~ CleanupLocated (ASTLocate' ast9 (Select &quot;TypeVar&quot; ast9)),
 CleanupLocated (ASTLocate' ast8 (Select &quot;UserDefinedType&quot; ast8))
 ~ CleanupLocated (ASTLocate' ast9 (Select &quot;UserDefinedType&quot; ast9)),
 CleanupLocated (ASTLocate' ast8 (Type' ast8)) ~ f1 (Type' ast8),
 CleanupLocated (ASTLocate' ast8 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast9 LowerAlphaName),
 CleanupLocated (ASTLocate' ast9 (Type' ast9)) ~ f1 (Type' ast9),
 CleanupLocated (ASTLocate' ast7 (Type' ast7)) ~ f2 (Type' ast7),
 CleanupLocated (ASTLocate' ast6 (Select &quot;TypeVar&quot; ast6))
 ~ CleanupLocated (ASTLocate' ast7 (Select &quot;TypeVar&quot; ast7)),
 CleanupLocated (ASTLocate' ast6 (Select &quot;UserDefinedType&quot; ast6))
 ~ CleanupLocated (ASTLocate' ast7 (Select &quot;UserDefinedType&quot; ast7)),
 CleanupLocated (ASTLocate' ast6 (Type' ast6)) ~ f2 (Type' ast6),
 CleanupLocated (ASTLocate' ast6 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast7 LowerAlphaName),
 CleanupLocated (ASTLocate' ast4 (Select &quot;ConstructorName&quot; ast4))
 ~ CleanupLocated (ASTLocate' ast5 (Select &quot;ConstructorName&quot; ast5)),
 Functor f2, Functor f1) =&gt;
TypeDeclaration ast4 -&gt; TypeDeclaration ast5
</span><a href="Elara.AST.Generic.Types.html#coerceTypeDeclaration"><span class="hs-identifier hs-var">coerceTypeDeclaration</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeDeclaration 'Renamed -&gt; TypeDeclaration 'Shunted)
-&gt; Located (TypeDeclaration 'Renamed)
-&gt; Located (TypeDeclaration 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Located (TypeDeclaration 'Renamed)
ASTLocate 'Renamed (TypeDeclaration 'Renamed)
</span><a href="#local-6989586621680056677"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeDeclAnnotations 'Renamed -&gt; TypeDeclAnnotations 'Shunted
forall {a1} {a2} (ast1 :: a1) (ast2 :: a2).
(CleanupLocated (ASTLocate' ast1 (Select &quot;AnyName&quot; ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select &quot;AnyName&quot; ast2)),
 CleanupLocated (ASTLocate' ast1 Int)
 ~ CleanupLocated (ASTLocate' ast2 Int),
 CleanupLocated (ASTLocate' ast1 AssociativityType)
 ~ CleanupLocated (ASTLocate' ast2 AssociativityType),
 Select &quot;KindAnnotation&quot; ast1 ~ Select &quot;KindAnnotation&quot; ast2) =&gt;
TypeDeclAnnotations ast1 -&gt; TypeDeclAnnotations ast2
</span><a href="Elara.AST.Generic.Types.html#coerceTypeDeclAnnotations"><span class="hs-identifier hs-var">coerceTypeDeclAnnotations</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDeclAnnotations 'Renamed
</span><a href="#local-6989586621680056678"><span class="hs-identifier hs-var">ann</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span id="local-6989586621680054846"><span class="annot"><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-type">fixExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054846"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="">?lookup</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680054846"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054846"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedExpr"><span class="hs-identifier hs-type">ShuntedExpr</span></a></span></span><span>
</span><span id="line-261"></span><span id="fixExpr"><span class="annot"><span class="annottext">fixExpr :: forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var hs-var">fixExpr</span></a></span></span><span> </span><span id="local-6989586621680056689"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056689"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-262"></span><span>    </span><span id="local-6989586621680056690"><span class="annot"><a href="#local-6989586621680056690"><span class="hs-identifier hs-var">fixed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r RenamedExpr
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="Elara.Shunt.html#fixOperators"><span class="hs-identifier hs-var">fixOperators</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056689"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#shuntExpr"><span class="hs-identifier hs-type">shuntExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056690"><span class="hs-identifier hs-type">fixed</span></a></span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="annot"><a href="Elara.Shunt.html#shuntExpr"><span class="hs-identifier hs-type">shuntExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680056692"><span class="annot"><a href="#local-6989586621680056692"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056692"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="">?lookup</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056692"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-268"></span><span>    </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-269"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680056692"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedExpr"><span class="hs-identifier hs-type">ShuntedExpr</span></a></span><span>
</span><span id="line-270"></span><span id="shuntExpr"><span class="annot"><span class="annottext">shuntExpr :: forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#shuntExpr"><span class="hs-identifier hs-var hs-var">shuntExpr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680056897"><span class="annot"><span class="annottext">ASTLocate 'Renamed RenamedExpr'
</span><a href="#local-6989586621680056897"><span class="hs-identifier hs-var">le</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680056898"><span class="annot"><span class="annottext">Select &quot;ExprType&quot; 'Renamed
</span><a href="#local-6989586621680056898"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680056899"><span class="annot"><span class="annottext">Located (Expr' 'Shunted)
</span><a href="#local-6989586621680056899"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ASTLocate 'Shunted (Expr' 'Shunted), Select &quot;ExprType&quot; 'Shunted)
-&gt; Expr 'Shunted
forall a (ast :: a).
(ASTLocate ast (Expr' ast), Select &quot;ExprType&quot; ast) -&gt; Expr ast
</span><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located (Expr' 'Shunted)
ASTLocate 'Shunted (Expr' 'Shunted)
</span><a href="#local-6989586621680056899"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedType -&gt; Type 'Shunted
forall {a1} {a2} (ast1 :: a1) (ast2 :: a2) {f :: * -&gt; *}.
(Select &quot;TypeKind&quot; ast1 ~ Select &quot;TypeKind&quot; ast2,
 CleanupLocated (ASTLocate' ast2 (Type' ast2)) ~ f (Type' ast2),
 CleanupLocated (ASTLocate' ast1 (Select &quot;TypeVar&quot; ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select &quot;TypeVar&quot; ast2)),
 CleanupLocated (ASTLocate' ast1 (Select &quot;UserDefinedType&quot; ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select &quot;UserDefinedType&quot; ast2)),
 CleanupLocated (ASTLocate' ast1 (Type' ast1)) ~ f (Type' ast1),
 CleanupLocated (ASTLocate' ast1 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast2 LowerAlphaName),
 Functor f) =&gt;
Type ast1 -&gt; Type ast2
</span><a href="Elara.AST.Generic.Types.html#coerceType"><span class="hs-identifier hs-var">coerceType</span></a></span><span> </span><span class="annot"><span class="annottext">(RenamedType -&gt; Type 'Shunted)
-&gt; Maybe RenamedType -&gt; Maybe (Type 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe RenamedType
Select &quot;ExprType&quot; 'Renamed
</span><a href="#local-6989586621680056898"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Located (Expr' 'Shunted) -&gt; Expr 'Shunted)
-&gt; Eff r (Located (Expr' 'Shunted)) -&gt; Eff r (Expr 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located RenamedExpr')
  (Located (Expr' 'Shunted))
  RenamedExpr'
  (Expr' 'Shunted)
-&gt; (RenamedExpr' -&gt; Eff r (Expr' 'Shunted))
-&gt; Located RenamedExpr'
-&gt; Eff r (Located (Expr' 'Shunted))
forall k (f :: * -&gt; *) (is :: IxList) s t a b.
(Is k A_Traversal, Applicative f) =&gt;
Optic k is s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located RenamedExpr')
  (Located (Expr' 'Shunted))
  RenamedExpr'
  (Expr' 'Shunted)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr' -&gt; Eff r (Expr' 'Shunted)
</span><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="annot"><span class="annottext">Located RenamedExpr'
ASTLocate 'Renamed RenamedExpr'
</span><a href="#local-6989586621680056897"><span class="hs-identifier hs-var">le</span></a></span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-272"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-type">shuntExpr'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr%27"><span class="hs-identifier hs-type">RenamedExpr'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680056692"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedExpr%27"><span class="hs-identifier hs-type">ShuntedExpr'</span></a></span><span>
</span><span id="line-273"></span><span>    </span><span id="local-6989586621680056900"><span class="annot"><span class="annottext">shuntExpr' :: RenamedExpr' -&gt; Eff r (Expr' 'Shunted)
</span><a href="#local-6989586621680056900"><span class="hs-identifier hs-var hs-var">shuntExpr'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span id="local-6989586621680056903"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680056903"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' 'Shunted -&gt; Eff r (Expr' 'Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Expr' 'Shunted
forall a (ast :: a). Integer -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Int"><span class="hs-identifier hs-var">Int</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680056903"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Float"><span class="hs-identifier hs-type">Float</span></a></span><span> </span><span id="local-6989586621680056905"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680056905"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' 'Shunted -&gt; Eff r (Expr' 'Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Expr' 'Shunted
forall a (ast :: a). Double -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Float"><span class="hs-identifier hs-var">Float</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680056905"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span id="local-6989586621680056907"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680056907"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' 'Shunted -&gt; Eff r (Expr' 'Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Expr' 'Shunted
forall a (ast :: a). Text -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#String"><span class="hs-identifier hs-var">String</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680056907"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span> </span><span id="local-6989586621680056909"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621680056909"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' 'Shunted -&gt; Eff r (Expr' 'Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Expr' 'Shunted
forall a (ast :: a). Char -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Char"><span class="hs-identifier hs-var">Char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621680056909"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr'
</span><a href="Elara.AST.Generic.Types.html#Unit"><span class="hs-identifier hs-var">Unit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' 'Shunted -&gt; Eff r (Expr' 'Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Expr' 'Shunted
forall a (ast :: a). Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Unit"><span class="hs-identifier hs-var">Unit</span></a></span><span>
</span><span id="line-278"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621680056912"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;VarRef&quot; 'Renamed)
</span><a href="#local-6989586621680056912"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' 'Shunted -&gt; Eff r (Expr' 'Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTLocate 'Shunted (Select &quot;VarRef&quot; 'Shunted) -&gt; Expr' 'Shunted
forall a (ast :: a).
ASTLocate ast (Select &quot;VarRef&quot; ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;VarRef&quot; 'Renamed)
ASTLocate 'Shunted (Select &quot;VarRef&quot; 'Shunted)
</span><a href="#local-6989586621680056912"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Constructor"><span class="hs-identifier hs-type">Constructor</span></a></span><span> </span><span id="local-6989586621680056914"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;ConRef&quot; 'Renamed)
</span><a href="#local-6989586621680056914"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' 'Shunted -&gt; Eff r (Expr' 'Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTLocate 'Shunted (Select &quot;ConRef&quot; 'Shunted) -&gt; Expr' 'Shunted
forall a (ast :: a).
ASTLocate ast (Select &quot;ConRef&quot; ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Constructor"><span class="hs-identifier hs-var">Constructor</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;ConRef&quot; 'Renamed)
ASTLocate 'Shunted (Select &quot;ConRef&quot; 'Shunted)
</span><a href="#local-6989586621680056914"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Lambda"><span class="hs-identifier hs-type">Lambda</span></a></span><span> </span><span id="local-6989586621680056916"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;LambdaPattern&quot; 'Renamed)
</span><a href="#local-6989586621680056916"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680056917"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056917"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-281"></span><span>        </span><span id="local-6989586621680056918"><span class="annot"><a href="#local-6989586621680056918"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056917"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-282"></span><span>        </span><span id="local-6989586621680056919"><span class="annot"><a href="#local-6989586621680056919"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">traverseOf</span></span><span> </span><span class="annot"><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-type">unlocated</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypedLambdaParam"><span class="hs-identifier hs-type">TypedLambdaParam</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680056921"><span class="annot"><span class="annottext">Unique VarName
</span><a href="#local-6989586621680056921"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680056922"><span class="annot"><span class="annottext">Select &quot;PatternType&quot; 'Renamed
</span><a href="#local-6989586621680056922"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypedLambdaParam (Unique VarName) 'Shunted
-&gt; Eff r (TypedLambdaParam (Unique VarName) 'Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TypedLambdaParam (Unique VarName) 'Shunted
 -&gt; Eff r (TypedLambdaParam (Unique VarName) 'Shunted))
-&gt; TypedLambdaParam (Unique VarName) 'Shunted
-&gt; Eff r (TypedLambdaParam (Unique VarName) 'Shunted)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Unique VarName, Select &quot;PatternType&quot; 'Shunted)
-&gt; TypedLambdaParam (Unique VarName) 'Shunted
forall {a} v (ast :: a).
(v, Select &quot;PatternType&quot; ast) -&gt; TypedLambdaParam v ast
</span><a href="Elara.AST.Generic.Types.html#TypedLambdaParam"><span class="hs-identifier hs-var">TypedLambdaParam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique VarName
</span><a href="#local-6989586621680056921"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedType -&gt; Type 'Shunted
forall {a1} {a2} (ast1 :: a1) (ast2 :: a2) {f :: * -&gt; *}.
(Select &quot;TypeKind&quot; ast1 ~ Select &quot;TypeKind&quot; ast2,
 CleanupLocated (ASTLocate' ast2 (Type' ast2)) ~ f (Type' ast2),
 CleanupLocated (ASTLocate' ast1 (Select &quot;TypeVar&quot; ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select &quot;TypeVar&quot; ast2)),
 CleanupLocated (ASTLocate' ast1 (Select &quot;UserDefinedType&quot; ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select &quot;UserDefinedType&quot; ast2)),
 CleanupLocated (ASTLocate' ast1 (Type' ast1)) ~ f (Type' ast1),
 CleanupLocated (ASTLocate' ast1 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast2 LowerAlphaName),
 Functor f) =&gt;
Type ast1 -&gt; Type ast2
</span><a href="Elara.AST.Generic.Types.html#coerceType"><span class="hs-identifier hs-var">coerceType</span></a></span><span> </span><span class="annot"><span class="annottext">(RenamedType -&gt; Type 'Shunted)
-&gt; Maybe RenamedType -&gt; Maybe (Type 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe RenamedType
Select &quot;PatternType&quot; 'Renamed
</span><a href="#local-6989586621680056922"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680056916"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Lambda"><span class="hs-identifier hs-type">Lambda</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056919"><span class="hs-identifier hs-type">n'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056918"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#FunctionCall"><span class="hs-identifier hs-type">FunctionCall</span></a></span><span> </span><span id="local-6989586621680056924"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056924"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680056925"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056925"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr 'Shunted -&gt; Expr 'Shunted -&gt; Expr' 'Shunted
forall a (ast :: a). Expr ast -&gt; Expr ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#FunctionCall"><span class="hs-identifier hs-var">FunctionCall</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr 'Shunted -&gt; Expr 'Shunted -&gt; Expr' 'Shunted)
-&gt; Eff r (Expr 'Shunted) -&gt; Eff r (Expr 'Shunted -&gt; Expr' 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056924"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Eff r (Expr 'Shunted -&gt; Expr' 'Shunted)
-&gt; Eff r (Expr 'Shunted) -&gt; Eff r (Expr' 'Shunted)
forall a b. Eff r (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056925"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeApplication"><span class="hs-identifier hs-type">TypeApplication</span></a></span><span> </span><span id="local-6989586621680056927"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056927"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680056928"><span class="annot"><span class="annottext">Select &quot;TypeApplication&quot; 'Renamed
</span><a href="#local-6989586621680056928"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr 'Shunted -&gt; Type 'Shunted -&gt; Expr' 'Shunted
Expr 'Shunted
-&gt; Select &quot;TypeApplication&quot; 'Shunted -&gt; Expr' 'Shunted
forall a (ast :: a).
Expr ast -&gt; Select &quot;TypeApplication&quot; ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#TypeApplication"><span class="hs-identifier hs-var">TypeApplication</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr 'Shunted -&gt; Type 'Shunted -&gt; Expr' 'Shunted)
-&gt; Eff r (Expr 'Shunted) -&gt; Eff r (Type 'Shunted -&gt; Expr' 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056927"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Eff r (Type 'Shunted -&gt; Expr' 'Shunted)
-&gt; Eff r (Type 'Shunted) -&gt; Eff r (Expr' 'Shunted)
forall a b. Eff r (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type 'Shunted -&gt; Eff r (Type 'Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedType -&gt; Type 'Shunted
forall {a1} {a2} (ast1 :: a1) (ast2 :: a2) {f :: * -&gt; *}.
(Select &quot;TypeKind&quot; ast1 ~ Select &quot;TypeKind&quot; ast2,
 CleanupLocated (ASTLocate' ast2 (Type' ast2)) ~ f (Type' ast2),
 CleanupLocated (ASTLocate' ast1 (Select &quot;TypeVar&quot; ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select &quot;TypeVar&quot; ast2)),
 CleanupLocated (ASTLocate' ast1 (Select &quot;UserDefinedType&quot; ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select &quot;UserDefinedType&quot; ast2)),
 CleanupLocated (ASTLocate' ast1 (Type' ast1)) ~ f (Type' ast1),
 CleanupLocated (ASTLocate' ast1 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast2 LowerAlphaName),
 Functor f) =&gt;
Type ast1 -&gt; Type ast2
</span><a href="Elara.AST.Generic.Types.html#coerceType"><span class="hs-identifier hs-var">coerceType</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedType
Select &quot;TypeApplication&quot; 'Renamed
</span><a href="#local-6989586621680056928"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-type">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680056929"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056929"><span class="hs-identifier hs-var">operator</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680056930"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056930"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680056931"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056931"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-287"></span><span>        </span><span class="hs-comment">-- turn the binary operator into 2 function calls</span><span>
</span><span id="line-288"></span><span>        </span><span class="hs-comment">-- (a `op` b) -&gt; (op a) b</span><span>
</span><span id="line-289"></span><span>        </span><span class="hs-comment">-- ((a `op` b) `op` c) -&gt; (op (op a b)) c</span><span>
</span><span id="line-290"></span><span>        </span><span class="hs-comment">-- Semantics for type annotation shifting are as follows:</span><span>
</span><span id="line-291"></span><span>        </span><span class="hs-comment">-- (a : T) `op` b -&gt; (op (a : T)) b</span><span>
</span><span id="line-292"></span><span>        </span><span class="hs-comment">-- a `op` (b : T) -&gt; (op a) (b : T)</span><span>
</span><span id="line-293"></span><span>        </span><span class="hs-comment">-- (a : T1) `op` (b : T2) -&gt; (op (a : T1)) (b : T2)</span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span>        </span><span id="local-6989586621680056932"><span class="annot"><a href="#local-6989586621680056932"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056930"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-296"></span><span>        </span><span id="local-6989586621680056933"><span class="annot"><a href="#local-6989586621680056933"><span class="hs-identifier hs-var">r'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-type">fixExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056931"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-297"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680056934"><span class="annot"><a href="#local-6989586621680056934"><span class="hs-identifier hs-var hs-var">op'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056929"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
-&gt; Optic'
     A_Lens '[] RenamedBinaryOperator (BinaryOperator' 'Renamed)
-&gt; BinaryOperator' 'Renamed
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedBinaryOperator
  RenamedBinaryOperator
  (Located (BinaryOperator' 'Renamed))
  (Located (BinaryOperator' 'Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedBinaryOperator
  RenamedBinaryOperator
  (Located (BinaryOperator' 'Renamed))
  (Located (BinaryOperator' 'Renamed))
-&gt; Optic
     A_Lens
     '[]
     (Located (BinaryOperator' 'Renamed))
     (Located (BinaryOperator' 'Renamed))
     (BinaryOperator' 'Renamed)
     (BinaryOperator' 'Renamed)
-&gt; Optic'
     A_Lens '[] RenamedBinaryOperator (BinaryOperator' 'Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (BinaryOperator' 'Renamed))
  (Located (BinaryOperator' 'Renamed))
  (BinaryOperator' 'Renamed)
  (BinaryOperator' 'Renamed)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-298"></span><span>                </span><span class="annot"><a href="Elara.AST.Generic.Types.html#SymOp"><span class="hs-identifier hs-type">SymOp</span></a></span><span> </span><span id="local-6989586621680056935"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;SymOp&quot; 'Renamed)
</span><a href="#local-6989586621680056935"><span class="hs-identifier hs-var">lopName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Shunted (Select &quot;VarRef&quot; 'Shunted) -&gt; Expr' 'Shunted
forall a (ast :: a).
ASTLocate ast (Select &quot;VarRef&quot; ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OpName -&gt; VarName
</span><a href="Elara.AST.Name.html#OperatorVarName"><span class="hs-identifier hs-var">OperatorVarName</span></a></span><span> </span><span class="annot"><span class="annottext">(OpName -&gt; VarName)
-&gt; Located (VarRef OpName) -&gt; Located (VarRef VarName)
forall (f :: * -&gt; *) (g :: * -&gt; *) a b.
(Functor f, Functor g) =&gt;
(a -&gt; b) -&gt; f (g a) -&gt; f (g b)
</span><span class="hs-operator hs-var">&lt;&lt;$&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Located (VarRef OpName)
ASTLocate 'Renamed (Select &quot;SymOp&quot; 'Renamed)
</span><a href="#local-6989586621680056935"><span class="hs-identifier hs-var">lopName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr' 'Shunted
-&gt; Located (VarRef OpName) -&gt; Located (Expr' 'Shunted)
forall b a. HasSourceRegion b =&gt; a -&gt; b -&gt; Located a
</span><a href="Elara.AST.Region.html#withLocationOf"><span class="hs-operator hs-var">`withLocationOf`</span></a></span><span> </span><span class="annot"><span class="annottext">Located (VarRef OpName)
ASTLocate 'Renamed (Select &quot;SymOp&quot; 'Renamed)
</span><a href="#local-6989586621680056935"><span class="hs-identifier hs-var">lopName</span></a></span><span>
</span><span id="line-299"></span><span>                </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Infixed"><span class="hs-identifier hs-type">Infixed</span></a></span><span> </span><span id="local-6989586621680056936"><span class="annot"><span class="annottext">Select &quot;Infixed&quot; 'Renamed
</span><a href="#local-6989586621680056936"><span class="hs-identifier hs-var">inName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-300"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680056937"><span class="annot"><span class="annottext">z :: Expr' 'Shunted
</span><a href="#local-6989586621680056937"><span class="hs-identifier hs-var hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Select &quot;Infixed&quot; 'Renamed
</span><a href="#local-6989586621680056936"><span class="hs-identifier hs-var">inName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-301"></span><span>                            </span><span class="annot"><a href="Elara.AST.VarRef.html#Global"><span class="hs-identifier hs-type">Global</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span id="local-6989586621680056938"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056938"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span id="local-6989586621680056939"><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680056939"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680056940"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680056940"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-302"></span><span>                                </span><span class="annot"><span class="annottext">ASTLocate 'Shunted (Select &quot;VarRef&quot; 'Shunted) -&gt; Expr' 'Shunted
forall a (ast :: a).
ASTLocate ast (Select &quot;VarRef&quot; ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span>
</span><span id="line-303"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion -&gt; VarRef VarName -&gt; Located (VarRef VarName)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056938"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarRefImpl LocatedVarRefKind (Qualified VarName) -&gt; VarRef VarName
forall (c :: VarRefKind) n.
VarRefImpl c (Qualified n) -&gt; VarRef' c n
</span><a href="Elara.AST.VarRef.html#Global"><span class="hs-identifier hs-var">Global</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion -&gt; Qualified VarName -&gt; Located (Qualified VarName)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056938"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarName -&gt; ModuleName -&gt; Qualified VarName
forall name. name -&gt; ModuleName -&gt; Qualified name
</span><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-var">Qualified</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LowerAlphaName -&gt; VarName
</span><a href="Elara.AST.Name.html#NormalVarName"><span class="hs-identifier hs-var">NormalVarName</span></a></span><span> </span><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680056939"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680056940"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>                            </span><span class="annot"><a href="Elara.AST.VarRef.html#Global"><span class="hs-identifier hs-type">Global</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span id="local-6989586621680056941"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056941"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#ConName"><span class="hs-identifier hs-type">ConName</span></a></span><span> </span><span id="local-6989586621680056942"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621680056942"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680056943"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680056943"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-305"></span><span>                                </span><span class="annot"><span class="annottext">ASTLocate 'Shunted (Select &quot;ConRef&quot; 'Shunted) -&gt; Expr' 'Shunted
forall a (ast :: a).
ASTLocate ast (Select &quot;ConRef&quot; ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Constructor"><span class="hs-identifier hs-var">Constructor</span></a></span><span>
</span><span id="line-306"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion -&gt; Qualified TypeName -&gt; Located (Qualified TypeName)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056941"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeName -&gt; ModuleName -&gt; Qualified TypeName
forall name. name -&gt; ModuleName -&gt; Qualified name
</span><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-var">Qualified</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621680056942"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680056943"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>                            </span><span class="annot"><a href="Elara.AST.VarRef.html#Local"><span class="hs-identifier hs-type">Local</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span id="local-6989586621680056944"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056944"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span id="local-6989586621680056945"><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680056945"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680056946"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680056946"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-308"></span><span>                                </span><span class="annot"><span class="annottext">ASTLocate 'Shunted (Select &quot;VarRef&quot; 'Shunted) -&gt; Expr' 'Shunted
forall a (ast :: a).
ASTLocate ast (Select &quot;VarRef&quot; ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span>
</span><span id="line-309"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion -&gt; VarRef VarName -&gt; Located (VarRef VarName)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056944"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarRefImpl LocatedVarRefKind (Unique VarName) -&gt; VarRef VarName
forall (c :: VarRefKind) n. VarRefImpl c (Unique n) -&gt; VarRef' c n
</span><a href="Elara.AST.VarRef.html#Local"><span class="hs-identifier hs-var">Local</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion -&gt; Unique VarName -&gt; Located (Unique VarName)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680056944"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarName -&gt; Int -&gt; Unique VarName
forall a. a -&gt; Int -&gt; Unique a
</span><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LowerAlphaName -&gt; VarName
</span><a href="Elara.AST.Name.html#NormalVarName"><span class="hs-identifier hs-var">NormalVarName</span></a></span><span> </span><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680056945"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680056946"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>                            </span><span class="annot"><a href="Elara.AST.VarRef.html#Local"><span class="hs-identifier hs-type">Local</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#ConName"><span class="hs-identifier hs-type">ConName</span></a></span><span> </span><span id="local-6989586621680056947"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621680056947"><span class="hs-identifier hs-var">_1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Expr' 'Shunted
forall a t. (HasCallStack, IsText t) =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Shouldn't have local con names&quot;</span></span><span>
</span><span id="line-311"></span><span>                    </span><span class="annot"><span class="annottext">Expr' 'Shunted
</span><a href="#local-6989586621680056937"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">Expr' 'Shunted
-&gt; Located (BinaryOperator' 'Renamed) -&gt; Located (Expr' 'Shunted)
forall b a. HasSourceRegion b =&gt; a -&gt; b -&gt; Located a
</span><a href="Elara.AST.Region.html#withLocationOf"><span class="hs-operator hs-var">`withLocationOf`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680056929"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
-&gt; Iso
     RenamedBinaryOperator
     RenamedBinaryOperator
     (Located (BinaryOperator' 'Renamed))
     (Located (BinaryOperator' 'Renamed))
-&gt; Located (BinaryOperator' 'Renamed)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedBinaryOperator
  RenamedBinaryOperator
  (Located (BinaryOperator' 'Renamed))
  (Located (BinaryOperator' 'Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680056948"><span class="annot"><a href="#local-6989586621680056948"><span class="hs-identifier hs-var hs-var">opVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ASTLocate 'Shunted (Expr' 'Shunted), Select &quot;ExprType&quot; 'Shunted)
-&gt; Expr 'Shunted
forall a (ast :: a).
(ASTLocate ast (Expr' ast), Select &quot;ExprType&quot; ast) -&gt; Expr ast
</span><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located (Expr' 'Shunted)
ASTLocate 'Shunted (Expr' 'Shunted)
</span><a href="#local-6989586621680056934"><span class="hs-identifier hs-var">op'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Type 'Shunted)
Select &quot;ExprType&quot; 'Shunted
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- There can't ever be a type annotation on an operator</span><span>
</span><span id="line-314"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680056949"><span class="annot"><a href="#local-6989586621680056949"><span class="hs-identifier hs-var hs-var">leftCall</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-315"></span><span>                </span><span class="annot"><span class="annottext">(ASTLocate 'Shunted (Expr' 'Shunted), Select &quot;ExprType&quot; 'Shunted)
-&gt; Expr 'Shunted
forall a (ast :: a).
(ASTLocate ast (Expr' ast), Select &quot;ExprType&quot; ast) -&gt; Expr ast
</span><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span>
</span><span id="line-316"></span><span>                    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">SourceRegion -&gt; Expr' 'Shunted -&gt; Located (Expr' 'Shunted)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span>
</span><span id="line-317"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty SourceRegion -&gt; SourceRegion
</span><a href="Elara.AST.Region.html#spanningRegion%27"><span class="hs-identifier hs-var">Located.spanningRegion'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located (Expr' 'Shunted)
</span><a href="#local-6989586621680056934"><span class="hs-identifier hs-var">op'</span></a></span><span> </span><span class="annot"><span class="annottext">Located (Expr' 'Shunted)
-&gt; Optic' A_Lens '[] (Located (Expr' 'Shunted)) SourceRegion
-&gt; SourceRegion
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens '[] (Located (Expr' 'Shunted)) SourceRegion
forall a. HasSourceRegion a =&gt; Lens' a SourceRegion
</span><a href="Elara.AST.Region.html#sourceRegion"><span class="hs-identifier hs-var">sourceRegion</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion -&gt; [SourceRegion] -&gt; NonEmpty SourceRegion
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Expr 'Shunted
</span><a href="#local-6989586621680056932"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="annot"><span class="annottext">Expr 'Shunted
-&gt; Optic' A_Lens '[] (Expr 'Shunted) SourceRegion -&gt; SourceRegion
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Iso
  (Expr 'Shunted)
  (Expr 'Shunted)
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Iso
  (Expr 'Shunted)
  (Expr 'Shunted)
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
-&gt; Optic
     A_Lens
     '[]
     (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
     (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
     (Located (Expr' 'Shunted))
     (Located (Expr' 'Shunted))
-&gt; Optic
     A_Lens
     '[]
     (Expr 'Shunted)
     (Expr 'Shunted)
     (Located (Expr' 'Shunted))
     (Located (Expr' 'Shunted))
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
  (Located (Expr' 'Shunted))
  (Located (Expr' 'Shunted))
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Expr 'Shunted)
  (Expr 'Shunted)
  (Located (Expr' 'Shunted))
  (Located (Expr' 'Shunted))
-&gt; Optic' A_Lens '[] (Located (Expr' 'Shunted)) SourceRegion
-&gt; Optic' A_Lens '[] (Expr 'Shunted) SourceRegion
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens '[] (Located (Expr' 'Shunted)) SourceRegion
forall a. HasSourceRegion a =&gt; Lens' a SourceRegion
</span><a href="Elara.AST.Region.html#sourceRegion"><span class="hs-identifier hs-var">sourceRegion</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-318"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr 'Shunted -&gt; Expr 'Shunted -&gt; Expr' 'Shunted
forall a (ast :: a). Expr ast -&gt; Expr ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#FunctionCall"><span class="hs-identifier hs-var">FunctionCall</span></a></span><span> </span><span class="annot"><span class="annottext">Expr 'Shunted
</span><a href="#local-6989586621680056948"><span class="hs-identifier hs-var">opVar</span></a></span><span> </span><span class="annot"><span class="annottext">Expr 'Shunted
</span><a href="#local-6989586621680056932"><span class="hs-identifier hs-var">l'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-319"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Type 'Shunted)
Select &quot;ExprType&quot; 'Shunted
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- this will / can never have a type annotation</span><span>
</span><span id="line-320"></span><span>                    </span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#FunctionCall"><span class="hs-identifier hs-type">FunctionCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056949"><span class="hs-identifier hs-type">leftCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056933"><span class="hs-identifier hs-type">r'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#If"><span class="hs-identifier hs-type">If</span></a></span><span> </span><span id="local-6989586621680056953"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056953"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621680056954"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056954"><span class="hs-identifier hs-var">then'</span></a></span></span><span> </span><span id="local-6989586621680056955"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056955"><span class="hs-identifier hs-var">else'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr 'Shunted -&gt; Expr 'Shunted -&gt; Expr 'Shunted -&gt; Expr' 'Shunted
forall a (ast :: a). Expr ast -&gt; Expr ast -&gt; Expr ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#If"><span class="hs-identifier hs-var">If</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr 'Shunted -&gt; Expr 'Shunted -&gt; Expr 'Shunted -&gt; Expr' 'Shunted)
-&gt; Eff r (Expr 'Shunted)
-&gt; Eff r (Expr 'Shunted -&gt; Expr 'Shunted -&gt; Expr' 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056953"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="annot"><span class="annottext">Eff r (Expr 'Shunted -&gt; Expr 'Shunted -&gt; Expr' 'Shunted)
-&gt; Eff r (Expr 'Shunted) -&gt; Eff r (Expr 'Shunted -&gt; Expr' 'Shunted)
forall a b. Eff r (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056954"><span class="hs-identifier hs-var">then'</span></a></span><span> </span><span class="annot"><span class="annottext">Eff r (Expr 'Shunted -&gt; Expr' 'Shunted)
-&gt; Eff r (Expr 'Shunted) -&gt; Eff r (Expr' 'Shunted)
forall a b. Eff r (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056955"><span class="hs-identifier hs-var">else'</span></a></span><span>
</span><span id="line-323"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Let"><span class="hs-identifier hs-type">Let</span></a></span><span> </span><span id="local-6989586621680056957"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;LetParamName&quot; 'Renamed)
</span><a href="#local-6989586621680056957"><span class="hs-identifier hs-var">vn</span></a></span></span><span> </span><span class="annot"><span class="annottext">Select &quot;LetPattern&quot; 'Renamed
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680056958"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056958"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Shunted (Select &quot;LetParamName&quot; 'Shunted)
-&gt; Select &quot;LetPattern&quot; 'Shunted -&gt; Expr 'Shunted -&gt; Expr' 'Shunted
forall a (ast :: a).
ASTLocate ast (Select &quot;LetParamName&quot; ast)
-&gt; Select &quot;LetPattern&quot; ast -&gt; Expr ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;LetParamName&quot; 'Renamed)
ASTLocate 'Shunted (Select &quot;LetParamName&quot; 'Shunted)
</span><a href="#local-6989586621680056957"><span class="hs-identifier hs-var">vn</span></a></span><span> </span><span class="annot"><span class="annottext">NoFieldValue
Select &quot;LetPattern&quot; 'Shunted
</span><a href="Elara.AST.Generic.Common.html#NoFieldValue"><span class="hs-identifier hs-var">NoFieldValue</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr 'Shunted -&gt; Expr' 'Shunted)
-&gt; Eff r (Expr 'Shunted) -&gt; Eff r (Expr' 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056958"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-324"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#LetIn"><span class="hs-identifier hs-type">LetIn</span></a></span><span> </span><span id="local-6989586621680056960"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;LetParamName&quot; 'Renamed)
</span><a href="#local-6989586621680056960"><span class="hs-identifier hs-var">vn</span></a></span></span><span> </span><span class="annot"><span class="annottext">Select &quot;LetPattern&quot; 'Renamed
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680056961"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056961"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680056962"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056962"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Shunted (Select &quot;LetParamName&quot; 'Shunted)
-&gt; Select &quot;LetPattern&quot; 'Shunted
-&gt; Expr 'Shunted
-&gt; Expr 'Shunted
-&gt; Expr' 'Shunted
forall a (ast :: a).
ASTLocate ast (Select &quot;LetParamName&quot; ast)
-&gt; Select &quot;LetPattern&quot; ast -&gt; Expr ast -&gt; Expr ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#LetIn"><span class="hs-identifier hs-var">LetIn</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;LetParamName&quot; 'Renamed)
ASTLocate 'Shunted (Select &quot;LetParamName&quot; 'Shunted)
</span><a href="#local-6989586621680056960"><span class="hs-identifier hs-var">vn</span></a></span><span> </span><span class="annot"><span class="annottext">NoFieldValue
Select &quot;LetPattern&quot; 'Shunted
</span><a href="Elara.AST.Generic.Common.html#NoFieldValue"><span class="hs-identifier hs-var">NoFieldValue</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr 'Shunted -&gt; Expr 'Shunted -&gt; Expr' 'Shunted)
-&gt; Eff r (Expr 'Shunted) -&gt; Eff r (Expr 'Shunted -&gt; Expr' 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056961"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Eff r (Expr 'Shunted -&gt; Expr' 'Shunted)
-&gt; Eff r (Expr 'Shunted) -&gt; Eff r (Expr' 'Shunted)
forall a b. Eff r (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056962"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-325"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span id="local-6989586621680056964"><span class="annot"><span class="annottext">NonEmpty RenamedExpr
</span><a href="#local-6989586621680056964"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty (Expr 'Shunted) -&gt; Expr' 'Shunted
forall a (ast :: a). NonEmpty (Expr ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (Expr 'Shunted) -&gt; Expr' 'Shunted)
-&gt; Eff r (NonEmpty (Expr 'Shunted)) -&gt; Eff r (Expr' 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(RenamedExpr -&gt; Eff r (Expr 'Shunted))
-&gt; NonEmpty RenamedExpr -&gt; Eff r (NonEmpty (Expr 'Shunted))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; NonEmpty a -&gt; f (NonEmpty b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty RenamedExpr
</span><a href="#local-6989586621680056964"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-326"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span id="local-6989586621680056967"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056967"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680056968"><span class="annot"><span class="annottext">[(Pattern 'Renamed, RenamedExpr)]
</span><a href="#local-6989586621680056968"><span class="hs-identifier hs-var">cases</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-327"></span><span>        </span><span id="local-6989586621680056969"><span class="annot"><a href="#local-6989586621680056969"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680056967"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-328"></span><span>        </span><span id="local-6989586621680056970"><span class="annot"><a href="#local-6989586621680056970"><span class="hs-identifier hs-var">cases'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">bitraverse</span></span><span> </span><span class="annot"><a href="Elara.Shunt.html#shuntPattern"><span class="hs-identifier hs-type">shuntPattern</span></a></span><span> </span><span class="annot"><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-type">fixExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680056968"><span class="hs-identifier hs-type">cases</span></a></span><span>
</span><span id="line-329"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056969"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680056970"><span class="hs-identifier hs-type">cases'</span></a></span><span>
</span><span id="line-330"></span><span>    </span><span class="annot"><a href="#local-6989586621680056900"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#InParens"><span class="hs-identifier hs-type">InParens</span></a></span><span> </span><span id="local-6989586621680056973"><span class="annot"><span class="annottext">Select &quot;InParens&quot; 'Renamed
</span><a href="#local-6989586621680056973"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr 'Shunted
-&gt; Optic' A_Lens '[] (Expr 'Shunted) (Expr' 'Shunted)
-&gt; Expr' 'Shunted
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Iso
  (Expr 'Shunted)
  (Expr 'Shunted)
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Iso
  (Expr 'Shunted)
  (Expr 'Shunted)
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
-&gt; Optic
     A_Lens
     '[]
     (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
     (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
     (Located (Expr' 'Shunted))
     (Located (Expr' 'Shunted))
-&gt; Optic
     A_Lens
     '[]
     (Expr 'Shunted)
     (Expr 'Shunted)
     (Located (Expr' 'Shunted))
     (Located (Expr' 'Shunted))
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
  (Located (Expr' 'Shunted), Maybe (Type 'Shunted))
  (Located (Expr' 'Shunted))
  (Located (Expr' 'Shunted))
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Expr 'Shunted)
  (Expr 'Shunted)
  (Located (Expr' 'Shunted))
  (Located (Expr' 'Shunted))
-&gt; Optic
     A_Lens
     '[]
     (Located (Expr' 'Shunted))
     (Located (Expr' 'Shunted))
     (Expr' 'Shunted)
     (Expr' 'Shunted)
-&gt; Optic' A_Lens '[] (Expr 'Shunted) (Expr' 'Shunted)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Expr' 'Shunted))
  (Located (Expr' 'Shunted))
  (Expr' 'Shunted)
  (Expr' 'Shunted)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Expr 'Shunted -&gt; Expr' 'Shunted)
-&gt; Eff r (Expr 'Shunted) -&gt; Eff r (Expr' 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr 'Shunted)
forall (r :: [Effect]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr 'Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
Select &quot;InParens&quot; 'Renamed
</span><a href="#local-6989586621680056973"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span id="local-6989586621680054907"><span class="annot"><a href="Elara.Shunt.html#shuntPattern"><span class="hs-identifier hs-type">shuntPattern</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedPattern"><span class="hs-identifier hs-type">RenamedPattern</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054907"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedPattern"><span class="hs-identifier hs-type">ShuntedPattern</span></a></span></span><span>
</span><span id="line-333"></span><span id="shuntPattern"><span class="annot"><span class="annottext">shuntPattern :: forall (r :: [Effect]). Pattern 'Renamed -&gt; Eff r ShuntedPattern
</span><a href="Elara.Shunt.html#shuntPattern"><span class="hs-identifier hs-var hs-var">shuntPattern</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Pattern"><span class="hs-identifier hs-type">Pattern</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680056992"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Pattern' 'Renamed)
</span><a href="#local-6989586621680056992"><span class="hs-identifier hs-var">le</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680056993"><span class="annot"><span class="annottext">Select &quot;PatternType&quot; 'Renamed
</span><a href="#local-6989586621680056993"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680056994"><span class="annot"><span class="annottext">Located ShuntedPattern'
</span><a href="#local-6989586621680056994"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ASTLocate 'Shunted ShuntedPattern', Select &quot;PatternType&quot; 'Shunted)
-&gt; ShuntedPattern
forall {a} (ast :: a).
(ASTLocate ast (Pattern' ast), Select &quot;PatternType&quot; ast)
-&gt; Pattern ast
</span><a href="Elara.AST.Generic.Types.html#Pattern"><span class="hs-identifier hs-var">Pattern</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located ShuntedPattern'
ASTLocate 'Shunted ShuntedPattern'
</span><a href="#local-6989586621680056994"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedType -&gt; Type 'Shunted
forall {a1} {a2} (ast1 :: a1) (ast2 :: a2) {f :: * -&gt; *}.
(Select &quot;TypeKind&quot; ast1 ~ Select &quot;TypeKind&quot; ast2,
 CleanupLocated (ASTLocate' ast2 (Type' ast2)) ~ f (Type' ast2),
 CleanupLocated (ASTLocate' ast1 (Select &quot;TypeVar&quot; ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select &quot;TypeVar&quot; ast2)),
 CleanupLocated (ASTLocate' ast1 (Select &quot;UserDefinedType&quot; ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select &quot;UserDefinedType&quot; ast2)),
 CleanupLocated (ASTLocate' ast1 (Type' ast1)) ~ f (Type' ast1),
 CleanupLocated (ASTLocate' ast1 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast2 LowerAlphaName),
 Functor f) =&gt;
Type ast1 -&gt; Type ast2
</span><a href="Elara.AST.Generic.Types.html#coerceType"><span class="hs-identifier hs-var">coerceType</span></a></span><span> </span><span class="annot"><span class="annottext">(RenamedType -&gt; Type 'Shunted)
-&gt; Maybe RenamedType -&gt; Maybe (Type 'Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe RenamedType
Select &quot;PatternType&quot; 'Renamed
</span><a href="#local-6989586621680056993"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Located ShuntedPattern' -&gt; ShuntedPattern)
-&gt; Eff r (Located ShuntedPattern') -&gt; Eff r ShuntedPattern
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Pattern' 'Renamed))
  (Located ShuntedPattern')
  (Pattern' 'Renamed)
  ShuntedPattern'
-&gt; (Pattern' 'Renamed -&gt; Eff r ShuntedPattern')
-&gt; Located (Pattern' 'Renamed)
-&gt; Eff r (Located ShuntedPattern')
forall k (f :: * -&gt; *) (is :: IxList) s t a b.
(Is k A_Traversal, Applicative f) =&gt;
Optic k is s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  '[]
  (Located (Pattern' 'Renamed))
  (Located ShuntedPattern')
  (Pattern' 'Renamed)
  ShuntedPattern'
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern' 'Renamed -&gt; Eff r ShuntedPattern'
forall (r :: [Effect]). Pattern' 'Renamed -&gt; Eff r ShuntedPattern'
</span><a href="#local-6989586621680056995"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="annot"><span class="annottext">Located (Pattern' 'Renamed)
ASTLocate 'Renamed (Pattern' 'Renamed)
</span><a href="#local-6989586621680056992"><span class="hs-identifier hs-var">le</span></a></span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-335"></span><span>    </span><span id="local-6989586621680054912"><span class="annot"><a href="#local-6989586621680056995"><span class="hs-identifier hs-type">shuntPattern'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedPattern%27"><span class="hs-identifier hs-type">RenamedPattern'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680054912"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedPattern%27"><span class="hs-identifier hs-type">ShuntedPattern'</span></a></span></span><span>
</span><span id="line-336"></span><span>    </span><span id="local-6989586621680056995"><span class="annot"><span class="annottext">shuntPattern' :: forall (r :: [Effect]). Pattern' 'Renamed -&gt; Eff r ShuntedPattern'
</span><a href="#local-6989586621680056995"><span class="hs-identifier hs-var hs-var">shuntPattern'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#VarPattern"><span class="hs-identifier hs-type">VarPattern</span></a></span><span> </span><span id="local-6989586621680057008"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;VarPat&quot; 'Renamed)
</span><a href="#local-6989586621680057008"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTLocate 'Shunted (Select &quot;VarPat&quot; 'Shunted) -&gt; ShuntedPattern'
forall {a} (ast :: a).
ASTLocate ast (Select &quot;VarPat&quot; ast) -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#VarPattern"><span class="hs-identifier hs-var">VarPattern</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;VarPat&quot; 'Renamed)
ASTLocate 'Shunted (Select &quot;VarPat&quot; 'Shunted)
</span><a href="#local-6989586621680057008"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>    </span><span class="annot"><a href="#local-6989586621680056995"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#ConstructorPattern"><span class="hs-identifier hs-type">ConstructorPattern</span></a></span><span> </span><span id="local-6989586621680057010"><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;ConPat&quot; 'Renamed)
</span><a href="#local-6989586621680057010"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680057011"><span class="annot"><span class="annottext">[Pattern 'Renamed]
</span><a href="#local-6989586621680057011"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Shunted (Select &quot;ConPat&quot; 'Shunted)
-&gt; [ShuntedPattern] -&gt; ShuntedPattern'
forall {a} (ast :: a).
ASTLocate ast (Select &quot;ConPat&quot; ast)
-&gt; [Pattern ast] -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#ConstructorPattern"><span class="hs-identifier hs-var">ConstructorPattern</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate 'Renamed (Select &quot;ConPat&quot; 'Renamed)
ASTLocate 'Shunted (Select &quot;ConPat&quot; 'Shunted)
</span><a href="#local-6989586621680057010"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">([ShuntedPattern] -&gt; ShuntedPattern')
-&gt; Eff r [ShuntedPattern] -&gt; Eff r ShuntedPattern'
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Pattern 'Renamed -&gt; Eff r ShuntedPattern)
-&gt; [Pattern 'Renamed] -&gt; Eff r [ShuntedPattern]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Pattern 'Renamed -&gt; Eff r ShuntedPattern
forall (r :: [Effect]). Pattern 'Renamed -&gt; Eff r ShuntedPattern
</span><a href="Elara.Shunt.html#shuntPattern"><span class="hs-identifier hs-var">shuntPattern</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern 'Renamed]
</span><a href="#local-6989586621680057011"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-338"></span><span>    </span><span class="annot"><a href="#local-6989586621680056995"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern' 'Renamed
</span><a href="Elara.AST.Generic.Types.html#WildcardPattern"><span class="hs-identifier hs-var">WildcardPattern</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ShuntedPattern'
forall {a} (ast :: a). Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#WildcardPattern"><span class="hs-identifier hs-var">WildcardPattern</span></a></span><span>
</span><span id="line-339"></span><span>    </span><span class="annot"><a href="#local-6989586621680056995"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern' 'Renamed
</span><a href="Elara.AST.Generic.Types.html#UnitPattern"><span class="hs-identifier hs-var">UnitPattern</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ShuntedPattern'
forall {a} (ast :: a). Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#UnitPattern"><span class="hs-identifier hs-var">UnitPattern</span></a></span><span>
</span><span id="line-340"></span><span>    </span><span class="annot"><a href="#local-6989586621680056995"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#IntegerPattern"><span class="hs-identifier hs-type">IntegerPattern</span></a></span><span> </span><span id="local-6989586621680057015"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680057015"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; ShuntedPattern'
forall {a} (ast :: a). Integer -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#IntegerPattern"><span class="hs-identifier hs-var">IntegerPattern</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680057015"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><a href="#local-6989586621680056995"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#FloatPattern"><span class="hs-identifier hs-type">FloatPattern</span></a></span><span> </span><span id="local-6989586621680057017"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680057017"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; ShuntedPattern'
forall {a} (ast :: a). Double -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#FloatPattern"><span class="hs-identifier hs-var">FloatPattern</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680057017"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>    </span><span class="annot"><a href="#local-6989586621680056995"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#StringPattern"><span class="hs-identifier hs-type">StringPattern</span></a></span><span> </span><span id="local-6989586621680057019"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680057019"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ShuntedPattern'
forall {a} (ast :: a). Text -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#StringPattern"><span class="hs-identifier hs-var">StringPattern</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680057019"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>    </span><span class="annot"><a href="#local-6989586621680056995"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#CharPattern"><span class="hs-identifier hs-type">CharPattern</span></a></span><span> </span><span id="local-6989586621680057021"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621680057021"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; ShuntedPattern'
forall {a} (ast :: a). Char -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#CharPattern"><span class="hs-identifier hs-var">CharPattern</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621680057021"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span></pre></body></html>