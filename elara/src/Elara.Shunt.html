<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE BlockArguments #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE ImplicitParams #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE PartialTypeSignatures #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="annot"><span class="hs-comment">{- | This module performs &quot;shunting&quot;, the process of rearranging binary operators in expressions to match their defined precedence and associativity.
The main meat of this module is 'fixOperators', which does the actual rearranging of operators in expressions.
The logic for this is based on https://stackoverflow.com/a/67992584/6272977, which was very helpful :).

Most of the other functions in this module are less interesting and mainly plumbing into the compiler, particularly a lot of boilerplate on traversing the AST.
-}</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Elara.Shunt.html"><span class="hs-identifier">Elara.Shunt</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#runGetOpInfoQuery"><span class="hs-identifier">runGetOpInfoQuery</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#runGetOpTableInQuery"><span class="hs-identifier">runGetOpTableInQuery</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Testing exports</span></span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#fixOperators"><span class="hs-identifier">fixOperators</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#shuntExpr"><span class="hs-identifier">shuntExpr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier">fixExpr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier">ShuntPipelineEffects</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier">OpLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#HasOpLookup"><span class="hs-identifier">HasOpLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Generics.Product</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HasField'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">field'</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Generics.Wrapped</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Eff</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">inject</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(:&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.Error.Static</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Eff</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.State.Static.Local</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">execState</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.Writer.Static.Local</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Eff</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Generic.html"><span class="hs-identifier">Elara.AST.Generic</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Common.html"><span class="hs-identifier">Elara.AST.Generic.Common</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Introspection.html"><span class="hs-identifier">Elara.AST.Introspection</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Module.html"><span class="hs-identifier">Elara.AST.Module</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Name.html"><span class="hs-identifier">Elara.AST.Name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier">ModuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier">Name</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier">Qualified</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier">VarName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#VarOrConName"><span class="hs-identifier">VarOrConName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Region.html"><span class="hs-identifier">Elara.AST.Region</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#IgnoreLocation"><span class="hs-identifier">IgnoreLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#SourceRegion"><span class="hs-identifier">SourceRegion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#sourceRegion"><span class="hs-identifier">sourceRegion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier">unlocated</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#withLocationOf"><span class="hs-identifier">withLocationOf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Region.html"><span class="hs-identifier">Elara.AST.Region</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Located</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html"><span class="hs-identifier">Elara.AST.Renamed</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Select.html"><span class="hs-identifier">Elara.AST.Select</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html"><span class="hs-identifier">Elara.AST.Shunted</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.VarRef.html"><span class="hs-identifier">Elara.AST.VarRef</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.ConstExpr.html"><span class="hs-identifier">Elara.ConstExpr</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Data.Pretty.html"><span class="hs-identifier">Elara.Data.Pretty</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Data.Unique.html"><span class="hs-identifier">Elara.Data.Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier">Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier">Unique</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Error.html"><span class="hs-identifier">Elara.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Error.Effect.html#DiagnosticWriter"><span class="hs-identifier">DiagnosticWriter</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Error.html#ReportableError"><span class="hs-identifier">ReportableError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Error.html#report"><span class="hs-identifier">report</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Error.html#runErrorOrReport"><span class="hs-identifier">runErrorOrReport</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Prim.html"><span class="hs-identifier">Elara.Prim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Prim.html#associativityAnnotationName"><span class="hs-identifier">associativityAnnotationName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Prim.html#fixityAnnotationName"><span class="hs-identifier">fixityAnnotationName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Prim.html#leftAssociativeAnnotationName"><span class="hs-identifier">leftAssociativeAnnotationName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Prim.html#nonAssociativeAnnotationName"><span class="hs-identifier">nonAssociativeAnnotationName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Prim.html#rightAssociativeAnnotationName"><span class="hs-identifier">rightAssociativeAnnotationName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Query.html"><span class="hs-identifier">Elara.Query</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier">Query</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#QueryType"><span class="hs-identifier">QueryType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#SupportsQueries"><span class="hs-identifier">SupportsQueries</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#SupportsQuery"><span class="hs-identifier">SupportsQuery</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Query.Effects.html"><span class="hs-identifier">Elara.Query.Effects</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Query.Errors.html"><span class="hs-identifier">Elara.Query.Errors</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Rename.Error.html"><span class="hs-identifier">Elara.Rename.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Rename.Error.html#RenameError"><span class="hs-identifier">RenameError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Rules.Generic.html"><span class="hs-identifier">Elara.Rules.Generic</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html"><span class="hs-identifier">Elara.Shunt.Error</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html"><span class="hs-identifier">Elara.Shunt.Operator</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Print.html"><span class="hs-identifier">Print</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Print.html#debugPretty"><span class="hs-identifier">debugPretty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Rock.html"><span class="hs-identifier">Rock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier">Rock</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Rock.html#fetch"><span class="hs-identifier">fetch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="TODO.html"><span class="hs-identifier">TODO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="TODO.html#todo"><span class="hs-identifier">todo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Prelude.html"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">modify'</span></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="annot"><span class="hs-comment">{- | The default precedence for an operator if none is specified
&gt;&gt;&gt; defaultPrecedence
Precedence 9
-}</span></span><span>
</span><span id="line-66"></span><span class="annot"><a href="Elara.Shunt.html#defaultPrecedence"><span class="hs-identifier hs-type">defaultPrecedence</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#Precedence"><span class="hs-identifier hs-type">Precedence</span></a></span><span>
</span><span id="line-67"></span><span id="defaultPrecedence"><span class="annot"><span class="annottext">defaultPrecedence :: Precedence
</span><a href="Elara.Shunt.html#defaultPrecedence"><span class="hs-identifier hs-var hs-var">defaultPrecedence</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Precedence
</span><a href="Elara.Shunt.Operator.html#mkPrecedence"><span class="hs-identifier hs-var">mkPrecedence</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="annot"><span class="hs-comment">{- | The default associativity for an operator if none is specified
&gt;&gt;&gt; defaultAssociativity
LeftAssociative
-}</span></span><span>
</span><span id="line-73"></span><span class="annot"><a href="Elara.Shunt.html#defaultAssociativity"><span class="hs-identifier hs-type">defaultAssociativity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#Associativity"><span class="hs-identifier hs-type">Associativity</span></a></span><span>
</span><span id="line-74"></span><span id="defaultAssociativity"><span class="annot"><span class="annottext">defaultAssociativity :: Associativity
</span><a href="Elara.Shunt.html#defaultAssociativity"><span class="hs-identifier hs-var hs-var">defaultAssociativity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#LeftAssociative"><span class="hs-identifier hs-var">LeftAssociative</span></a></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Elara.Query.html#SupportsQuery"><span class="hs-identifier hs-type">SupportsQuery</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryModuleByName"><span class="hs-identifier hs-type">QueryModuleByName</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Shunted"><span class="hs-identifier hs-type">Shunted</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="QuerySpecificEffectsOf"><span class="annot"><a href="Elara.Query.html#QuerySpecificEffectsOf"><span class="hs-identifier hs-var">QuerySpecificEffectsOf</span></a></span></span><span> </span><span class="annot"><a href="Elara.Query.html#QueryModuleByName"><span class="hs-identifier hs-type">QueryModuleByName</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Shunted"><span class="hs-identifier hs-type">Shunted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.Query.Errors.html#StandardQueryError"><span class="hs-identifier hs-type">StandardQueryError</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Shunted"><span class="hs-identifier hs-type">Shunted</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span id="local-6989586621680209050"><span class="annot"><span class="annottext">query :: HasCallStack =&gt;
QueryArgsOf QueryModuleByName Shunted
-&gt; Eff
     (QueryEffectsOf QueryModuleByName Shunted)
     (QueryReturnTypeOf QueryModuleByName Shunted)
</span><a href="#local-6989586621680209050"><span class="hs-identifier hs-var hs-var hs-var">query</span></a></span></span><span> </span><span id="local-6989586621680209052"><span class="annot"><span class="annottext">QueryArgsOf QueryModuleByName Shunted
</span><a href="#local-6989586621680209052"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-79"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621680209053"><span class="annot"><a href="#local-6989586621680209053"><span class="hs-identifier hs-var">mod</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680209054"><span class="annot"><a href="#local-6989586621680209054"><span class="hs-identifier hs-var">warnings</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Eff
  (Writer (Set ShuntWarning)
     : WithRock (ConsQueryEffects '[Error ShuntError]))
  (Module Shunted)
-&gt; Eff
     (WithRock (ConsQueryEffects '[Error ShuntError]))
     (Module Shunted, Set ShuntWarning)
forall w (es :: [(* -&gt; *) -&gt; * -&gt; *]) a.
(HasCallStack, Monoid w) =&gt;
Eff (Writer w : es) a -&gt; Eff es (a, w)
</span><span class="hs-identifier hs-var">Eff.runWriter</span></span><span> </span><span class="annot"><span class="annottext">(Eff
   (Writer (Set ShuntWarning)
      : WithRock (ConsQueryEffects '[Error ShuntError]))
   (Module Shunted)
 -&gt; Eff
      (WithRock (ConsQueryEffects '[Error ShuntError]))
      (Module Shunted, Set ShuntWarning))
-&gt; Eff
     (Writer (Set ShuntWarning)
        : WithRock (ConsQueryEffects '[Error ShuntError]))
     (Module Shunted)
-&gt; Eff
     (WithRock (ConsQueryEffects '[Error ShuntError]))
     (Module Shunted, Set ShuntWarning)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Eff
  (ConsQueryEffects
     '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
  (Module Shunted)
-&gt; Eff
     (Writer (Set ShuntWarning)
        : WithRock (ConsQueryEffects '[Error ShuntError]))
     (Module Shunted)
forall (subEs :: [(* -&gt; *) -&gt; * -&gt; *]) (es :: [(* -&gt; *) -&gt; * -&gt; *])
       a.
Subset subEs es =&gt;
Eff subEs a -&gt; Eff es a
</span><span class="hs-identifier hs-var">inject</span></span><span> </span><span class="annot"><span class="annottext">(Eff
   (ConsQueryEffects
      '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
   (Module Shunted)
 -&gt; Eff
      (Writer (Set ShuntWarning)
         : WithRock (ConsQueryEffects '[Error ShuntError]))
      (Module Shunted))
-&gt; Eff
     (ConsQueryEffects
        '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module Shunted)
-&gt; Eff
     (Writer (Set ShuntWarning)
        : WithRock (ConsQueryEffects '[Error ShuntError]))
     (Module Shunted)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
-&gt; Eff
     (ConsQueryEffects
        '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module Shunted)
</span><a href="Elara.Shunt.html#runGetShuntedModuleQuery"><span class="hs-identifier hs-var">runGetShuntedModuleQuery</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
QueryArgsOf QueryModuleByName Shunted
</span><a href="#local-6989586621680209052"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-80"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">traverse_</span></span><span> </span><span class="annot"><a href="Elara.Error.html#report"><span class="hs-identifier hs-type">report</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209054"><span class="hs-identifier hs-type">warnings</span></a></span><span>
</span><span id="line-81"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="#local-6989586621680209053"><span class="hs-identifier hs-type">mod</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Elara.AST.Introspection.html#IntrospectableAnnotations"><span class="hs-identifier hs-type">IntrospectableAnnotations</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Shunted"><span class="hs-identifier hs-type">Shunted</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-84"></span><span>    </span><span id="local-6989586621680209061"><span class="annot"><span class="annottext">getAnnotations :: forall (sel :: ForSelector).
Select (Annotations sel) Shunted -&gt; [Annotation Shunted]
</span><a href="#local-6989586621680209061"><span class="hs-identifier hs-var hs-var hs-var">getAnnotations</span></a></span></span><span> </span><span id="local-6989586621680209063"><span class="annot"><span class="annottext">Select (Annotations sel) Shunted
</span><a href="#local-6989586621680209063"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Annotation Shunted]
Select (Annotations sel) Shunted
</span><a href="#local-6989586621680209063"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="annot"><span class="hs-comment">{- | A function that can lookup operator info.
This module only instantiates this function with a value that looks up operator info from the AST, but
other implementations are possible, e.g. a hardcoded table, which may be useful for primitives or testing.
-}</span></span><span>
</span><span id="line-90"></span><span class="hs-keyword">type</span><span> </span><span id="OpLookup"><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-var">OpLookup</span></a></span></span><span> </span><span id="local-6989586621680209064"><span class="annot"><a href="#local-6989586621680209064"><span class="hs-identifier hs-type">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Elara.AST.VarRef.html#IgnoreLocVarRef"><span class="hs-identifier hs-type">IgnoreLocVarRef</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680209064"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-type">OpInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Elara.Shunt.html#InExpr"><span class="hs-identifier hs-type">InExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr%27"><span class="hs-identifier hs-type">RenamedExpr'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span>
</span><span id="line-93"></span><span class="hs-keyword">pattern</span><span> </span><span id="InExpr"><span id="%24mInExpr"><span class="annot"><span class="annottext">$mInExpr :: forall {r}. RenamedExpr -&gt; (RenamedExpr' -&gt; r) -&gt; ((# #) -&gt; r) -&gt; r
</span><a href="Elara.Shunt.html#InExpr"><span class="hs-identifier hs-var hs-var">InExpr</span></a></span></span></span><span> </span><span class="annot"><a href="#local-6989586621680209067"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680209067"><span class="annot"><a href="#local-6989586621680209067"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Elara.Shunt.html#InExpr%27"><span class="hs-identifier hs-type">InExpr'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#SourceRegion"><span class="hs-identifier hs-type">SourceRegion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr%27"><span class="hs-identifier hs-type">RenamedExpr'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span>
</span><span id="line-96"></span><span class="hs-keyword">pattern</span><span> </span><span id="InExpr%27"><span id="%24mInExpr%27"><span class="annot"><span class="annottext">$mInExpr' :: forall {r}.
RenamedExpr
-&gt; (SourceRegion -&gt; RenamedExpr' -&gt; r) -&gt; ((# #) -&gt; r) -&gt; r
</span><a href="Elara.Shunt.html#InExpr%27"><span class="hs-identifier hs-var hs-var">InExpr'</span></a></span></span></span><span> </span><span class="annot"><a href="#local-6989586621680209072"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209073"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span id="local-6989586621680209072"><span class="annot"><a href="#local-6989586621680209072"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680209073"><span class="annot"><a href="#local-6989586621680209073"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="annot"><span class="hs-comment">-- | Run the @'Elara.Query.QueryModuleByName' 'Shunted'@ query, which shunts a renamed module</span></span><span>
</span><span id="line-99"></span><span class="annot"><a href="Elara.Shunt.html#runGetShuntedModuleQuery"><span class="hs-identifier hs-type">runGetShuntedModuleQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-100"></span><span>    </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span>
</span><span id="line-102"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span>
</span><span id="line-103"></span><span>            </span><span class="hs-special">'</span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Error</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntError"><span class="hs-identifier hs-type">ShuntError</span></a></span><span>
</span><span id="line-104"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntWarning"><span class="hs-identifier hs-type">ShuntWarning</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Elara.Query.Query</span></a></span><span>
</span><span id="line-106"></span><span>             </span><span class="hs-special">]</span><span>
</span><span id="line-107"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Shunted"><span class="hs-identifier hs-type">Shunted</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span id="runGetShuntedModuleQuery"><span class="annot"><span class="annottext">runGetShuntedModuleQuery :: ModuleName
-&gt; Eff
     (ConsQueryEffects
        '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module Shunted)
</span><a href="Elara.Shunt.html#runGetShuntedModuleQuery"><span class="hs-identifier hs-var hs-var">runGetShuntedModuleQuery</span></a></span></span><span> </span><span id="local-6989586621680209170"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680209170"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-110"></span><span>    </span><span id="local-6989586621680209171"><span class="annot"><a href="#local-6989586621680209171"><span class="hs-identifier hs-var">renamed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e (r :: [(* -&gt; *) -&gt; * -&gt; *]) a.
(DiagnosticWriter (Doc AnsiStyle) :&gt; r,
 Error SomeReportableError :&gt; r, ReportableError e) =&gt;
Eff (Error e : r) a -&gt; Eff r a
</span><a href="Elara.Error.html#runErrorOrReport"><span class="hs-identifier hs-var">runErrorOrReport</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Elara.Rename.Error.html#RenameError"><span class="hs-identifier hs-type">RenameError</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff
   (Error RenameError
      : ConsQueryEffects
          '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
   (Module Renamed)
 -&gt; Eff
      (ConsQueryEffects
         '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
      (Module Renamed))
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects
            '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module Renamed)
-&gt; Eff
     (ConsQueryEffects
        '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Query
  (Rock Query : ConsQueryEffects '[Error RenameError])
  (Module Renamed)
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects
            '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module Renamed)
forall (xs :: [(* -&gt; *) -&gt; * -&gt; *]) (es :: [(* -&gt; *) -&gt; * -&gt; *])
       (f :: [(* -&gt; *) -&gt; * -&gt; *] -&gt; * -&gt; *) a.
(Subset xs es, Rock f :&gt; es, HasCallStack,
 StructuredDebug :&gt; xs) =&gt;
f xs a -&gt; Eff es a
</span><a href="Rock.html#fetch"><span class="hs-identifier hs-var">Rock.fetch</span></a></span><span> </span><span class="annot"><span class="annottext">(Query
   (Rock Query : ConsQueryEffects '[Error RenameError])
   (Module Renamed)
 -&gt; Eff
      (Error RenameError
         : ConsQueryEffects
             '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
      (Module Renamed))
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error RenameError])
     (Module Renamed)
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects
            '[Error ShuntError, Writer (Set ShuntWarning), Rock Query])
     (Module Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error RenameError])
     (Module Renamed)
</span><a href="Elara.Query.html#RenamedModule"><span class="hs-identifier hs-var">Elara.Query.RenamedModule</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680209170"><span class="hs-identifier hs-var">mn</span></a></span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#shuntWith"><span class="hs-identifier hs-type">shuntWith</span></a></span><span> </span><span class="annot"><a href="Elara.Shunt.html#opLookupQueries"><span class="hs-identifier hs-type">opLookupQueries</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209171"><span class="hs-identifier hs-type">renamed</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="annot"><span class="hs-comment">-- | An 'OpLookup' that uses the 'Elara.Query.GetOpInfo' query to get operator info, i.e. derives it from the AST annotations.</span></span><span>
</span><span id="line-114"></span><span id="local-6989586621680208473"><span class="annot"><a href="Elara.Shunt.html#opLookupQueries"><span class="hs-identifier hs-type">opLookupQueries</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Error</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntError"><span class="hs-identifier hs-type">ShuntError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680208473"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680208473"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntWarning"><span class="hs-identifier hs-type">ShuntWarning</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680208473"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.Effects.html#QueryEffects"><span class="hs-identifier hs-type">QueryEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208473"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208473"><span class="hs-identifier hs-type">es</span></a></span></span><span>
</span><span id="line-121"></span><span id="opLookupQueries"><span class="annot"><span class="annottext">opLookupQueries :: forall (es :: [(* -&gt; *) -&gt; * -&gt; *]).
(Error ShuntError :&gt; es, Rock Query :&gt; es,
 Writer (Set ShuntWarning) :&gt; es, QueryEffects es) =&gt;
OpLookup es
</span><a href="Elara.Shunt.html#opLookupQueries"><span class="hs-identifier hs-var hs-var">opLookupQueries</span></a></span></span><span> </span><span id="local-6989586621680209207"><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680209207"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Query
  (Rock Query
     : ConsQueryEffects '[Writer (Set ShuntWarning), Error ShuntError])
  (Maybe OpInfo)
-&gt; Eff es (Maybe OpInfo)
forall (xs :: [(* -&gt; *) -&gt; * -&gt; *]) (es :: [(* -&gt; *) -&gt; * -&gt; *])
       (f :: [(* -&gt; *) -&gt; * -&gt; *] -&gt; * -&gt; *) a.
(Subset xs es, Rock f :&gt; es, HasCallStack,
 StructuredDebug :&gt; xs) =&gt;
f xs a -&gt; Eff es a
</span><a href="Rock.html#fetch"><span class="hs-identifier hs-var">Rock.fetch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IgnoreLocVarRef Name
-&gt; Query
     (Rock Query
        : ConsQueryEffects '[Writer (Set ShuntWarning), Error ShuntError])
     (Maybe OpInfo)
</span><a href="Elara.Query.html#GetOpInfo"><span class="hs-identifier hs-var">Elara.Query.GetOpInfo</span></a></span><span> </span><span class="annot"><span class="annottext">IgnoreLocVarRef Name
</span><a href="#local-6989586621680209207"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="annot"><span class="hs-comment">-- | Run the @'Elara.Query.GetOpInfo'@ query to get operator info for a given operator</span></span><span>
</span><span id="line-124"></span><span class="annot"><a href="Elara.Shunt.html#runGetOpInfoQuery"><span class="hs-identifier hs-type">runGetOpInfoQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><a href="Elara.Query.html#SupportsQueries"><span class="hs-identifier hs-type">SupportsQueries</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Elara.Query.html#QueryDeclarationByName"><span class="hs-identifier hs-type">QueryDeclarationByName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotations"><span class="hs-identifier hs-type">DeclarationAnnotations</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Query.html#QueryConstructorDeclaration"><span class="hs-identifier hs-type">QueryConstructorDeclaration</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-126"></span><span>    </span><span class="annot"><a href="Elara.AST.VarRef.html#IgnoreLocVarRef"><span class="hs-identifier hs-type">IgnoreLocVarRef</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span>
</span><span id="line-128"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span>
</span><span id="line-129"></span><span>            </span><span class="hs-special">'</span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntWarning"><span class="hs-identifier hs-type">ShuntWarning</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Error</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntError"><span class="hs-identifier hs-type">ShuntError</span></a></span><span>
</span><span id="line-131"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Elara.Query.Query</span></a></span><span>
</span><span id="line-132"></span><span>             </span><span class="hs-special">]</span><span>
</span><span id="line-133"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-type">OpInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span id="runGetOpInfoQuery"><span class="annot"><span class="annottext">runGetOpInfoQuery :: SupportsQueries
  '[QueryDeclarationByName, DeclarationAnnotations,
    QueryConstructorDeclaration]
  Renamed =&gt;
IgnoreLocVarRef Name
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe OpInfo)
</span><a href="Elara.Shunt.html#runGetOpInfoQuery"><span class="hs-identifier hs-var hs-var">runGetOpInfoQuery</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.VarRef.html#Global"><span class="hs-identifier hs-type">Global</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#IgnoreLocation"><span class="hs-identifier hs-type">IgnoreLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680209396"><span class="annot"><span class="annottext">Qualified Name
</span><a href="#local-6989586621680209396"><span class="hs-identifier hs-var">declName</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-136"></span><span>    </span><span id="local-6989586621680209397"><span class="annot"><a href="#local-6989586621680209397"><span class="hs-identifier hs-var">fixityAnns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e (r :: [(* -&gt; *) -&gt; * -&gt; *]) a.
(DiagnosticWriter (Doc AnsiStyle) :&gt; r,
 Error SomeReportableError :&gt; r, ReportableError e) =&gt;
Eff (Error e : r) a -&gt; Eff r a
</span><a href="Elara.Error.html#runErrorOrReport"><span class="hs-identifier hs-var">runErrorOrReport</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Elara.Rename.Error.html#RenameError"><span class="hs-identifier hs-type">RenameError</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff
   (Error RenameError
      : ConsQueryEffects
          '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
   (QueryReturnTypeOf DeclarationAnnotations Renamed)
 -&gt; Eff
      (ConsQueryEffects
         '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
      (QueryReturnTypeOf DeclarationAnnotations Renamed))
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects
            '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (QueryReturnTypeOf DeclarationAnnotations Renamed)
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (QueryReturnTypeOf DeclarationAnnotations Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Query
  (QueryEffectsOf DeclarationAnnotations Renamed)
  (QueryReturnTypeOf DeclarationAnnotations Renamed)
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects
            '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (QueryReturnTypeOf DeclarationAnnotations Renamed)
forall (xs :: [(* -&gt; *) -&gt; * -&gt; *]) (es :: [(* -&gt; *) -&gt; * -&gt; *])
       (f :: [(* -&gt; *) -&gt; * -&gt; *] -&gt; * -&gt; *) a.
(Subset xs es, Rock f :&gt; es, HasCallStack,
 StructuredDebug :&gt; xs) =&gt;
f xs a -&gt; Eff es a
</span><a href="Rock.html#fetch"><span class="hs-identifier hs-var">Rock.fetch</span></a></span><span> </span><span class="annot"><span class="annottext">(Query
   (QueryEffectsOf DeclarationAnnotations Renamed)
   (QueryReturnTypeOf DeclarationAnnotations Renamed)
 -&gt; Eff
      (Error RenameError
         : ConsQueryEffects
             '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
      (QueryReturnTypeOf DeclarationAnnotations Renamed))
-&gt; Query
     (QueryEffectsOf DeclarationAnnotations Renamed)
     (QueryReturnTypeOf DeclarationAnnotations Renamed)
-&gt; Eff
     (Error RenameError
        : ConsQueryEffects
            '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (QueryReturnTypeOf DeclarationAnnotations Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (ast :: LocatedAST).
(Typeable ast, SupportsQuery DeclarationAnnotationsOfType ast) =&gt;
QueryArgsOf DeclarationAnnotationsOfType ast
-&gt; Query
     (QueryEffectsOf DeclarationAnnotations ast)
     (QueryReturnTypeOf DeclarationAnnotations ast)
</span><a href="Elara.Query.html#DeclarationAnnotationsOfType"><span class="hs-identifier hs-var">Elara.Query.DeclarationAnnotationsOfType</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Qualified Name
</span><a href="#local-6989586621680209396"><span class="hs-identifier hs-var">declName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="Elara.Prim.html#fixityAnnotationName"><span class="hs-identifier hs-var">fixityAnnotationName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>    </span><span id="local-6989586621680209399"><span class="annot"><a href="#local-6989586621680209399"><span class="hs-identifier hs-var">assocAnns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.Error.html#runErrorOrReport"><span class="hs-identifier hs-type">runErrorOrReport</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Elara.Rename.Error.html#RenameError"><span class="hs-identifier hs-type">RenameError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Rock.html#fetch"><span class="hs-identifier hs-type">Rock.fetch</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Elara.Query.html#DeclarationAnnotationsOfType"><span class="hs-identifier hs-type">Elara.Query.DeclarationAnnotationsOfType</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680209396"><span class="hs-identifier hs-type">declName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Prim.html#associativityAnnotationName"><span class="hs-identifier hs-type">associativityAnnotationName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-comment">-- It may be intuitive that if we received an ill-formed annotation, eg</span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-comment">-- @#Fixity &quot;f&quot;@ that we would throw an error</span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-comment">-- however, we instead choose to just ignore the annotation</span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-comment">-- and let the type checker handle this later on</span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-comment">-- otherwise it we have to do a &quot;mini-type-check&quot; here to validate the annotation</span><span>
</span><span id="line-143"></span><span>    </span><span id="local-6989586621680209400"><span class="annot"><a href="#local-6989586621680209400"><span class="hs-identifier hs-var">fixity</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621680209397"><span class="hs-identifier hs-type">fixityAnns</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-144"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Precedence
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Precedence)
forall a.
a
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe Precedence
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-145"></span><span>        </span><span class="hs-special">[</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate Renamed (Select AnnotationName Renamed)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621680209402"><span class="annot"><span class="annottext">AnnotationArg Renamed
</span><a href="#local-6989586621680209402"><span class="hs-identifier hs-var">fixityArg</span></a></span></span><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-146"></span><span>            </span><span id="local-6989586621680209403"><span class="annot"><a href="#local-6989586621680209403"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AnnotationArg Renamed
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     ConstVal
forall {a} (ast :: a) (r :: [(* -&gt; *) -&gt; * -&gt; *]).
RUnlocate ast =&gt;
AnnotationArg ast -&gt; Eff r ConstVal
</span><a href="Elara.ConstExpr.html#interpretAnnotationArg"><span class="hs-identifier hs-var">interpretAnnotationArg</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotationArg Renamed
</span><a href="#local-6989586621680209402"><span class="hs-identifier hs-var">fixityArg</span></a></span><span>
</span><span id="line-147"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621680209403"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-148"></span><span>                </span><span class="annot"><a href="Elara.ConstExpr.html#ConstInt"><span class="hs-identifier hs-type">ConstInt</span></a></span><span> </span><span id="local-6989586621680209406"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680209406"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680209406"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680209406"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">9</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Precedence
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Precedence)
forall a.
a
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Precedence
 -&gt; Eff
      (ConsQueryEffects
         '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
      (Maybe Precedence))
-&gt; Maybe Precedence
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Precedence)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Precedence -&gt; Maybe Precedence
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Precedence
</span><a href="Elara.Shunt.Operator.html#mkPrecedence"><span class="hs-identifier hs-var">mkPrecedence</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680209406"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>                </span><span id="local-6989586621680209409"><span class="annot"><span class="annottext">ConstVal
</span><a href="#local-6989586621680209409"><span class="hs-identifier hs-var">_invalid</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Precedence
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Precedence)
forall a.
a
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe Precedence
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-150"></span><span>        </span><span id="local-6989586621680209410"><span class="annot"><span class="annottext">QueryReturnTypeOf DeclarationAnnotations Renamed
</span><a href="#local-6989586621680209410"><span class="hs-identifier hs-var">_invalid</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Precedence
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Precedence)
forall a.
a
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe Precedence
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span>    </span><span id="local-6989586621680209411"><span class="annot"><a href="#local-6989586621680209411"><span class="hs-identifier hs-var">assoc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621680209399"><span class="hs-identifier hs-type">assocAnns</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-153"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Associativity
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Associativity)
forall a.
a
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe Associativity
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-154"></span><span>        </span><span class="hs-special">[</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span id="local-6989586621680209412"><span class="annot"><span class="annottext">ASTLocate Renamed (Select AnnotationName Renamed)
</span><a href="#local-6989586621680209412"><span class="hs-identifier hs-var">lAssoc</span></a></span></span><span> </span><span class="annot"><span class="annottext">[AnnotationArg Renamed]
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Located (Qualified TypeName)
ASTLocate Renamed (Select AnnotationName Renamed)
</span><a href="#local-6989586621680209412"><span class="hs-identifier hs-var">lAssoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located (Qualified TypeName)
-&gt; Optic'
     A_Lens NoIx (Located (Qualified TypeName)) (Qualified TypeName)
-&gt; Qualified TypeName
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic'
  A_Lens NoIx (Located (Qualified TypeName)) (Qualified TypeName)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName -&gt; Qualified TypeName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="Elara.Prim.html#leftAssociativeAnnotationName"><span class="hs-identifier hs-var">leftAssociativeAnnotationName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Associativity
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Associativity)
forall a.
a
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Associativity
 -&gt; Eff
      (ConsQueryEffects
         '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
      (Maybe Associativity))
-&gt; Maybe Associativity
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Associativity)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Associativity -&gt; Maybe Associativity
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#LeftAssociative"><span class="hs-identifier hs-var">LeftAssociative</span></a></span><span>
</span><span id="line-155"></span><span>        </span><span class="hs-special">[</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span id="local-6989586621680209414"><span class="annot"><span class="annottext">ASTLocate Renamed (Select AnnotationName Renamed)
</span><a href="#local-6989586621680209414"><span class="hs-identifier hs-var">rAssoc</span></a></span></span><span> </span><span class="annot"><span class="annottext">[AnnotationArg Renamed]
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Located (Qualified TypeName)
ASTLocate Renamed (Select AnnotationName Renamed)
</span><a href="#local-6989586621680209414"><span class="hs-identifier hs-var">rAssoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located (Qualified TypeName)
-&gt; Optic'
     A_Lens NoIx (Located (Qualified TypeName)) (Qualified TypeName)
-&gt; Qualified TypeName
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic'
  A_Lens NoIx (Located (Qualified TypeName)) (Qualified TypeName)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName -&gt; Qualified TypeName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="Elara.Prim.html#rightAssociativeAnnotationName"><span class="hs-identifier hs-var">rightAssociativeAnnotationName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Associativity
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Associativity)
forall a.
a
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Associativity
 -&gt; Eff
      (ConsQueryEffects
         '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
      (Maybe Associativity))
-&gt; Maybe Associativity
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Associativity)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Associativity -&gt; Maybe Associativity
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#RightAssociative"><span class="hs-identifier hs-var">RightAssociative</span></a></span><span>
</span><span id="line-156"></span><span>        </span><span class="hs-special">[</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span id="local-6989586621680209416"><span class="annot"><span class="annottext">ASTLocate Renamed (Select AnnotationName Renamed)
</span><a href="#local-6989586621680209416"><span class="hs-identifier hs-var">nAssoc</span></a></span></span><span> </span><span class="annot"><span class="annottext">[AnnotationArg Renamed]
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Located (Qualified TypeName)
ASTLocate Renamed (Select AnnotationName Renamed)
</span><a href="#local-6989586621680209416"><span class="hs-identifier hs-var">nAssoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located (Qualified TypeName)
-&gt; Optic'
     A_Lens NoIx (Located (Qualified TypeName)) (Qualified TypeName)
-&gt; Qualified TypeName
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic'
  A_Lens NoIx (Located (Qualified TypeName)) (Qualified TypeName)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName -&gt; Qualified TypeName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Qualified TypeName
</span><a href="Elara.Prim.html#nonAssociativeAnnotationName"><span class="hs-identifier hs-var">nonAssociativeAnnotationName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Associativity
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Associativity)
forall a.
a
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Associativity
 -&gt; Eff
      (ConsQueryEffects
         '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
      (Maybe Associativity))
-&gt; Maybe Associativity
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Associativity)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Associativity -&gt; Maybe Associativity
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#NonAssociative"><span class="hs-identifier hs-var">NonAssociative</span></a></span><span>
</span><span id="line-157"></span><span>        </span><span id="local-6989586621680209418"><span class="annot"><span class="annottext">QueryReturnTypeOf DeclarationAnnotations Renamed
</span><a href="#local-6989586621680209418"><span class="hs-identifier hs-var">_invalid</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Associativity
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe Associativity)
forall a.
a
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe Associativity
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680209400"><span class="hs-identifier hs-type">fixity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680209411"><span class="hs-identifier hs-type">assoc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-160"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680209419"><span class="annot"><span class="annottext">Precedence
</span><a href="#local-6989586621680209419"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680209420"><span class="annot"><span class="annottext">Associativity
</span><a href="#local-6989586621680209420"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OpInfo -&gt; Maybe OpInfo
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Precedence -&gt; Associativity -&gt; OpInfo
</span><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-var">OpInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Precedence
</span><a href="#local-6989586621680209419"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="#local-6989586621680209420"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Precedence
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680209422"><span class="annot"><span class="annottext">Associativity
</span><a href="#local-6989586621680209422"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OpInfo -&gt; Maybe OpInfo
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Precedence -&gt; Associativity -&gt; OpInfo
</span><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-var">OpInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Precedence
</span><a href="Elara.Shunt.html#defaultPrecedence"><span class="hs-identifier hs-var">defaultPrecedence</span></a></span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="#local-6989586621680209422"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680209423"><span class="annot"><span class="annottext">Precedence
</span><a href="#local-6989586621680209423"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Associativity
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OpInfo -&gt; Maybe OpInfo
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Precedence -&gt; Associativity -&gt; OpInfo
</span><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-var">OpInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Precedence
</span><a href="#local-6989586621680209423"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.html#defaultAssociativity"><span class="hs-identifier hs-var">defaultAssociativity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Precedence
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Associativity
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OpInfo -&gt; Maybe OpInfo
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Precedence -&gt; Associativity -&gt; OpInfo
</span><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-var">OpInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Precedence
</span><a href="Elara.Shunt.html#defaultPrecedence"><span class="hs-identifier hs-var">defaultPrecedence</span></a></span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.html#defaultAssociativity"><span class="hs-identifier hs-var">defaultAssociativity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span class="annot"><a href="Elara.Shunt.html#runGetOpInfoQuery"><span class="hs-identifier hs-var">runGetOpInfoQuery</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.VarRef.html#Local"><span class="hs-identifier hs-type">Local</span></a></span><span> </span><span id="local-6989586621680209425"><span class="annot"><span class="annottext">VarRefImpl IgnoreLocVarRefKind (Unique Name)
</span><a href="#local-6989586621680209425"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><span class="annottext">ShuntError
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe OpInfo)
forall e (es :: [(* -&gt; *) -&gt; * -&gt; *]) a.
(HasCallStack, Error e :&gt; es, Show e) =&gt;
e -&gt; Eff es a
</span><span class="hs-identifier hs-var">Eff.throwError</span></span><span> </span><span class="annot"><span class="annottext">(ShuntError
 -&gt; Eff
      (ConsQueryEffects
         '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
      (Maybe OpInfo))
-&gt; ShuntError
-&gt; Eff
     (ConsQueryEffects
        '[Writer (Set ShuntWarning), Error ShuntError, Rock Query])
     (Maybe OpInfo)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Located (Unique Name) -&gt; ShuntError
</span><a href="Elara.Shunt.Error.html#LocalOperatorInfoNotSupported"><span class="hs-identifier hs-var">LocalOperatorInfoNotSupported</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IgnoreLocation (Unique Name)
VarRefImpl IgnoreLocVarRefKind (Unique Name)
</span><a href="#local-6989586621680209425"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">IgnoreLocation (Unique Name)
-&gt; Optic'
     An_Iso NoIx (IgnoreLocation (Unique Name)) (Located (Unique Name))
-&gt; Located (Unique Name)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic'
  An_Iso NoIx (IgnoreLocation (Unique Name)) (Located (Unique Name))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="annot"><span class="hs-comment">-- | Run the @'Elara.Query.GetOpTableIn'@ query to get the operator table for a module</span></span><span>
</span><span id="line-168"></span><span class="annot"><a href="Elara.Shunt.html#runGetOpTableInQuery"><span class="hs-identifier hs-type">runGetOpTableInQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Query.Effects.html#ConsQueryEffects"><span class="hs-identifier hs-type">ConsQueryEffects</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Elara.Query.Query</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpTable"><span class="hs-identifier hs-type">OpTable</span></a></span><span>
</span><span id="line-169"></span><span id="runGetOpTableInQuery"><span class="annot"><span class="annottext">runGetOpTableInQuery :: ModuleName -&gt; Eff (ConsQueryEffects '[Rock Query]) OpTable
</span><a href="Elara.Shunt.html#runGetOpTableInQuery"><span class="hs-identifier hs-var hs-var">runGetOpTableInQuery</span></a></span></span><span> </span><span id="local-6989586621680209498"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680209498"><span class="hs-identifier hs-var">moduleName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-170"></span><span>    </span><span id="local-6989586621680209499"><span class="annot"><a href="#local-6989586621680209499"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e (r :: [(* -&gt; *) -&gt; * -&gt; *]) a.
(DiagnosticWriter (Doc AnsiStyle) :&gt; r,
 Error SomeReportableError :&gt; r, ReportableError e) =&gt;
Eff (Error e : r) a -&gt; Eff r a
</span><a href="Elara.Error.html#runErrorOrReport"><span class="hs-identifier hs-var">runErrorOrReport</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Elara.Rename.Error.html#RenameError"><span class="hs-identifier hs-type">RenameError</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff
   (Error RenameError : ConsQueryEffects '[Rock Query])
   (Module Renamed)
 -&gt; Eff (ConsQueryEffects '[Rock Query]) (Module Renamed))
-&gt; Eff
     (Error RenameError : ConsQueryEffects '[Rock Query])
     (Module Renamed)
-&gt; Eff (ConsQueryEffects '[Rock Query]) (Module Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Query
  (Rock Query : ConsQueryEffects '[Error RenameError])
  (Module Renamed)
-&gt; Eff
     (Error RenameError : ConsQueryEffects '[Rock Query])
     (Module Renamed)
forall (xs :: [(* -&gt; *) -&gt; * -&gt; *]) (es :: [(* -&gt; *) -&gt; * -&gt; *])
       (f :: [(* -&gt; *) -&gt; * -&gt; *] -&gt; * -&gt; *) a.
(Subset xs es, Rock f :&gt; es, HasCallStack,
 StructuredDebug :&gt; xs) =&gt;
f xs a -&gt; Eff es a
</span><a href="Rock.html#fetch"><span class="hs-identifier hs-var">Rock.fetch</span></a></span><span> </span><span class="annot"><span class="annottext">(Query
   (Rock Query : ConsQueryEffects '[Error RenameError])
   (Module Renamed)
 -&gt; Eff
      (Error RenameError : ConsQueryEffects '[Rock Query])
      (Module Renamed))
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error RenameError])
     (Module Renamed)
-&gt; Eff
     (Error RenameError : ConsQueryEffects '[Rock Query])
     (Module Renamed)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
-&gt; Query
     (Rock Query : ConsQueryEffects '[Error RenameError])
     (Module Renamed)
</span><a href="Elara.Query.html#RenamedModule"><span class="hs-identifier hs-var">Elara.Query.RenamedModule</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680209498"><span class="hs-identifier hs-var">moduleName</span></a></span><span>
</span><span id="line-171"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#createOpTable"><span class="hs-identifier hs-type">createOpTable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209499"><span class="hs-identifier hs-type">mod</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="annot"><span class="hs-comment">{- | Create a operator table from a renamed module.
This scans all declarations in the module for fixity and associativity annotations.
-}</span></span><span>
</span><span id="line-176"></span><span id="local-6989586621680208567"><span class="annot"><a href="Elara.Shunt.html#createOpTable"><span class="hs-identifier hs-type">createOpTable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208567"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpTable"><span class="hs-identifier hs-type">OpTable</span></a></span></span><span>
</span><span id="line-177"></span><span id="createOpTable"><span class="annot"><span class="annottext">createOpTable :: forall (es :: [(* -&gt; *) -&gt; * -&gt; *]).
Module Renamed -&gt; Eff es OpTable
</span><a href="Elara.Shunt.html#createOpTable"><span class="hs-identifier hs-var hs-var">createOpTable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OpTable -&gt; Eff (State OpTable : es) () -&gt; Eff es OpTable
forall s (es :: [(* -&gt; *) -&gt; * -&gt; *]) a.
HasCallStack =&gt;
s -&gt; Eff (State s : es) a -&gt; Eff es s
</span><span class="hs-identifier hs-var">execState</span></span><span> </span><span class="annot"><span class="annottext">OpTable
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">(Eff (State OpTable : es) () -&gt; Eff es OpTable)
-&gt; (Module Renamed -&gt; Eff (State OpTable : es) ())
-&gt; Module Renamed
-&gt; Eff es OpTable
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Declaration Renamed -&gt; Eff (State OpTable : es) ())
-&gt; Module Renamed -&gt; Eff (State OpTable : es) ()
forall a4 (f :: * -&gt; *) s1 {s} {t :: * -&gt; *}.
(ErrorUnlessOnlyOne s1 (Rep s1), Applicative f, Generic s1,
 GWrapped (Rep s1) (Rep s1) (Located s) (Located s),
 UnifyHead s1 s1, Foldable t, HasField' &quot;declarations&quot; s (t a4)) =&gt;
(a4 -&gt; f ()) -&gt; s1 -&gt; f ()
</span><a href="Elara.AST.Module.html#traverseModule_"><span class="hs-identifier hs-var">traverseModule_</span></a></span><span> </span><span class="annot"><span class="annottext">Declaration Renamed -&gt; Eff (State OpTable : es) ()
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]). Declaration Renamed -&gt; Eff r ()
</span><a href="Elara.Shunt.html#addDeclsToOpTable%27"><span class="hs-identifier hs-var">addDeclsToOpTable'</span></a></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="annot"><span class="hs-comment">{- | Add declarations to an operator table.
This function is incomplete and does not do anything useful yet.
-}</span></span><span>
</span><span id="line-182"></span><span id="local-6989586621680208635"><span class="annot"><a href="Elara.Shunt.html#addDeclsToOpTable%27"><span class="hs-identifier hs-type">addDeclsToOpTable'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-type">Declaration</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208635"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-183"></span><span id="addDeclsToOpTable%27"><span class="annot"><span class="annottext">addDeclsToOpTable' :: forall (r :: [(* -&gt; *) -&gt; * -&gt; *]). Declaration Renamed -&gt; Eff r ()
</span><a href="Elara.Shunt.html#addDeclsToOpTable%27"><span class="hs-identifier hs-var hs-var">addDeclsToOpTable'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-type">Declaration</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680209619"><span class="annot"><span class="annottext">Declaration' Renamed
</span><a href="#local-6989586621680209619"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Declaration' Renamed
</span><a href="#local-6989586621680209619"><span class="hs-identifier hs-var">decl</span></a></span><span> </span><span class="annot"><span class="annottext">Declaration' Renamed
-&gt; Optic'
     A_Lens NoIx (Declaration' Renamed) (DeclarationBody' Renamed)
-&gt; DeclarationBody' Renamed
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">forall (field :: Symbol) s a. HasField' field s a =&gt; Lens s s a a
</span><span class="hs-identifier hs-var">field'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;body&quot;</span></span><span> </span><span class="annot"><span class="annottext">Lens
  (Declaration' Renamed)
  (Declaration' Renamed)
  (DeclarationBody Renamed)
  (DeclarationBody Renamed)
-&gt; Optic
     An_Iso
     NoIx
     (DeclarationBody Renamed)
     (DeclarationBody Renamed)
     (Located (DeclarationBody' Renamed))
     (Located (DeclarationBody' Renamed))
-&gt; Optic
     A_Lens
     NoIx
     (Declaration' Renamed)
     (Declaration' Renamed)
     (Located (DeclarationBody' Renamed))
     (Located (DeclarationBody' Renamed))
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  An_Iso
  NoIx
  (DeclarationBody Renamed)
  (DeclarationBody Renamed)
  (Located (DeclarationBody' Renamed))
  (Located (DeclarationBody' Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Declaration' Renamed)
  (Declaration' Renamed)
  (Located (DeclarationBody' Renamed))
  (Located (DeclarationBody' Renamed))
-&gt; Optic
     A_Lens
     NoIx
     (Located (DeclarationBody' Renamed))
     (Located (DeclarationBody' Renamed))
     (DeclarationBody' Renamed)
     (DeclarationBody' Renamed)
-&gt; Optic'
     A_Lens NoIx (Declaration' Renamed) (DeclarationBody' Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (DeclarationBody' Renamed))
  (Located (DeclarationBody' Renamed))
  (DeclarationBody' Renamed)
  (DeclarationBody' Renamed)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-184"></span><span>    </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span class="hs-special">{</span><span id="local-6989586621680209622"><span class="annot"><span class="annottext">CleanupLocated
  (ASTLocate' Renamed (Select (ASTName ForValueDecl) Renamed))
_valueName :: CleanupLocated
  (ASTLocate' Renamed (Select (ASTName ForValueDecl) Renamed))
_valueName :: forall a (ast :: a).
DeclarationBody' ast
-&gt; ASTLocate ast (Select (ASTName ForValueDecl) ast)
</span><a href="#local-6989586621680209622"><span class="hs-identifier hs-var hs-var">_valueName</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_valueAnnotations :: forall a (ast :: a).
DeclarationBody' ast -&gt; ValueDeclAnnotations ast
</span><a href="Elara.AST.Generic.Types.html#_valueAnnotations"><span class="hs-identifier hs-var">_valueAnnotations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#ValueDeclAnnotations"><span class="hs-identifier hs-type">ValueDeclAnnotations</span></a></span><span> </span><span id="local-6989586621680209626"><span class="annot"><span class="annottext">Select (Annotations ForValueDecl) Renamed
</span><a href="#local-6989586621680209626"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-185"></span><span>        </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; Eff r ()
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m ()
</span><a href="Print.html#debugPretty"><span class="hs-identifier hs-var">debugPretty</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; Eff r ()) -&gt; Doc AnsiStyle -&gt; Eff r ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;No fixity for value declaration: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; Doc AnsiStyle -&gt; Doc AnsiStyle
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CleanupLocated
  (ASTLocate' Renamed (Select (ASTName ForValueDecl) Renamed))
-&gt; Doc AnsiStyle
forall a. Pretty a =&gt; a -&gt; Doc AnsiStyle
</span><a href="Elara.Data.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">CleanupLocated
  (ASTLocate' Renamed (Select (ASTName ForValueDecl) Renamed))
</span><a href="#local-6989586621680209622"><span class="hs-identifier hs-var">_valueName</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeDeclaration"><span class="hs-identifier hs-type">TypeDeclaration</span></a></span><span> </span><span id="local-6989586621680209629"><span class="annot"><span class="annottext">CleanupLocated
  (ASTLocate' Renamed (Select (ASTName ForType) Renamed))
</span><a href="#local-6989586621680209629"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">[ASTLocate Renamed (Select ASTTypeVar Renamed)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ASTLocate Renamed (TypeDeclaration Renamed)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeDeclAnnotations"><span class="hs-identifier hs-type">TypeDeclAnnotations</span></a></span><span> </span><span class="annot"><span class="annottext">NoFieldValue
Select KindAnnotation Renamed
</span><a href="Elara.AST.Generic.Common.html#NoFieldValue"><span class="hs-identifier hs-var">NoFieldValue</span></a></span><span> </span><span id="local-6989586621680209632"><span class="annot"><span class="annottext">Select (Annotations ForTypeDecl) Renamed
</span><a href="#local-6989586621680209632"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-comment">-- let nameRef = Global $ IgnoreLocation (NTypeName &lt;&lt;$&gt;&gt; name)</span><span>
</span><span id="line-188"></span><span>        </span><span class="hs-comment">--  in modify $ Map.insert nameRef (infixDeclToOpInfo fixity)</span><span>
</span><span id="line-189"></span><span>        </span><span class="annot"><span class="annottext">Eff r ()
forall a. HasCallStack =&gt; a
</span><a href="TODO.html#todo"><span class="hs-identifier hs-var">todo</span></a></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="annot"><span class="hs-comment">-- | Convert an operator to its qualified 'Name' for lookup</span></span><span>
</span><span id="line-192"></span><span class="annot"><a href="Elara.Shunt.html#opNameOf"><span class="hs-identifier hs-type">opNameOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedBinaryOperator"><span class="hs-identifier hs-type">RenamedBinaryOperator</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.VarRef.html#IgnoreLocVarRef"><span class="hs-identifier hs-type">IgnoreLocVarRef</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-193"></span><span id="opNameOf"><span class="annot"><span class="annottext">opNameOf :: RenamedBinaryOperator -&gt; IgnoreLocVarRef Name
</span><a href="Elara.Shunt.html#opNameOf"><span class="hs-identifier hs-var hs-var">opNameOf</span></a></span></span><span> </span><span id="local-6989586621680209664"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209664"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209664"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
-&gt; Optic'
     A_Lens NoIx RenamedBinaryOperator (BinaryOperator' Renamed)
-&gt; BinaryOperator' Renamed
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedBinaryOperator
  RenamedBinaryOperator
  (Located (BinaryOperator' Renamed))
  (Located (BinaryOperator' Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedBinaryOperator
  RenamedBinaryOperator
  (Located (BinaryOperator' Renamed))
  (Located (BinaryOperator' Renamed))
-&gt; Optic
     A_Lens
     NoIx
     (Located (BinaryOperator' Renamed))
     (Located (BinaryOperator' Renamed))
     (BinaryOperator' Renamed)
     (BinaryOperator' Renamed)
-&gt; Optic'
     A_Lens NoIx RenamedBinaryOperator (BinaryOperator' Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (BinaryOperator' Renamed))
  (Located (BinaryOperator' Renamed))
  (BinaryOperator' Renamed)
  (BinaryOperator' Renamed)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-195"></span><span>        </span><span class="annot"><a href="Elara.AST.Generic.Types.html#SymOp"><span class="hs-identifier hs-type">SymOp</span></a></span><span> </span><span id="local-6989586621680209666"><span class="annot"><span class="annottext">ASTLocate Renamed (Select SymOp Renamed)
</span><a href="#local-6989586621680209666"><span class="hs-identifier hs-var">opName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VarRef Name -&gt; IgnoreLocVarRef Name
forall n. VarRef n -&gt; IgnoreLocVarRef n
</span><a href="Elara.AST.VarRef.html#ignoreLocation"><span class="hs-identifier hs-var">ignoreLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarName -&gt; Name
</span><a href="Elara.AST.Name.html#NVarName"><span class="hs-identifier hs-var">NVarName</span></a></span><span> </span><span class="annot"><span class="annottext">(VarName -&gt; Name) -&gt; (OpName -&gt; VarName) -&gt; OpName -&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">OpName -&gt; VarName
</span><a href="Elara.AST.Name.html#OperatorVarName"><span class="hs-identifier hs-var">OperatorVarName</span></a></span><span> </span><span class="annot"><span class="annottext">(OpName -&gt; Name) -&gt; VarRef' LocatedVarRefKind OpName -&gt; VarRef Name
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Located (VarRef' LocatedVarRefKind OpName)
ASTLocate Renamed (Select SymOp Renamed)
</span><a href="#local-6989586621680209666"><span class="hs-identifier hs-var">opName</span></a></span><span> </span><span class="annot"><span class="annottext">Located (VarRef' LocatedVarRefKind OpName)
-&gt; Optic'
     A_Lens
     NoIx
     (Located (VarRef' LocatedVarRefKind OpName))
     (VarRef' LocatedVarRefKind OpName)
-&gt; VarRef' LocatedVarRefKind OpName
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic'
  A_Lens
  NoIx
  (Located (VarRef' LocatedVarRefKind OpName))
  (VarRef' LocatedVarRefKind OpName)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>        </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Infixed"><span class="hs-identifier hs-type">Infixed</span></a></span><span> </span><span id="local-6989586621680209672"><span class="annot"><span class="annottext">Select Infixed Renamed
</span><a href="#local-6989586621680209672"><span class="hs-identifier hs-var">vn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VarRef Name -&gt; IgnoreLocVarRef Name
forall n. VarRef n -&gt; IgnoreLocVarRef n
</span><a href="Elara.AST.VarRef.html#ignoreLocation"><span class="hs-identifier hs-var">ignoreLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarOrConName -&gt; Name
</span><a href="#local-6989586621680209673"><span class="hs-identifier hs-var">toName</span></a></span><span> </span><span class="annot"><span class="annottext">(VarOrConName -&gt; Name)
-&gt; VarRef' LocatedVarRefKind VarOrConName -&gt; VarRef Name
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">VarRef' LocatedVarRefKind VarOrConName
Select Infixed Renamed
</span><a href="#local-6989586621680209672"><span class="hs-identifier hs-var">vn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-198"></span><span>            </span><span id="local-6989586621680209673"><span class="annot"><span class="annottext">toName :: VarOrConName -&gt; Name
</span><a href="#local-6989586621680209673"><span class="hs-identifier hs-var hs-var">toName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span id="local-6989586621680209675"><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680209675"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VarName -&gt; Name
</span><a href="Elara.AST.Name.html#NVarName"><span class="hs-identifier hs-var">NVarName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LowerAlphaName -&gt; VarName
</span><a href="Elara.AST.Name.html#NormalVarName"><span class="hs-identifier hs-var">NormalVarName</span></a></span><span> </span><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680209675"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>            </span><span class="annot"><a href="#local-6989586621680209673"><span class="hs-identifier hs-var">toName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#ConName"><span class="hs-identifier hs-type">ConName</span></a></span><span> </span><span id="local-6989586621680209678"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621680209678"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; Name
</span><a href="Elara.AST.Name.html#NTypeName"><span class="hs-identifier hs-var">NTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621680209678"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="annot"><span class="hs-comment">{- | Fix the operators in an expression to the correct precedence.
For example given @((+) = 1l) and ((*) = 2r)@,
@1 + 2 * 3 * 4 + 5 + 6@ should be parsed as @(((1 + (2 * 3)) * 4) + 5) + 6@.
-}</span></span><span>
</span><span id="line-205"></span><span class="annot"><a href="Elara.Shunt.html#fixOperators"><span class="hs-identifier hs-type">fixOperators</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680208711"><span class="annot"><a href="#local-6989586621680208711"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208711"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="">?lookup</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208711"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208711"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span>
</span><span id="line-206"></span><span id="fixOperators"><span class="annot"><span class="annottext">fixOperators :: forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="Elara.Shunt.html#fixOperators"><span class="hs-identifier hs-var hs-var">fixOperators</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="#local-6989586621680209742"><span class="hs-identifier hs-var">reassoc</span></a></span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-208"></span><span>    </span><span class="annot"><a href="#local-6989586621680209743"><span class="hs-identifier hs-type">withLocationOf'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr%27"><span class="hs-identifier hs-type">RenamedExpr'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span>
</span><span id="line-209"></span><span>    </span><span id="local-6989586621680209743"><span class="annot"><span class="annottext">withLocationOf' :: RenamedExpr -&gt; RenamedExpr' -&gt; RenamedExpr
</span><a href="#local-6989586621680209743"><span class="hs-identifier hs-var hs-var">withLocationOf'</span></a></span></span><span> </span><span id="local-6989586621680209744"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209744"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680209745"><span class="annot"><span class="annottext">RenamedExpr'
</span><a href="#local-6989586621680209745"><span class="hs-identifier hs-var">repl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  RenamedExpr
  RenamedExpr
  (Located RenamedExpr')
  (Located RenamedExpr')
-&gt; (Located RenamedExpr' -&gt; Located RenamedExpr')
-&gt; RenamedExpr
-&gt; RenamedExpr
forall k (is :: IxList) s t a b.
Is k A_Setter =&gt;
Optic k is s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Iso
  RenamedExpr
  RenamedExpr
  (Located RenamedExpr', Maybe RenamedType)
  (Located RenamedExpr', Maybe RenamedType)
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedExpr
  RenamedExpr
  (Located RenamedExpr', Maybe RenamedType)
  (Located RenamedExpr', Maybe RenamedType)
-&gt; Optic
     A_Lens
     NoIx
     (Located RenamedExpr', Maybe RenamedType)
     (Located RenamedExpr', Maybe RenamedType)
     (Located RenamedExpr')
     (Located RenamedExpr')
-&gt; Optic
     A_Lens
     NoIx
     RenamedExpr
     RenamedExpr
     (Located RenamedExpr')
     (Located RenamedExpr')
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located RenamedExpr', Maybe RenamedType)
  (Located RenamedExpr', Maybe RenamedType)
  (Located RenamedExpr')
  (Located RenamedExpr')
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedExpr'
</span><a href="#local-6989586621680209745"><span class="hs-identifier hs-var">repl</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr' -&gt; Located RenamedExpr' -&gt; Located RenamedExpr'
forall a b. a -&gt; Located b -&gt; Located a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209744"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><a href="#local-6989586621680209742"><span class="hs-identifier hs-type">reassoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208711"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span id="local-6989586621680209742"><span class="annot"><span class="annottext">reassoc :: RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="#local-6989586621680209742"><span class="hs-identifier hs-var hs-var">reassoc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span id="local-6989586621680209749"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680209749"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#InParens"><span class="hs-identifier hs-type">InParens</span></a></span><span> </span><span id="local-6989586621680209751"><span class="annot"><span class="annottext">Select InParens Renamed
</span><a href="#local-6989586621680209751"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621680209752"><span class="annot"><span class="annottext">Select (ASTType ForExpr) Renamed
</span><a href="#local-6989586621680209752"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-213"></span><span>        </span><span id="local-6989586621680209753"><span class="annot"><a href="#local-6989586621680209753"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="#local-6989586621680209742"><span class="hs-identifier hs-var">reassoc</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
Select InParens Renamed
</span><a href="#local-6989586621680209751"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-214"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209749"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#InParens"><span class="hs-identifier hs-type">InParens</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209753"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680209752"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><a href="#local-6989586621680209742"><span class="hs-identifier hs-var">reassoc</span></a></span><span> </span><span id="local-6989586621680209754"><span class="annot"><span class="annottext">e :: RenamedExpr
</span><a href="#local-6989586621680209754"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.html#InExpr%27"><span class="hs-identifier hs-type">InExpr'</span></a></span><span> </span><span id="local-6989586621680209755"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680209755"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-type">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680209757"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209757"><span class="hs-identifier hs-var">operator</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680209758"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209758"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680209759"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209759"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-216"></span><span>        </span><span id="local-6989586621680209760"><span class="annot"><a href="#local-6989586621680209760"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r RenamedExpr
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="Elara.Shunt.html#fixOperators"><span class="hs-identifier hs-var">fixOperators</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209758"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-217"></span><span>        </span><span id="local-6989586621680209761"><span class="annot"><a href="#local-6989586621680209761"><span class="hs-identifier hs-var">r'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.Shunt.html#fixOperators"><span class="hs-identifier hs-type">fixOperators</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209759"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-218"></span><span>        </span><span class="annot"><a href="#local-6989586621680209743"><span class="hs-identifier hs-type">withLocationOf'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209754"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680209762"><span class="hs-identifier hs-type">reassoc'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209755"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209757"><span class="hs-identifier hs-type">operator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209760"><span class="hs-identifier hs-type">l'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209761"><span class="hs-identifier hs-type">r'</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><a href="#local-6989586621680209742"><span class="hs-identifier hs-var">reassoc</span></a></span><span> </span><span id="local-6989586621680209763"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209763"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r RenamedExpr
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209763"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><a href="#local-6989586621680209762"><span class="hs-identifier hs-type">reassoc'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Region.html#SourceRegion"><span class="hs-identifier hs-type">SourceRegion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedBinaryOperator"><span class="hs-identifier hs-type">RenamedBinaryOperator</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208711"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr%27"><span class="hs-identifier hs-type">RenamedExpr'</span></a></span><span>
</span><span id="line-222"></span><span>    </span><span id="local-6989586621680209762"><span class="annot"><span class="annottext">reassoc' :: SourceRegion
-&gt; RenamedBinaryOperator
-&gt; RenamedExpr
-&gt; RenamedExpr
-&gt; Eff r RenamedExpr'
</span><a href="#local-6989586621680209762"><span class="hs-identifier hs-var hs-var">reassoc'</span></a></span></span><span> </span><span id="local-6989586621680209764"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680209764"><span class="hs-identifier hs-var">sr</span></a></span></span><span> </span><span id="local-6989586621680209765"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209765"><span class="hs-identifier hs-var">o1</span></a></span></span><span> </span><span id="local-6989586621680209766"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209766"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621680209767"><span class="annot"><span class="annottext">r :: RenamedExpr
</span><a href="#local-6989586621680209767"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.html#InExpr"><span class="hs-identifier hs-type">InExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-type">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680209768"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209768"><span class="hs-identifier hs-var">o2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680209769"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209769"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680209770"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209770"><span class="hs-identifier hs-var">e3</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-223"></span><span>        </span><span id="local-6989586621680209771"><span class="annot"><a href="#local-6989586621680209771"><span class="hs-identifier hs-var">info1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator -&gt; Eff r OpInfo
</span><a href="#local-6989586621680209772"><span class="hs-identifier hs-var">getInfoOrWarn</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209765"><span class="hs-identifier hs-var">o1</span></a></span><span>
</span><span id="line-224"></span><span>        </span><span id="local-6989586621680209773"><span class="annot"><a href="#local-6989586621680209773"><span class="hs-identifier hs-var">info2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621680209772"><span class="hs-identifier hs-type">getInfoOrWarn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209768"><span class="hs-identifier hs-type">o2</span></a></span><span>
</span><span id="line-225"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="hs-identifier hs-type">compare</span></span><span> </span><span class="annot"><span class="hs-identifier">info1</span></span><span class="hs-operator">.</span><span class="hs-identifier">precedence</span><span> </span><span class="annot"><span class="hs-identifier">info2</span></span><span class="hs-operator">.</span><span class="hs-identifier">precedence</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-226"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Eff r RenamedExpr'
</span><a href="#local-6989586621680209775"><span class="hs-identifier hs-var">assocLeft</span></a></span><span>
</span><span id="line-227"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Eff r RenamedExpr'
</span><a href="#local-6989586621680209776"><span class="hs-identifier hs-var">assocRight</span></a></span><span>
</span><span id="line-228"></span><span>            </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680209771"><span class="hs-identifier hs-var">info1</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">associativity</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680209773"><span class="hs-identifier hs-var">info2</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">associativity</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-229"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#LeftAssociative"><span class="hs-identifier hs-var">LeftAssociative</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#LeftAssociative"><span class="hs-identifier hs-var">LeftAssociative</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Eff r RenamedExpr'
</span><a href="#local-6989586621680209775"><span class="hs-identifier hs-var">assocLeft</span></a></span><span>
</span><span id="line-230"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#RightAssociative"><span class="hs-identifier hs-var">RightAssociative</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#RightAssociative"><span class="hs-identifier hs-var">RightAssociative</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Eff r RenamedExpr'
</span><a href="#local-6989586621680209776"><span class="hs-identifier hs-var">assocRight</span></a></span><span>
</span><span id="line-231"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Associativity
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ShuntError -&gt; Eff r RenamedExpr'
forall e (es :: [(* -&gt; *) -&gt; * -&gt; *]) a.
(HasCallStack, Error e :&gt; es, Show e) =&gt;
e -&gt; Eff es a
</span><span class="hs-identifier hs-var">Eff.throwError</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RenamedBinaryOperator, OpInfo)
-&gt; (RenamedBinaryOperator, OpInfo) -&gt; ShuntError
</span><a href="Elara.Shunt.Error.html#SamePrecedenceError"><span class="hs-identifier hs-var">SamePrecedenceError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209765"><span class="hs-identifier hs-var">o1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680209771"><span class="hs-identifier hs-var">info1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209768"><span class="hs-identifier hs-var">o2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680209773"><span class="hs-identifier hs-var">info2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-233"></span><span>        </span><span id="local-6989586621680209775"><span class="annot"><span class="annottext">assocLeft :: Eff r RenamedExpr'
</span><a href="#local-6989586621680209775"><span class="hs-identifier hs-var hs-var">assocLeft</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-234"></span><span>            </span><span id="local-6989586621680209778"><span class="annot"><a href="#local-6989586621680209778"><span class="hs-identifier hs-var">reassociated'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceRegion
-&gt; RenamedBinaryOperator
-&gt; RenamedExpr
-&gt; RenamedExpr
-&gt; Eff r RenamedExpr'
</span><a href="#local-6989586621680209762"><span class="hs-identifier hs-var">reassoc'</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680209764"><span class="hs-identifier hs-var">sr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209765"><span class="hs-identifier hs-var">o1</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209766"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209769"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-235"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680209779"><span class="annot"><a href="#local-6989586621680209779"><span class="hs-identifier hs-var hs-var">reassociated</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ASTLocate Renamed RenamedExpr', Select (ASTType ForExpr) Renamed)
-&gt; RenamedExpr
forall a (ast :: a).
(ASTLocate ast (Expr' ast), Select (ASTType ForExpr) ast)
-&gt; Expr ast
</span><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion -&gt; RenamedExpr' -&gt; Located RenamedExpr'
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680209764"><span class="hs-identifier hs-var">sr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr'
</span><a href="#local-6989586621680209778"><span class="hs-identifier hs-var">reassociated'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe RenamedType
Select (ASTType ForExpr) Renamed
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-type">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680209768"><span class="hs-identifier hs-type">o2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680209779"><span class="hs-identifier hs-type">reassociated</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680209770"><span class="hs-identifier hs-type">e3</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span>        </span><span id="local-6989586621680209776"><span class="annot"><span class="annottext">assocRight :: Eff r RenamedExpr'
</span><a href="#local-6989586621680209776"><span class="hs-identifier hs-var hs-var">assocRight</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RenamedExpr' -&gt; Eff r RenamedExpr'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Select ASTBinaryOperator Renamed -&gt; RenamedExpr'
forall a (ast :: a). Select ASTBinaryOperator ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-var">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209765"><span class="hs-identifier hs-var">o1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209766"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209767"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span>        </span><span class="annot"><a href="#local-6989586621680209772"><span class="hs-identifier hs-type">getInfoOrWarn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedBinaryOperator"><span class="hs-identifier hs-type">RenamedBinaryOperator</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208711"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-type">OpInfo</span></a></span><span>
</span><span id="line-241"></span><span>        </span><span id="local-6989586621680209772"><span class="annot"><span class="annottext">getInfoOrWarn :: RenamedBinaryOperator -&gt; Eff r OpInfo
</span><a href="#local-6989586621680209772"><span class="hs-identifier hs-var hs-var">getInfoOrWarn</span></a></span></span><span> </span><span id="local-6989586621680209780"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209780"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-242"></span><span>            </span><span id="local-6989586621680209781"><span class="annot"><a href="#local-6989586621680209781"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">?lookup::OpLookup r
OpLookup r
</span><a href="#local-6989586621680209683"><span class="hs-var">?lookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator -&gt; IgnoreLocVarRef Name
</span><a href="Elara.Shunt.html#opNameOf"><span class="hs-identifier hs-var">opNameOf</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209780"><span class="hs-identifier hs-var">operator</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621680209781"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-244"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680209782"><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680209782"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OpInfo -&gt; Eff r OpInfo
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">OpInfo
</span><a href="#local-6989586621680209782"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-245"></span><span>                </span><span class="annot"><span class="annottext">Maybe OpInfo
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-246"></span><span>                    </span><span class="hs-comment">-- use default precedence 9 left associative</span><span>
</span><span id="line-247"></span><span>                    </span><span class="annot"><span class="annottext">OpInfo -&gt; Eff r OpInfo
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Precedence -&gt; Associativity -&gt; OpInfo
</span><a href="Elara.Shunt.Operator.html#OpInfo"><span class="hs-identifier hs-var">OpInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Precedence
</span><a href="Elara.Shunt.Operator.html#mkPrecedence"><span class="hs-identifier hs-var">mkPrecedence</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Associativity
</span><a href="Elara.Shunt.Operator.html#LeftAssociative"><span class="hs-identifier hs-var">LeftAssociative</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><a href="#local-6989586621680209762"><span class="hs-identifier hs-var">reassoc'</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680209783"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209783"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span id="local-6989586621680209784"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209784"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621680209785"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209785"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RenamedExpr' -&gt; Eff r RenamedExpr'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Select ASTBinaryOperator Renamed -&gt; RenamedExpr'
forall a (ast :: a). Select ASTBinaryOperator ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-var">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680209783"><span class="hs-identifier hs-var">operator</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209784"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209785"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="annot"><span class="hs-comment">-- | Effects needed for the shunt pipeline</span></span><span>
</span><span id="line-251"></span><span class="hs-keyword">type</span><span> </span><span id="ShuntPipelineEffects"><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-var">ShuntPipelineEffects</span></a></span></span><span> </span><span id="local-6989586621680209786"><span class="annot"><a href="#local-6989586621680209786"><span class="hs-identifier hs-type">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-252"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Elara.Query.Effects.html#QueryEffects"><span class="hs-identifier hs-type">QueryEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209786"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-253"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Error</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntError"><span class="hs-identifier hs-type">ShuntError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680209786"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff.Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Elara.Shunt.Error.html#ShuntWarning"><span class="hs-identifier hs-type">ShuntWarning</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680209786"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Rock.html#Rock"><span class="hs-identifier hs-type">Rock</span></a></span><span> </span><span class="annot"><a href="Elara.Query.html#Query"><span class="hs-identifier hs-type">Elara.Query.Query</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680209786"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="annot"><span class="hs-comment">-- | Constraint synonym for having an operator lookup in the effects (as an implicit parameter)</span></span><span>
</span><span id="line-259"></span><span class="hs-keyword">type</span><span> </span><span id="HasOpLookup"><span class="annot"><a href="Elara.Shunt.html#HasOpLookup"><span class="hs-identifier hs-var">HasOpLookup</span></a></span></span><span> </span><span id="local-6989586621680209787"><span class="annot"><a href="#local-6989586621680209787"><span class="hs-identifier hs-type">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="">?lookup</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209787"><span class="hs-identifier hs-type">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="annot"><span class="hs-comment">-- | Shunt a renamed module using the given operator lookup function</span></span><span>
</span><span id="line-262"></span><span class="annot"><a href="Elara.Shunt.html#shuntWith"><span class="hs-identifier hs-type">shuntWith</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680208472"><span class="annot"><a href="#local-6989586621680208472"><span class="hs-identifier hs-type">es</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208472"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-265"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Operator lookup function</span></span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208472"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Renamed module to shunt</span></span><span>
</span><span id="line-268"></span><span>    </span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-269"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208472"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Module.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Shunted"><span class="hs-identifier hs-type">Shunted</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span id="shuntWith"><span class="annot"><span class="annottext">shuntWith :: forall (es :: [(* -&gt; *) -&gt; * -&gt; *]).
ShuntPipelineEffects es =&gt;
OpLookup es -&gt; Module Renamed -&gt; Eff es (Module Shunted)
</span><a href="Elara.Shunt.html#shuntWith"><span class="hs-identifier hs-var hs-var">shuntWith</span></a></span></span><span> </span><span id="local-6989586621680209883"><span class="annot"><span class="annottext">OpLookup es
</span><a href="#local-6989586621680209883"><span class="hs-identifier hs-var">opL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Declaration Renamed -&gt; Eff es (Declaration Shunted))
-&gt; Module Renamed -&gt; Eff es (Module Shunted)
forall {a1} {astK} {a2} a4 (f :: * -&gt; *) (ast :: a1) s1 t
       {ast2 :: astK} {ast3 :: a2} {s}.
(CleanupLocated (ASTLocate' ast2 (ASTQual ast2 OpName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast OpName)),
 CleanupLocated (ASTLocate' ast2 (ASTQual ast2 VarName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast VarName)),
 CleanupLocated (ASTLocate' ast2 (ASTQual ast2 TypeName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast TypeName)),
 CleanupLocated (ASTLocate' ast2 (Import' ast))
 ~ CleanupLocated (ASTLocate' ast (Import' ast)),
 CleanupLocated (ASTLocate' ast2 ModuleName)
 ~ CleanupLocated (ASTLocate' ast ModuleName),
 CleanupLocated (ASTLocate' ast3 (ASTQual ast3 VarName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast VarName)),
 CleanupLocated (ASTLocate' ast3 (ASTQual ast3 OpName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast OpName)),
 CleanupLocated (ASTLocate' ast3 (ASTQual ast3 TypeName))
 ~ CleanupLocated (ASTLocate' ast (ASTQual ast TypeName)),
 ErrorUnlessOnlyOne s1 (Rep s1), Generic s1, Generic t,
 GWrapped (Rep s1) (Rep t) (Located s) (Located (Module' ast)),
 UnifyHead s1 t, UnifyHead t s1, RUnlocate ast2, Monad f,
 HasField' &quot;name&quot; s (CleanupLocated (ASTLocate' ast ModuleName)),
 HasField' &quot;exposing&quot; s (Exposing ast3),
 HasField' &quot;declarations&quot; s [a4],
 HasField' &quot;imports&quot; s [Import ast2]) =&gt;
(a4 -&gt; f (Declaration ast)) -&gt; s1 -&gt; f t
</span><a href="Elara.AST.Module.html#traverseModule"><span class="hs-identifier hs-var">traverseModule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OpLookup es -&gt; Declaration Renamed -&gt; Eff es (Declaration Shunted)
forall (es :: [(* -&gt; *) -&gt; * -&gt; *]).
ShuntPipelineEffects es =&gt;
OpLookup es -&gt; Declaration Renamed -&gt; Eff es (Declaration Shunted)
</span><a href="Elara.Shunt.html#shuntWithDeclaration"><span class="hs-identifier hs-var">shuntWithDeclaration</span></a></span><span> </span><span class="annot"><span class="annottext">OpLookup es
</span><a href="#local-6989586621680209883"><span class="hs-identifier hs-var">opL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="annot"><span class="hs-comment">-- | Shunt a renamed declaration using the given operator lookup function</span></span><span>
</span><span id="line-273"></span><span class="annot"><a href="Elara.Shunt.html#shuntWithDeclaration"><span class="hs-identifier hs-type">shuntWithDeclaration</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680208765"><span class="annot"><a href="#local-6989586621680208765"><span class="hs-identifier hs-type">es</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208765"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-276"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Operator lookup function</span></span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208765"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-278"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Renamed declaration to shunt</span></span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedDeclaration"><span class="hs-identifier hs-type">RenamedDeclaration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-280"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208765"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedDeclaration"><span class="hs-identifier hs-type">ShuntedDeclaration</span></a></span><span>
</span><span id="line-281"></span><span id="shuntWithDeclaration"><span class="annot"><span class="annottext">shuntWithDeclaration :: forall (es :: [(* -&gt; *) -&gt; * -&gt; *]).
ShuntPipelineEffects es =&gt;
OpLookup es -&gt; Declaration Renamed -&gt; Eff es (Declaration Shunted)
</span><a href="Elara.Shunt.html#shuntWithDeclaration"><span class="hs-identifier hs-var hs-var">shuntWithDeclaration</span></a></span></span><span> </span><span id="local-6989586621680209921"><span class="annot"><span class="annottext">OpLookup es
</span><a href="#local-6989586621680209921"><span class="hs-identifier hs-var">opL</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-type">Declaration</span></a></span><span> </span><span id="local-6989586621680209922"><span class="annot"><span class="annottext">ASTLocate Renamed (Declaration' Renamed)
</span><a href="#local-6989586621680209922"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><span class="annottext">Located (Declaration' Shunted) -&gt; Declaration Shunted
ASTLocate Shunted (Declaration' Shunted) -&gt; Declaration Shunted
forall {a} (ast :: a).
ASTLocate ast (Declaration' ast) -&gt; Declaration ast
</span><a href="Elara.AST.Generic.Types.html#Declaration"><span class="hs-identifier hs-var">Declaration</span></a></span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><span class="annottext">(Located (Declaration' Shunted) -&gt; Declaration Shunted)
-&gt; Eff es (Located (Declaration' Shunted))
-&gt; Eff es (Declaration Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (Declaration' Renamed))
  (Located (Declaration' Shunted))
  (Declaration' Renamed)
  (Declaration' Shunted)
-&gt; (Declaration' Renamed -&gt; Eff es (Declaration' Shunted))
-&gt; Located (Declaration' Renamed)
-&gt; Eff es (Located (Declaration' Shunted))
forall k (f :: * -&gt; *) (is :: IxList) s t a b.
(Is k A_Traversal, Applicative f) =&gt;
Optic k is s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t
</span><span class="hs-identifier hs-var">traverseOf</span></span><span>
</span><span id="line-284"></span><span>            </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (Declaration' Renamed))
  (Located (Declaration' Shunted))
  (Declaration' Renamed)
  (Declaration' Shunted)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span>
</span><span id="line-285"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680209924"><span class="annot"><span class="annottext">Declaration' Renamed
</span><a href="#local-6989586621680209924"><span class="hs-identifier hs-var">decl'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedDeclaration%27"><span class="hs-identifier hs-type">RenamedDeclaration'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-286"></span><span>                </span><span id="local-6989586621680209926"><span class="annot"><a href="#local-6989586621680209926"><span class="hs-identifier hs-var">body'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OpLookup es
-&gt; DeclarationBody Renamed -&gt; Eff es ShuntedDeclarationBody
forall (es :: [(* -&gt; *) -&gt; * -&gt; *]).
ShuntPipelineEffects es =&gt;
OpLookup es
-&gt; DeclarationBody Renamed -&gt; Eff es ShuntedDeclarationBody
</span><a href="Elara.Shunt.html#shuntDeclarationBody"><span class="hs-identifier hs-var">shuntDeclarationBody</span></a></span><span> </span><span class="annot"><span class="annottext">OpLookup es
</span><a href="#local-6989586621680209921"><span class="hs-identifier hs-var">opL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Declaration' Renamed
</span><a href="#local-6989586621680209924"><span class="hs-identifier hs-var">decl'</span></a></span><span> </span><span class="annot"><span class="annottext">Declaration' Renamed
-&gt; Lens
     (Declaration' Renamed)
     (Declaration' Renamed)
     (DeclarationBody Renamed)
     (DeclarationBody Renamed)
-&gt; DeclarationBody Renamed
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">forall (field :: Symbol) s a. HasField' field s a =&gt; Lens s s a a
</span><span class="hs-identifier hs-var">field'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;body&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Declaration%27"><span class="hs-identifier hs-type">Declaration'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680209924"><span class="hs-identifier hs-type">decl'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">^.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">field'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;moduleName&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680209926"><span class="hs-identifier hs-type">body'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>            </span><span class="annot"><span class="annottext">Located (Declaration' Renamed)
ASTLocate Renamed (Declaration' Renamed)
</span><a href="#local-6989586621680209922"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="annot"><span class="hs-comment">-- | Shunt a renamed declaration body using the given operator lookup function</span></span><span>
</span><span id="line-292"></span><span class="annot"><a href="Elara.Shunt.html#shuntDeclarationBody"><span class="hs-identifier hs-type">shuntDeclarationBody</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680208778"><span class="annot"><a href="#local-6989586621680208778"><span class="hs-identifier hs-type">es</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208778"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-295"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#OpLookup"><span class="hs-identifier hs-type">OpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208778"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-296"></span><span>    </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedDeclarationBody"><span class="hs-identifier hs-type">RenamedDeclarationBody</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-297"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208778"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedDeclarationBody"><span class="hs-identifier hs-type">ShuntedDeclarationBody</span></a></span><span>
</span><span id="line-298"></span><span id="shuntDeclarationBody"><span class="annot"><span class="annottext">shuntDeclarationBody :: forall (es :: [(* -&gt; *) -&gt; * -&gt; *]).
ShuntPipelineEffects es =&gt;
OpLookup es
-&gt; DeclarationBody Renamed -&gt; Eff es ShuntedDeclarationBody
</span><a href="Elara.Shunt.html#shuntDeclarationBody"><span class="hs-identifier hs-var hs-var">shuntDeclarationBody</span></a></span></span><span> </span><span id="local-6989586621680209992"><span class="annot"><span class="annottext">OpLookup es
</span><a href="#local-6989586621680209992"><span class="hs-identifier hs-var">opL</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#DeclarationBody"><span class="hs-identifier hs-type">DeclarationBody</span></a></span><span> </span><span id="local-6989586621680209994"><span class="annot"><span class="annottext">ASTLocate Renamed (DeclarationBody' Renamed)
</span><a href="#local-6989586621680209994"><span class="hs-identifier hs-var">rdb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Located (DeclarationBody' Shunted) -&gt; ShuntedDeclarationBody
ASTLocate Shunted (DeclarationBody' Shunted)
-&gt; ShuntedDeclarationBody
forall a (ast :: a).
ASTLocate ast (DeclarationBody' ast) -&gt; DeclarationBody ast
</span><a href="Elara.AST.Generic.Types.html#DeclarationBody"><span class="hs-identifier hs-var">DeclarationBody</span></a></span><span> </span><span class="annot"><span class="annottext">(Located (DeclarationBody' Shunted) -&gt; ShuntedDeclarationBody)
-&gt; Eff es (Located (DeclarationBody' Shunted))
-&gt; Eff es ShuntedDeclarationBody
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (DeclarationBody' Renamed))
  (Located (DeclarationBody' Shunted))
  (DeclarationBody' Renamed)
  (DeclarationBody' Shunted)
-&gt; (DeclarationBody' Renamed -&gt; Eff es (DeclarationBody' Shunted))
-&gt; Located (DeclarationBody' Renamed)
-&gt; Eff es (Located (DeclarationBody' Shunted))
forall k (f :: * -&gt; *) (is :: IxList) s t a b.
(Is k A_Traversal, Applicative f) =&gt;
Optic k is s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (DeclarationBody' Renamed))
  (Located (DeclarationBody' Shunted))
  (DeclarationBody' Renamed)
  (DeclarationBody' Shunted)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">DeclarationBody' Renamed -&gt; Eff es (DeclarationBody' Shunted)
</span><a href="#local-6989586621680209995"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Located (DeclarationBody' Renamed)
ASTLocate Renamed (DeclarationBody' Renamed)
</span><a href="#local-6989586621680209994"><span class="hs-identifier hs-var">rdb</span></a></span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-300"></span><span>    </span><span class="annot"><a href="#local-6989586621680209995"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedDeclarationBody%27"><span class="hs-identifier hs-type">RenamedDeclarationBody'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208778"><span class="hs-identifier hs-type">es</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedDeclarationBody%27"><span class="hs-identifier hs-type">ShuntedDeclarationBody'</span></a></span><span>
</span><span id="line-301"></span><span>    </span><span id="local-6989586621680209995"><span class="annot"><span class="annottext">go :: DeclarationBody' Renamed -&gt; Eff es (DeclarationBody' Shunted)
</span><a href="#local-6989586621680209995"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span id="local-6989586621680209998"><span class="annot"><span class="annottext">CleanupLocated
  (ASTLocate' Renamed (Select (ASTName ForValueDecl) Renamed))
</span><a href="#local-6989586621680209998"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680209999"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209999"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">Select (Patterns ForValueDecl) Renamed
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680210000"><span class="annot"><span class="annottext">Select (ASTType ForValueDecl) Renamed
</span><a href="#local-6989586621680210000"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680210001"><span class="annot"><span class="annottext">ValueDeclAnnotations Renamed
</span><a href="#local-6989586621680210001"><span class="hs-identifier hs-var">ann</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-302"></span><span>        </span><span id="local-6989586621680210002"><span class="annot"><a href="#local-6989586621680210002"><span class="hs-identifier hs-var">shunted</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="">?lookup</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">?lookup::OpLookup es
OpLookup es
</span><a href="#local-6989586621680209992"><span class="hs-identifier hs-var">opL</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff es (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680209999"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-303"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680210006"><span class="annot"><a href="#local-6989586621680210006"><span class="hs-identifier hs-var hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RenamedType -&gt; Type Shunted)
-&gt; Maybe RenamedType -&gt; Maybe (Type Shunted)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">RenamedType -&gt; Type Shunted
forall {a1} {a2} (ast1 :: a1) (ast2 :: a2) {f :: * -&gt; *}.
(Select TupleType ast1 ~ DataConCantHappen,
 Select TypeKind ast1 ~ Select TypeKind ast2,
 Select UnitTypeInfo ast1 ~ Select UnitTypeInfo ast2,
 CleanupLocated (ASTLocate' ast2 (Type' ast2)) ~ f (Type' ast2),
 CleanupLocated (ASTLocate' ast1 (Select ASTTypeVar ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select ASTTypeVar ast2)),
 CleanupLocated (ASTLocate' ast1 (Select UserDefinedType ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select UserDefinedType ast2)),
 CleanupLocated (ASTLocate' ast1 (Type' ast1)) ~ f (Type' ast1),
 CleanupLocated (ASTLocate' ast1 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast2 LowerAlphaName),
 Functor f) =&gt;
Type ast1 -&gt; Type ast2
</span><a href="Elara.AST.Generic.Types.html#coerceType"><span class="hs-identifier hs-var">coerceType</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RenamedType
Select (ASTType ForValueDecl) Renamed
</span><a href="#local-6989586621680210000"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-304"></span><span>        </span><span id="local-6989586621680210008"><span class="annot"><a href="#local-6989586621680210008"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#traverseValueDeclAnnotations"><span class="hs-identifier hs-type">traverseValueDeclAnnotations</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">let</span><span> </span><span class="">?lookup</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680209992"><span class="hs-identifier hs-type">opL</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><a href="Elara.Shunt.html#shuntAnnotation"><span class="hs-identifier hs-type">shuntAnnotation</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680210001"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-305"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680209998"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210002"><span class="hs-identifier hs-type">shunted</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Generic.Common.html#NoFieldValue"><span class="hs-identifier hs-type">NoFieldValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210006"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210008"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>    </span><span class="annot"><a href="#local-6989586621680209995"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeDeclaration"><span class="hs-identifier hs-type">TypeDeclaration</span></a></span><span> </span><span id="local-6989586621680210014"><span class="annot"><span class="annottext">CleanupLocated
  (ASTLocate' Renamed (Select (ASTName ForType) Renamed))
</span><a href="#local-6989586621680210014"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680210015"><span class="annot"><span class="annottext">[ASTLocate Renamed (Select ASTTypeVar Renamed)]
</span><a href="#local-6989586621680210015"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621680210016"><span class="annot"><span class="annottext">ASTLocate Renamed (TypeDeclaration Renamed)
</span><a href="#local-6989586621680210016"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680210017"><span class="annot"><span class="annottext">TypeDeclAnnotations Renamed
</span><a href="#local-6989586621680210017"><span class="hs-identifier hs-var">ann</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-307"></span><span>        </span><span id="local-6989586621680210018"><span class="annot"><a href="#local-6989586621680210018"><span class="hs-identifier hs-var">annotations</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="">?lookup</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">?lookup::OpLookup es
OpLookup es
</span><a href="#local-6989586621680209992"><span class="hs-identifier hs-var">opL</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">TypeDeclAnnotations Renamed -&gt; Eff es (TypeDeclAnnotations Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
TypeDeclAnnotations Renamed -&gt; Eff r (TypeDeclAnnotations Shunted)
</span><a href="Elara.Shunt.html#shuntTypeDeclAnnotations"><span class="hs-identifier hs-var">shuntTypeDeclAnnotations</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDeclAnnotations Renamed
</span><a href="#local-6989586621680210017"><span class="hs-identifier hs-var">ann</span></a></span><span>
</span><span id="line-308"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeDeclaration"><span class="hs-identifier hs-type">TypeDeclaration</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210014"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210015"><span class="hs-identifier hs-type">vars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#coerceTypeDeclaration"><span class="hs-identifier hs-type">coerceTypeDeclaration</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621680210016"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680210018"><span class="hs-identifier hs-type">annotations</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span id="local-6989586621680208813"><span class="annot"><a href="Elara.Shunt.html#shuntTypeDeclAnnotations"><span class="hs-identifier hs-type">shuntTypeDeclAnnotations</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208813"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Shunt.html#HasOpLookup"><span class="hs-identifier hs-type">HasOpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208813"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeDeclAnnotations"><span class="hs-identifier hs-type">TypeDeclAnnotations</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-313"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208813"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeDeclAnnotations"><span class="hs-identifier hs-type">TypeDeclAnnotations</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Shunted"><span class="hs-identifier hs-type">Shunted</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-314"></span><span id="shuntTypeDeclAnnotations"><span class="annot"><span class="annottext">shuntTypeDeclAnnotations :: forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
TypeDeclAnnotations Renamed -&gt; Eff r (TypeDeclAnnotations Shunted)
</span><a href="Elara.Shunt.html#shuntTypeDeclAnnotations"><span class="hs-identifier hs-var hs-var">shuntTypeDeclAnnotations</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeDeclAnnotations"><span class="hs-identifier hs-type">TypeDeclAnnotations</span></a></span><span> </span><span id="local-6989586621680210031"><span class="annot"><span class="annottext">Select KindAnnotation Renamed
</span><a href="#local-6989586621680210031"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621680210032"><span class="annot"><span class="annottext">Select (Annotations ForTypeDecl) Renamed
</span><a href="#local-6989586621680210032"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Select KindAnnotation Shunted
-&gt; Select (Annotations ForTypeDecl) Shunted
-&gt; TypeDeclAnnotations Shunted
forall {a} (ast :: a).
Select KindAnnotation ast
-&gt; Select (Annotations ForTypeDecl) ast -&gt; TypeDeclAnnotations ast
</span><a href="Elara.AST.Generic.Types.html#TypeDeclAnnotations"><span class="hs-identifier hs-var">TypeDeclAnnotations</span></a></span><span> </span><span class="annot"><span class="annottext">Select KindAnnotation Renamed
Select KindAnnotation Shunted
</span><a href="#local-6989586621680210031"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">([Annotation Shunted] -&gt; TypeDeclAnnotations Shunted)
-&gt; Eff r [Annotation Shunted]
-&gt; Eff r (TypeDeclAnnotations Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Annotation Renamed -&gt; Eff r (Annotation Shunted))
-&gt; [Annotation Renamed] -&gt; Eff r [Annotation Shunted]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Annotation Renamed -&gt; Eff r (Annotation Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
Annotation Renamed -&gt; Eff r (Annotation Shunted)
</span><a href="Elara.Shunt.html#shuntAnnotation"><span class="hs-identifier hs-var">shuntAnnotation</span></a></span><span> </span><span class="annot"><span class="annottext">[Annotation Renamed]
Select (Annotations ForTypeDecl) Renamed
</span><a href="#local-6989586621680210032"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span class="annot"><span class="hs-comment">-- | Shunt a renamed annotation using the given operator lookup function</span></span><span>
</span><span id="line-317"></span><span id="local-6989586621680208810"><span class="annot"><a href="Elara.Shunt.html#shuntAnnotation"><span class="hs-identifier hs-type">shuntAnnotation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208810"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Shunt.html#HasOpLookup"><span class="hs-identifier hs-type">HasOpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208810"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208810"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Select.html#Shunted"><span class="hs-identifier hs-type">Shunted</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-318"></span><span id="shuntAnnotation"><span class="annot"><span class="annottext">shuntAnnotation :: forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
Annotation Renamed -&gt; Eff r (Annotation Shunted)
</span><a href="Elara.Shunt.html#shuntAnnotation"><span class="hs-identifier hs-var hs-var">shuntAnnotation</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span id="local-6989586621680210070"><span class="annot"><span class="annottext">ASTLocate Renamed (Select AnnotationName Renamed)
</span><a href="#local-6989586621680210070"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680210071"><span class="annot"><span class="annottext">[AnnotationArg Renamed]
</span><a href="#local-6989586621680210071"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-319"></span><span>    </span><span id="local-6989586621680210072"><span class="annot"><a href="#local-6989586621680210072"><span class="hs-identifier hs-var">args'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Optic
  A_Traversal
  (WithIx Int)
  [AnnotationArg Renamed]
  [AnnotationArg Shunted]
  RenamedExpr
  (Expr Shunted)
-&gt; (RenamedExpr -&gt; Eff r (Expr Shunted))
-&gt; [AnnotationArg Renamed]
-&gt; Eff r [AnnotationArg Shunted]
forall k (f :: * -&gt; *) (is :: IxList) s t a b.
(Is k A_Traversal, Applicative f) =&gt;
Optic k is s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IxTraversal
  Int
  [AnnotationArg Renamed]
  [AnnotationArg Shunted]
  (AnnotationArg Renamed)
  (AnnotationArg Shunted)
forall i s t a b. Each i s t a b =&gt; IxTraversal i s t a b
</span><span class="hs-identifier hs-var">each</span></span><span> </span><span class="annot"><span class="annottext">IxTraversal
  Int
  [AnnotationArg Renamed]
  [AnnotationArg Shunted]
  (AnnotationArg Renamed)
  (AnnotationArg Shunted)
-&gt; Optic
     An_Iso
     NoIx
     (AnnotationArg Renamed)
     (AnnotationArg Shunted)
     RenamedExpr
     (Expr Shunted)
-&gt; Optic
     A_Traversal
     (WithIx Int)
     [AnnotationArg Renamed]
     [AnnotationArg Shunted]
     RenamedExpr
     (Expr Shunted)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  An_Iso
  NoIx
  (AnnotationArg Renamed)
  (AnnotationArg Shunted)
  RenamedExpr
  (Expr Shunted)
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnotationArg Renamed]
</span><a href="#local-6989586621680210071"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-320"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210070"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210072"><span class="hs-identifier hs-type">args'</span></a></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="annot"><span class="hs-comment">{- | Fix the operators in an expression to the correct precedence and shunt it
The main entry point for this module that simply combines 'fixOperators' and 'shuntExpr'
-}</span></span><span>
</span><span id="line-325"></span><span id="local-6989586621680208795"><span class="annot"><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-type">fixExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208795"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Shunt.html#HasOpLookup"><span class="hs-identifier hs-type">HasOpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680208795"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208795"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedExpr"><span class="hs-identifier hs-type">ShuntedExpr</span></a></span></span><span>
</span><span id="line-326"></span><span id="fixExpr"><span class="annot"><span class="annottext">fixExpr :: forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var hs-var">fixExpr</span></a></span></span><span> </span><span id="local-6989586621680210082"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210082"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-327"></span><span>    </span><span id="local-6989586621680210083"><span class="annot"><a href="#local-6989586621680210083"><span class="hs-identifier hs-var">fixed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r RenamedExpr
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, ?lookup::OpLookup r) =&gt;
RenamedExpr -&gt; Eff r RenamedExpr
</span><a href="Elara.Shunt.html#fixOperators"><span class="hs-identifier hs-var">fixOperators</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210082"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><a href="Elara.Shunt.html#shuntExpr"><span class="hs-identifier hs-type">shuntExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210083"><span class="hs-identifier hs-type">fixed</span></a></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="annot"><span class="hs-comment">{- | Shunt a renamed expression into a shunted expression.
This doesn't actually do much other than traverse the AST and convert types.
However, it does also convert binary operators into function calls.
-}</span></span><span>
</span><span id="line-334"></span><span class="annot"><a href="Elara.Shunt.html#shuntExpr"><span class="hs-identifier hs-type">shuntExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-335"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680210084"><span class="annot"><a href="#local-6989586621680210084"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-336"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Shunt.html#ShuntPipelineEffects"><span class="hs-identifier hs-type">ShuntPipelineEffects</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210084"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.Shunt.html#HasOpLookup"><span class="hs-identifier hs-type">HasOpLookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210084"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-337"></span><span>    </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr"><span class="hs-identifier hs-type">RenamedExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-338"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680210084"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedExpr"><span class="hs-identifier hs-type">ShuntedExpr</span></a></span><span>
</span><span id="line-339"></span><span id="shuntExpr"><span class="annot"><span class="annottext">shuntExpr :: forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#shuntExpr"><span class="hs-identifier hs-var hs-var">shuntExpr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680210296"><span class="annot"><span class="annottext">ASTLocate Renamed RenamedExpr'
</span><a href="#local-6989586621680210296"><span class="hs-identifier hs-var">le</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680210297"><span class="annot"><span class="annottext">Select (ASTType ForExpr) Renamed
</span><a href="#local-6989586621680210297"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680210298"><span class="annot"><span class="annottext">Located (Expr' Shunted)
</span><a href="#local-6989586621680210298"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ASTLocate Shunted (Expr' Shunted),
 Select (ASTType ForExpr) Shunted)
-&gt; Expr Shunted
forall a (ast :: a).
(ASTLocate ast (Expr' ast), Select (ASTType ForExpr) ast)
-&gt; Expr ast
</span><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located (Expr' Shunted)
ASTLocate Shunted (Expr' Shunted)
</span><a href="#local-6989586621680210298"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedType -&gt; Type Shunted
forall {a1} {a2} (ast1 :: a1) (ast2 :: a2) {f :: * -&gt; *}.
(Select TupleType ast1 ~ DataConCantHappen,
 Select TypeKind ast1 ~ Select TypeKind ast2,
 Select UnitTypeInfo ast1 ~ Select UnitTypeInfo ast2,
 CleanupLocated (ASTLocate' ast2 (Type' ast2)) ~ f (Type' ast2),
 CleanupLocated (ASTLocate' ast1 (Select ASTTypeVar ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select ASTTypeVar ast2)),
 CleanupLocated (ASTLocate' ast1 (Select UserDefinedType ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select UserDefinedType ast2)),
 CleanupLocated (ASTLocate' ast1 (Type' ast1)) ~ f (Type' ast1),
 CleanupLocated (ASTLocate' ast1 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast2 LowerAlphaName),
 Functor f) =&gt;
Type ast1 -&gt; Type ast2
</span><a href="Elara.AST.Generic.Types.html#coerceType"><span class="hs-identifier hs-var">coerceType</span></a></span><span> </span><span class="annot"><span class="annottext">(RenamedType -&gt; Type Shunted)
-&gt; Maybe RenamedType -&gt; Maybe (Type Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe RenamedType
Select (ASTType ForExpr) Renamed
</span><a href="#local-6989586621680210297"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Located (Expr' Shunted) -&gt; Expr Shunted)
-&gt; Eff r (Located (Expr' Shunted)) -&gt; Eff r (Expr Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located RenamedExpr')
  (Located (Expr' Shunted))
  RenamedExpr'
  (Expr' Shunted)
-&gt; (RenamedExpr' -&gt; Eff r (Expr' Shunted))
-&gt; Located RenamedExpr'
-&gt; Eff r (Located (Expr' Shunted))
forall k (f :: * -&gt; *) (is :: IxList) s t a b.
(Is k A_Traversal, Applicative f) =&gt;
Optic k is s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located RenamedExpr')
  (Located (Expr' Shunted))
  RenamedExpr'
  (Expr' Shunted)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr' -&gt; Eff r (Expr' Shunted)
</span><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="annot"><span class="annottext">Located RenamedExpr'
ASTLocate Renamed RenamedExpr'
</span><a href="#local-6989586621680210296"><span class="hs-identifier hs-var">le</span></a></span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-type">shuntExpr'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedExpr%27"><span class="hs-identifier hs-type">RenamedExpr'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680210084"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedExpr%27"><span class="hs-identifier hs-type">ShuntedExpr'</span></a></span><span>
</span><span id="line-342"></span><span>    </span><span id="local-6989586621680210299"><span class="annot"><span class="annottext">shuntExpr' :: RenamedExpr' -&gt; Eff r (Expr' Shunted)
</span><a href="#local-6989586621680210299"><span class="hs-identifier hs-var hs-var">shuntExpr'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span id="local-6989586621680210302"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680210302"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' Shunted -&gt; Eff r (Expr' Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Expr' Shunted
forall a (ast :: a). Integer -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Int"><span class="hs-identifier hs-var">Int</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680210302"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Float"><span class="hs-identifier hs-type">Float</span></a></span><span> </span><span id="local-6989586621680210304"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680210304"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' Shunted -&gt; Eff r (Expr' Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Expr' Shunted
forall a (ast :: a). Double -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Float"><span class="hs-identifier hs-var">Float</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680210304"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span id="local-6989586621680210306"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680210306"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' Shunted -&gt; Eff r (Expr' Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Expr' Shunted
forall a (ast :: a). Text -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#String"><span class="hs-identifier hs-var">String</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680210306"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-345"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Char"><span class="hs-identifier hs-type">Char</span></a></span><span> </span><span id="local-6989586621680210308"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621680210308"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' Shunted -&gt; Eff r (Expr' Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Expr' Shunted
forall a (ast :: a). Char -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Char"><span class="hs-identifier hs-var">Char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621680210308"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr'
</span><a href="Elara.AST.Generic.Types.html#Unit"><span class="hs-identifier hs-var">Unit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' Shunted -&gt; Eff r (Expr' Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Expr' Shunted
forall a (ast :: a). Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Unit"><span class="hs-identifier hs-var">Unit</span></a></span><span>
</span><span id="line-347"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621680210311"><span class="annot"><span class="annottext">ASTLocate Renamed (Select ASTVarRef Renamed)
</span><a href="#local-6989586621680210311"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' Shunted -&gt; Eff r (Expr' Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTLocate Shunted (Select ASTVarRef Shunted) -&gt; Expr' Shunted
forall a (ast :: a).
ASTLocate ast (Select ASTVarRef ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate Renamed (Select ASTVarRef Renamed)
ASTLocate Shunted (Select ASTVarRef Shunted)
</span><a href="#local-6989586621680210311"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Constructor"><span class="hs-identifier hs-type">Constructor</span></a></span><span> </span><span id="local-6989586621680210313"><span class="annot"><span class="annottext">ASTLocate Renamed (Select ConRef Renamed)
</span><a href="#local-6989586621680210313"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr' Shunted -&gt; Eff r (Expr' Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTLocate Shunted (Select ConRef Shunted) -&gt; Expr' Shunted
forall a (ast :: a). ASTLocate ast (Select ConRef ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Constructor"><span class="hs-identifier hs-var">Constructor</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate Renamed (Select ConRef Renamed)
ASTLocate Shunted (Select ConRef Shunted)
</span><a href="#local-6989586621680210313"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-349"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Lambda"><span class="hs-identifier hs-type">Lambda</span></a></span><span> </span><span id="local-6989586621680210315"><span class="annot"><span class="annottext">ASTLocate Renamed (Select LambdaPattern Renamed)
</span><a href="#local-6989586621680210315"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680210316"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210316"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-350"></span><span>        </span><span id="local-6989586621680210317"><span class="annot"><a href="#local-6989586621680210317"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210316"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-351"></span><span>        </span><span id="local-6989586621680210318"><span class="annot"><a href="#local-6989586621680210318"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">traverseOf</span></span><span> </span><span class="annot"><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-type">unlocated</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypedLambdaParam"><span class="hs-identifier hs-type">TypedLambdaParam</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680210320"><span class="annot"><span class="annottext">Unique VarName
</span><a href="#local-6989586621680210320"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680210321"><span class="annot"><span class="annottext">Select PatternType Renamed
</span><a href="#local-6989586621680210321"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypedLambdaParam (Unique VarName) Shunted
-&gt; Eff r (TypedLambdaParam (Unique VarName) Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TypedLambdaParam (Unique VarName) Shunted
 -&gt; Eff r (TypedLambdaParam (Unique VarName) Shunted))
-&gt; TypedLambdaParam (Unique VarName) Shunted
-&gt; Eff r (TypedLambdaParam (Unique VarName) Shunted)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Unique VarName, Select PatternType Shunted)
-&gt; TypedLambdaParam (Unique VarName) Shunted
forall {a} v (ast :: a).
(v, Select PatternType ast) -&gt; TypedLambdaParam v ast
</span><a href="Elara.AST.Generic.Types.html#TypedLambdaParam"><span class="hs-identifier hs-var">TypedLambdaParam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique VarName
</span><a href="#local-6989586621680210320"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedType -&gt; Type Shunted
forall {a1} {a2} (ast1 :: a1) (ast2 :: a2) {f :: * -&gt; *}.
(Select TupleType ast1 ~ DataConCantHappen,
 Select TypeKind ast1 ~ Select TypeKind ast2,
 Select UnitTypeInfo ast1 ~ Select UnitTypeInfo ast2,
 CleanupLocated (ASTLocate' ast2 (Type' ast2)) ~ f (Type' ast2),
 CleanupLocated (ASTLocate' ast1 (Select ASTTypeVar ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select ASTTypeVar ast2)),
 CleanupLocated (ASTLocate' ast1 (Select UserDefinedType ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select UserDefinedType ast2)),
 CleanupLocated (ASTLocate' ast1 (Type' ast1)) ~ f (Type' ast1),
 CleanupLocated (ASTLocate' ast1 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast2 LowerAlphaName),
 Functor f) =&gt;
Type ast1 -&gt; Type ast2
</span><a href="Elara.AST.Generic.Types.html#coerceType"><span class="hs-identifier hs-var">coerceType</span></a></span><span> </span><span class="annot"><span class="annottext">(RenamedType -&gt; Type Shunted)
-&gt; Maybe RenamedType -&gt; Maybe (Type Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe RenamedType
Select PatternType Renamed
</span><a href="#local-6989586621680210321"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680210315"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-352"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Lambda"><span class="hs-identifier hs-type">Lambda</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210318"><span class="hs-identifier hs-type">n'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210317"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#FunctionCall"><span class="hs-identifier hs-type">FunctionCall</span></a></span><span> </span><span id="local-6989586621680210323"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210323"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680210324"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210324"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr Shunted -&gt; Expr Shunted -&gt; Expr' Shunted
forall a (ast :: a). Expr ast -&gt; Expr ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#FunctionCall"><span class="hs-identifier hs-var">FunctionCall</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr Shunted -&gt; Expr Shunted -&gt; Expr' Shunted)
-&gt; Eff r (Expr Shunted) -&gt; Eff r (Expr Shunted -&gt; Expr' Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210323"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Eff r (Expr Shunted -&gt; Expr' Shunted)
-&gt; Eff r (Expr Shunted) -&gt; Eff r (Expr' Shunted)
forall a b. Eff r (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210324"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-354"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#TypeApplication"><span class="hs-identifier hs-type">TypeApplication</span></a></span><span> </span><span id="local-6989586621680210326"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210326"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680210327"><span class="annot"><span class="annottext">Select TypeApplication Renamed
</span><a href="#local-6989586621680210327"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr Shunted -&gt; Type Shunted -&gt; Expr' Shunted
Expr Shunted -&gt; Select TypeApplication Shunted -&gt; Expr' Shunted
forall a (ast :: a).
Expr ast -&gt; Select TypeApplication ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#TypeApplication"><span class="hs-identifier hs-var">TypeApplication</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr Shunted -&gt; Type Shunted -&gt; Expr' Shunted)
-&gt; Eff r (Expr Shunted) -&gt; Eff r (Type Shunted -&gt; Expr' Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210326"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Eff r (Type Shunted -&gt; Expr' Shunted)
-&gt; Eff r (Type Shunted) -&gt; Eff r (Expr' Shunted)
forall a b. Eff r (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type Shunted -&gt; Eff r (Type Shunted)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedType -&gt; Type Shunted
forall {a1} {a2} (ast1 :: a1) (ast2 :: a2) {f :: * -&gt; *}.
(Select TupleType ast1 ~ DataConCantHappen,
 Select TypeKind ast1 ~ Select TypeKind ast2,
 Select UnitTypeInfo ast1 ~ Select UnitTypeInfo ast2,
 CleanupLocated (ASTLocate' ast2 (Type' ast2)) ~ f (Type' ast2),
 CleanupLocated (ASTLocate' ast1 (Select ASTTypeVar ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select ASTTypeVar ast2)),
 CleanupLocated (ASTLocate' ast1 (Select UserDefinedType ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select UserDefinedType ast2)),
 CleanupLocated (ASTLocate' ast1 (Type' ast1)) ~ f (Type' ast1),
 CleanupLocated (ASTLocate' ast1 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast2 LowerAlphaName),
 Functor f) =&gt;
Type ast1 -&gt; Type ast2
</span><a href="Elara.AST.Generic.Types.html#coerceType"><span class="hs-identifier hs-var">coerceType</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedType
Select TypeApplication Renamed
</span><a href="#local-6989586621680210327"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#BinaryOperator"><span class="hs-identifier hs-type">BinaryOperator</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680210328"><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680210328"><span class="hs-identifier hs-var">operator</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680210329"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210329"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680210330"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210330"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-356"></span><span>        </span><span class="hs-comment">-- turn the binary operator into 2 function calls</span><span>
</span><span id="line-357"></span><span>        </span><span class="hs-comment">-- (a `op` b) -&gt; (op a) b</span><span>
</span><span id="line-358"></span><span>        </span><span class="hs-comment">-- ((a `op` b) `op` c) -&gt; (op (op a b)) c</span><span>
</span><span id="line-359"></span><span>        </span><span class="hs-comment">-- Semantics for type annotation shifting are as follows:</span><span>
</span><span id="line-360"></span><span>        </span><span class="hs-comment">-- (a : T) `op` b -&gt; (op (a : T)) b</span><span>
</span><span id="line-361"></span><span>        </span><span class="hs-comment">-- a `op` (b : T) -&gt; (op a) (b : T)</span><span>
</span><span id="line-362"></span><span>        </span><span class="hs-comment">-- (a : T1) `op` (b : T2) -&gt; (op (a : T1)) (b : T2)</span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span>        </span><span id="local-6989586621680210331"><span class="annot"><a href="#local-6989586621680210331"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210329"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-365"></span><span>        </span><span id="local-6989586621680210332"><span class="annot"><a href="#local-6989586621680210332"><span class="hs-identifier hs-var">r'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-type">fixExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210330"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-366"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680210333"><span class="annot"><a href="#local-6989586621680210333"><span class="hs-identifier hs-var hs-var">op'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680210328"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
-&gt; Optic'
     A_Lens NoIx RenamedBinaryOperator (BinaryOperator' Renamed)
-&gt; BinaryOperator' Renamed
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedBinaryOperator
  RenamedBinaryOperator
  (Located (BinaryOperator' Renamed))
  (Located (BinaryOperator' Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedBinaryOperator
  RenamedBinaryOperator
  (Located (BinaryOperator' Renamed))
  (Located (BinaryOperator' Renamed))
-&gt; Optic
     A_Lens
     NoIx
     (Located (BinaryOperator' Renamed))
     (Located (BinaryOperator' Renamed))
     (BinaryOperator' Renamed)
     (BinaryOperator' Renamed)
-&gt; Optic'
     A_Lens NoIx RenamedBinaryOperator (BinaryOperator' Renamed)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (BinaryOperator' Renamed))
  (Located (BinaryOperator' Renamed))
  (BinaryOperator' Renamed)
  (BinaryOperator' Renamed)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-367"></span><span>                </span><span class="annot"><a href="Elara.AST.Generic.Types.html#SymOp"><span class="hs-identifier hs-type">SymOp</span></a></span><span> </span><span id="local-6989586621680210334"><span class="annot"><span class="annottext">ASTLocate Renamed (Select SymOp Renamed)
</span><a href="#local-6989586621680210334"><span class="hs-identifier hs-var">lopName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ASTLocate Shunted (Select ASTVarRef Shunted) -&gt; Expr' Shunted
forall a (ast :: a).
ASTLocate ast (Select ASTVarRef ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OpName -&gt; VarName
</span><a href="Elara.AST.Name.html#OperatorVarName"><span class="hs-identifier hs-var">OperatorVarName</span></a></span><span> </span><span class="annot"><span class="annottext">(OpName -&gt; VarName)
-&gt; Located (VarRef' LocatedVarRefKind OpName)
-&gt; Located (VarRef' LocatedVarRefKind VarName)
forall (f :: * -&gt; *) (g :: * -&gt; *) a b.
(Functor f, Functor g) =&gt;
(a -&gt; b) -&gt; f (g a) -&gt; f (g b)
</span><span class="hs-operator hs-var">&lt;&lt;$&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Located (VarRef' LocatedVarRefKind OpName)
ASTLocate Renamed (Select SymOp Renamed)
</span><a href="#local-6989586621680210334"><span class="hs-identifier hs-var">lopName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr' Shunted
-&gt; Located (VarRef' LocatedVarRefKind OpName)
-&gt; Located (Expr' Shunted)
forall b a. HasSourceRegion b =&gt; a -&gt; b -&gt; Located a
</span><a href="Elara.AST.Region.html#withLocationOf"><span class="hs-operator hs-var">`withLocationOf`</span></a></span><span> </span><span class="annot"><span class="annottext">Located (VarRef' LocatedVarRefKind OpName)
ASTLocate Renamed (Select SymOp Renamed)
</span><a href="#local-6989586621680210334"><span class="hs-identifier hs-var">lopName</span></a></span><span>
</span><span id="line-368"></span><span>                </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Infixed"><span class="hs-identifier hs-type">Infixed</span></a></span><span> </span><span id="local-6989586621680210336"><span class="annot"><span class="annottext">Select Infixed Renamed
</span><a href="#local-6989586621680210336"><span class="hs-identifier hs-var">inName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-369"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680210337"><span class="annot"><span class="annottext">z :: Expr' Shunted
</span><a href="#local-6989586621680210337"><span class="hs-identifier hs-var hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Select Infixed Renamed
</span><a href="#local-6989586621680210336"><span class="hs-identifier hs-var">inName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-370"></span><span>                            </span><span class="annot"><a href="Elara.AST.VarRef.html#Global"><span class="hs-identifier hs-type">Global</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span id="local-6989586621680210338"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680210338"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span id="local-6989586621680210340"><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680210340"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680210341"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680210341"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-371"></span><span>                                </span><span class="annot"><span class="annottext">ASTLocate Shunted (Select ASTVarRef Shunted) -&gt; Expr' Shunted
forall a (ast :: a).
ASTLocate ast (Select ASTVarRef ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span>
</span><span id="line-372"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion
-&gt; VarRef' LocatedVarRefKind VarName
-&gt; Located (VarRef' LocatedVarRefKind VarName)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680210338"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarRefImpl LocatedVarRefKind (Qualified VarName)
-&gt; VarRef' LocatedVarRefKind VarName
forall (c :: VarRefKind) n.
VarRefImpl c (Qualified n) -&gt; VarRef' c n
</span><a href="Elara.AST.VarRef.html#Global"><span class="hs-identifier hs-var">Global</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion -&gt; Qualified VarName -&gt; Located (Qualified VarName)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680210338"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarName -&gt; ModuleName -&gt; Qualified VarName
forall name. name -&gt; ModuleName -&gt; Qualified name
</span><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-var">Qualified</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LowerAlphaName -&gt; VarName
</span><a href="Elara.AST.Name.html#NormalVarName"><span class="hs-identifier hs-var">NormalVarName</span></a></span><span> </span><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680210340"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680210341"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>                            </span><span class="annot"><a href="Elara.AST.VarRef.html#Global"><span class="hs-identifier hs-type">Global</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span id="local-6989586621680210342"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680210342"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-type">Qualified</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#ConName"><span class="hs-identifier hs-type">ConName</span></a></span><span> </span><span id="local-6989586621680210343"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621680210343"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680210344"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680210344"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-374"></span><span>                                </span><span class="annot"><span class="annottext">ASTLocate Shunted (Select ConRef Shunted) -&gt; Expr' Shunted
forall a (ast :: a). ASTLocate ast (Select ConRef ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Constructor"><span class="hs-identifier hs-var">Constructor</span></a></span><span>
</span><span id="line-375"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion -&gt; Qualified TypeName -&gt; Located (Qualified TypeName)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680210342"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeName -&gt; ModuleName -&gt; Qualified TypeName
forall name. name -&gt; ModuleName -&gt; Qualified name
</span><a href="Elara.AST.Name.html#Qualified"><span class="hs-identifier hs-var">Qualified</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621680210343"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680210344"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-376"></span><span>                            </span><span class="annot"><a href="Elara.AST.VarRef.html#Local"><span class="hs-identifier hs-type">Local</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span id="local-6989586621680210345"><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680210345"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span id="local-6989586621680210346"><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680210346"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680210347"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680210347"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-377"></span><span>                                </span><span class="annot"><span class="annottext">ASTLocate Shunted (Select ASTVarRef Shunted) -&gt; Expr' Shunted
forall a (ast :: a).
ASTLocate ast (Select ASTVarRef ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span>
</span><span id="line-378"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion
-&gt; VarRef' LocatedVarRefKind VarName
-&gt; Located (VarRef' LocatedVarRefKind VarName)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680210345"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarRefImpl LocatedVarRefKind (Unique VarName)
-&gt; VarRef' LocatedVarRefKind VarName
forall (c :: VarRefKind) n. VarRefImpl c (Unique n) -&gt; VarRef' c n
</span><a href="Elara.AST.VarRef.html#Local"><span class="hs-identifier hs-var">Local</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceRegion -&gt; Unique VarName -&gt; Located (Unique VarName)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><a href="#local-6989586621680210345"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarName -&gt; Int -&gt; Unique VarName
forall a. a -&gt; Int -&gt; Unique a
</span><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LowerAlphaName -&gt; VarName
</span><a href="Elara.AST.Name.html#NormalVarName"><span class="hs-identifier hs-var">NormalVarName</span></a></span><span> </span><span class="annot"><span class="annottext">LowerAlphaName
</span><a href="#local-6989586621680210346"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680210347"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>                            </span><span class="annot"><a href="Elara.AST.VarRef.html#Local"><span class="hs-identifier hs-type">Local</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Name.html#ConName"><span class="hs-identifier hs-type">ConName</span></a></span><span> </span><span id="local-6989586621680210348"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621680210348"><span class="hs-identifier hs-var">_1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Expr' Shunted
forall a t. (HasCallStack, IsText t) =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Shouldn't have local con names&quot;</span></span><span>
</span><span id="line-380"></span><span>                    </span><span class="annot"><span class="annottext">Expr' Shunted
</span><a href="#local-6989586621680210337"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">Expr' Shunted
-&gt; Located (BinaryOperator' Renamed) -&gt; Located (Expr' Shunted)
forall b a. HasSourceRegion b =&gt; a -&gt; b -&gt; Located a
</span><a href="Elara.AST.Region.html#withLocationOf"><span class="hs-operator hs-var">`withLocationOf`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RenamedBinaryOperator
</span><a href="#local-6989586621680210328"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedBinaryOperator
-&gt; Iso
     RenamedBinaryOperator
     RenamedBinaryOperator
     (Located (BinaryOperator' Renamed))
     (Located (BinaryOperator' Renamed))
-&gt; Located (BinaryOperator' Renamed)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Iso
  RenamedBinaryOperator
  RenamedBinaryOperator
  (Located (BinaryOperator' Renamed))
  (Located (BinaryOperator' Renamed))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680210350"><span class="annot"><a href="#local-6989586621680210350"><span class="hs-identifier hs-var hs-var">opVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ASTLocate Shunted (Expr' Shunted),
 Select (ASTType ForExpr) Shunted)
-&gt; Expr Shunted
forall a (ast :: a).
(ASTLocate ast (Expr' ast), Select (ASTType ForExpr) ast)
-&gt; Expr ast
</span><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located (Expr' Shunted)
ASTLocate Shunted (Expr' Shunted)
</span><a href="#local-6989586621680210333"><span class="hs-identifier hs-var">op'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Type Shunted)
Select (ASTType ForExpr) Shunted
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- There can't ever be a type annotation on an operator</span><span>
</span><span id="line-383"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680210351"><span class="annot"><a href="#local-6989586621680210351"><span class="hs-identifier hs-var hs-var">leftCall</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-384"></span><span>                </span><span class="annot"><span class="annottext">(ASTLocate Shunted (Expr' Shunted),
 Select (ASTType ForExpr) Shunted)
-&gt; Expr Shunted
forall a (ast :: a).
(ASTLocate ast (Expr' ast), Select (ASTType ForExpr) ast)
-&gt; Expr ast
</span><a href="Elara.AST.Generic.Types.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span>
</span><span id="line-385"></span><span>                    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">SourceRegion -&gt; Expr' Shunted -&gt; Located (Expr' Shunted)
forall a. SourceRegion -&gt; a -&gt; Located a
</span><a href="Elara.AST.Region.html#Located"><span class="hs-identifier hs-var">Located</span></a></span><span>
</span><span id="line-386"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty SourceRegion -&gt; SourceRegion
</span><a href="Elara.AST.Region.html#spanningRegion%27"><span class="hs-identifier hs-var">Located.spanningRegion'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located (Expr' Shunted)
</span><a href="#local-6989586621680210333"><span class="hs-identifier hs-var">op'</span></a></span><span> </span><span class="annot"><span class="annottext">Located (Expr' Shunted)
-&gt; Optic' A_Lens NoIx (Located (Expr' Shunted)) SourceRegion
-&gt; SourceRegion
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx (Located (Expr' Shunted)) SourceRegion
forall a. HasSourceRegion a =&gt; Lens' a SourceRegion
</span><a href="Elara.AST.Region.html#sourceRegion"><span class="hs-identifier hs-var">sourceRegion</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRegion -&gt; [SourceRegion] -&gt; NonEmpty SourceRegion
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Expr Shunted
</span><a href="#local-6989586621680210331"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="annot"><span class="annottext">Expr Shunted
-&gt; Optic' A_Lens NoIx (Expr Shunted) SourceRegion -&gt; SourceRegion
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Iso
  (Expr Shunted)
  (Expr Shunted)
  (Located (Expr' Shunted), Maybe (Type Shunted))
  (Located (Expr' Shunted), Maybe (Type Shunted))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Iso
  (Expr Shunted)
  (Expr Shunted)
  (Located (Expr' Shunted), Maybe (Type Shunted))
  (Located (Expr' Shunted), Maybe (Type Shunted))
-&gt; Optic
     A_Lens
     NoIx
     (Located (Expr' Shunted), Maybe (Type Shunted))
     (Located (Expr' Shunted), Maybe (Type Shunted))
     (Located (Expr' Shunted))
     (Located (Expr' Shunted))
-&gt; Optic
     A_Lens
     NoIx
     (Expr Shunted)
     (Expr Shunted)
     (Located (Expr' Shunted))
     (Located (Expr' Shunted))
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (Expr' Shunted), Maybe (Type Shunted))
  (Located (Expr' Shunted), Maybe (Type Shunted))
  (Located (Expr' Shunted))
  (Located (Expr' Shunted))
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Expr Shunted)
  (Expr Shunted)
  (Located (Expr' Shunted))
  (Located (Expr' Shunted))
-&gt; Optic' A_Lens NoIx (Located (Expr' Shunted)) SourceRegion
-&gt; Optic' A_Lens NoIx (Expr Shunted) SourceRegion
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx (Located (Expr' Shunted)) SourceRegion
forall a. HasSourceRegion a =&gt; Lens' a SourceRegion
</span><a href="Elara.AST.Region.html#sourceRegion"><span class="hs-identifier hs-var">sourceRegion</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr Shunted -&gt; Expr Shunted -&gt; Expr' Shunted
forall a (ast :: a). Expr ast -&gt; Expr ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#FunctionCall"><span class="hs-identifier hs-var">FunctionCall</span></a></span><span> </span><span class="annot"><span class="annottext">Expr Shunted
</span><a href="#local-6989586621680210350"><span class="hs-identifier hs-var">opVar</span></a></span><span> </span><span class="annot"><span class="annottext">Expr Shunted
</span><a href="#local-6989586621680210331"><span class="hs-identifier hs-var">l'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Type Shunted)
Select (ASTType ForExpr) Shunted
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- this will / can never have a type annotation</span><span>
</span><span id="line-389"></span><span>                    </span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#FunctionCall"><span class="hs-identifier hs-type">FunctionCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210351"><span class="hs-identifier hs-type">leftCall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210332"><span class="hs-identifier hs-type">r'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-391"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#If"><span class="hs-identifier hs-type">If</span></a></span><span> </span><span id="local-6989586621680210355"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210355"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621680210356"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210356"><span class="hs-identifier hs-var">then'</span></a></span></span><span> </span><span id="local-6989586621680210357"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210357"><span class="hs-identifier hs-var">else'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr Shunted -&gt; Expr Shunted -&gt; Expr Shunted -&gt; Expr' Shunted
forall a (ast :: a). Expr ast -&gt; Expr ast -&gt; Expr ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#If"><span class="hs-identifier hs-var">If</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr Shunted -&gt; Expr Shunted -&gt; Expr Shunted -&gt; Expr' Shunted)
-&gt; Eff r (Expr Shunted)
-&gt; Eff r (Expr Shunted -&gt; Expr Shunted -&gt; Expr' Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210355"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="annot"><span class="annottext">Eff r (Expr Shunted -&gt; Expr Shunted -&gt; Expr' Shunted)
-&gt; Eff r (Expr Shunted) -&gt; Eff r (Expr Shunted -&gt; Expr' Shunted)
forall a b. Eff r (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210356"><span class="hs-identifier hs-var">then'</span></a></span><span> </span><span class="annot"><span class="annottext">Eff r (Expr Shunted -&gt; Expr' Shunted)
-&gt; Eff r (Expr Shunted) -&gt; Eff r (Expr' Shunted)
forall a b. Eff r (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210357"><span class="hs-identifier hs-var">else'</span></a></span><span>
</span><span id="line-392"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Let"><span class="hs-identifier hs-type">Let</span></a></span><span> </span><span id="local-6989586621680210359"><span class="annot"><span class="annottext">ASTLocate Renamed (Select LetParamName Renamed)
</span><a href="#local-6989586621680210359"><span class="hs-identifier hs-var">vn</span></a></span></span><span> </span><span class="annot"><span class="annottext">Select LetPattern Renamed
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680210360"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210360"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASTLocate Shunted (Select LetParamName Shunted)
-&gt; Select LetPattern Shunted -&gt; Expr Shunted -&gt; Expr' Shunted
forall a (ast :: a).
ASTLocate ast (Select LetParamName ast)
-&gt; Select LetPattern ast -&gt; Expr ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate Renamed (Select LetParamName Renamed)
ASTLocate Shunted (Select LetParamName Shunted)
</span><a href="#local-6989586621680210359"><span class="hs-identifier hs-var">vn</span></a></span><span> </span><span class="annot"><span class="annottext">NoFieldValue
Select LetPattern Shunted
</span><a href="Elara.AST.Generic.Common.html#NoFieldValue"><span class="hs-identifier hs-var">NoFieldValue</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr Shunted -&gt; Expr' Shunted)
-&gt; Eff r (Expr Shunted) -&gt; Eff r (Expr' Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210360"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-393"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#LetIn"><span class="hs-identifier hs-type">LetIn</span></a></span><span> </span><span id="local-6989586621680210362"><span class="annot"><span class="annottext">ASTLocate Renamed (Select LetParamName Renamed)
</span><a href="#local-6989586621680210362"><span class="hs-identifier hs-var">vn</span></a></span></span><span> </span><span class="annot"><span class="annottext">Select LetPattern Renamed
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680210363"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210363"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680210364"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210364"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASTLocate Shunted (Select LetParamName Shunted)
-&gt; Select LetPattern Shunted
-&gt; Expr Shunted
-&gt; Expr Shunted
-&gt; Expr' Shunted
forall a (ast :: a).
ASTLocate ast (Select LetParamName ast)
-&gt; Select LetPattern ast -&gt; Expr ast -&gt; Expr ast -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#LetIn"><span class="hs-identifier hs-var">LetIn</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate Renamed (Select LetParamName Renamed)
ASTLocate Shunted (Select LetParamName Shunted)
</span><a href="#local-6989586621680210362"><span class="hs-identifier hs-var">vn</span></a></span><span> </span><span class="annot"><span class="annottext">NoFieldValue
Select LetPattern Shunted
</span><a href="Elara.AST.Generic.Common.html#NoFieldValue"><span class="hs-identifier hs-var">NoFieldValue</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr Shunted -&gt; Expr Shunted -&gt; Expr' Shunted)
-&gt; Eff r (Expr Shunted) -&gt; Eff r (Expr Shunted -&gt; Expr' Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210363"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Eff r (Expr Shunted -&gt; Expr' Shunted)
-&gt; Eff r (Expr Shunted) -&gt; Eff r (Expr' Shunted)
forall a b. Eff r (a -&gt; b) -&gt; Eff r a -&gt; Eff r b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210364"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-394"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span id="local-6989586621680210366"><span class="annot"><span class="annottext">NonEmpty RenamedExpr
</span><a href="#local-6989586621680210366"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty (Expr Shunted) -&gt; Expr' Shunted
forall a (ast :: a). NonEmpty (Expr ast) -&gt; Expr' ast
</span><a href="Elara.AST.Generic.Types.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (Expr Shunted) -&gt; Expr' Shunted)
-&gt; Eff r (NonEmpty (Expr Shunted)) -&gt; Eff r (Expr' Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(RenamedExpr -&gt; Eff r (Expr Shunted))
-&gt; NonEmpty RenamedExpr -&gt; Eff r (NonEmpty (Expr Shunted))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; NonEmpty a -&gt; f (NonEmpty b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty RenamedExpr
</span><a href="#local-6989586621680210366"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-395"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span id="local-6989586621680210368"><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210368"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680210369"><span class="annot"><span class="annottext">[(Pattern Renamed, RenamedExpr)]
</span><a href="#local-6989586621680210369"><span class="hs-identifier hs-var">cases</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-396"></span><span>        </span><span id="local-6989586621680210370"><span class="annot"><a href="#local-6989586621680210370"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
</span><a href="#local-6989586621680210368"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-397"></span><span>        </span><span id="local-6989586621680210371"><span class="annot"><a href="#local-6989586621680210371"><span class="hs-identifier hs-var">cases'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">bitraverse</span></span><span> </span><span class="annot"><a href="Elara.Shunt.html#shuntPattern"><span class="hs-identifier hs-type">shuntPattern</span></a></span><span> </span><span class="annot"><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-type">fixExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680210369"><span class="hs-identifier hs-type">cases</span></a></span><span>
</span><span id="line-398"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Elara.AST.Generic.Types.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210370"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680210371"><span class="hs-identifier hs-type">cases'</span></a></span><span>
</span><span id="line-399"></span><span>    </span><span class="annot"><a href="#local-6989586621680210299"><span class="hs-identifier hs-var">shuntExpr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#InParens"><span class="hs-identifier hs-type">InParens</span></a></span><span> </span><span id="local-6989586621680210374"><span class="annot"><span class="annottext">Select InParens Renamed
</span><a href="#local-6989586621680210374"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr Shunted
-&gt; Optic' A_Lens NoIx (Expr Shunted) (Expr' Shunted)
-&gt; Expr' Shunted
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Iso
  (Expr Shunted)
  (Expr Shunted)
  (Located (Expr' Shunted), Maybe (Type Shunted))
  (Located (Expr' Shunted), Maybe (Type Shunted))
forall s t a b. Wrapped s t a b =&gt; Iso s t a b
</span><span class="hs-identifier hs-var">_Unwrapped</span></span><span> </span><span class="annot"><span class="annottext">Iso
  (Expr Shunted)
  (Expr Shunted)
  (Located (Expr' Shunted), Maybe (Type Shunted))
  (Located (Expr' Shunted), Maybe (Type Shunted))
-&gt; Optic
     A_Lens
     NoIx
     (Located (Expr' Shunted), Maybe (Type Shunted))
     (Located (Expr' Shunted), Maybe (Type Shunted))
     (Located (Expr' Shunted))
     (Located (Expr' Shunted))
-&gt; Optic
     A_Lens
     NoIx
     (Expr Shunted)
     (Expr Shunted)
     (Located (Expr' Shunted))
     (Located (Expr' Shunted))
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (Expr' Shunted), Maybe (Type Shunted))
  (Located (Expr' Shunted), Maybe (Type Shunted))
  (Located (Expr' Shunted))
  (Located (Expr' Shunted))
forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Expr Shunted)
  (Expr Shunted)
  (Located (Expr' Shunted))
  (Located (Expr' Shunted))
-&gt; Optic
     A_Lens
     NoIx
     (Located (Expr' Shunted))
     (Located (Expr' Shunted))
     (Expr' Shunted)
     (Expr' Shunted)
-&gt; Optic' A_Lens NoIx (Expr Shunted) (Expr' Shunted)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (Expr' Shunted))
  (Located (Expr' Shunted))
  (Expr' Shunted)
  (Expr' Shunted)
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Expr Shunted -&gt; Expr' Shunted)
-&gt; Eff r (Expr Shunted) -&gt; Eff r (Expr' Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RenamedExpr -&gt; Eff r (Expr Shunted)
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
(ShuntPipelineEffects r, HasOpLookup r) =&gt;
RenamedExpr -&gt; Eff r (Expr Shunted)
</span><a href="Elara.Shunt.html#fixExpr"><span class="hs-identifier hs-var">fixExpr</span></a></span><span> </span><span class="annot"><span class="annottext">RenamedExpr
Select InParens Renamed
</span><a href="#local-6989586621680210374"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span id="local-6989586621680208896"><span class="annot"><a href="Elara.Shunt.html#shuntPattern"><span class="hs-identifier hs-type">shuntPattern</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedPattern"><span class="hs-identifier hs-type">RenamedPattern</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208896"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedPattern"><span class="hs-identifier hs-type">ShuntedPattern</span></a></span></span><span>
</span><span id="line-402"></span><span id="shuntPattern"><span class="annot"><span class="annottext">shuntPattern :: forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
Pattern Renamed -&gt; Eff r ShuntedPattern
</span><a href="Elara.Shunt.html#shuntPattern"><span class="hs-identifier hs-var hs-var">shuntPattern</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#Pattern"><span class="hs-identifier hs-type">Pattern</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680210396"><span class="annot"><span class="annottext">ASTLocate Renamed (Pattern' Renamed)
</span><a href="#local-6989586621680210396"><span class="hs-identifier hs-var">le</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680210397"><span class="annot"><span class="annottext">Select PatternType Renamed
</span><a href="#local-6989586621680210397"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680210398"><span class="annot"><span class="annottext">Located ShuntedPattern'
</span><a href="#local-6989586621680210398"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ASTLocate Shunted ShuntedPattern', Select PatternType Shunted)
-&gt; ShuntedPattern
forall {a} (ast :: a).
(ASTLocate ast (Pattern' ast), Select PatternType ast)
-&gt; Pattern ast
</span><a href="Elara.AST.Generic.Types.html#Pattern"><span class="hs-identifier hs-var">Pattern</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located ShuntedPattern'
ASTLocate Shunted ShuntedPattern'
</span><a href="#local-6989586621680210398"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RenamedType -&gt; Type Shunted
forall {a1} {a2} (ast1 :: a1) (ast2 :: a2) {f :: * -&gt; *}.
(Select TupleType ast1 ~ DataConCantHappen,
 Select TypeKind ast1 ~ Select TypeKind ast2,
 Select UnitTypeInfo ast1 ~ Select UnitTypeInfo ast2,
 CleanupLocated (ASTLocate' ast2 (Type' ast2)) ~ f (Type' ast2),
 CleanupLocated (ASTLocate' ast1 (Select ASTTypeVar ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select ASTTypeVar ast2)),
 CleanupLocated (ASTLocate' ast1 (Select UserDefinedType ast1))
 ~ CleanupLocated (ASTLocate' ast2 (Select UserDefinedType ast2)),
 CleanupLocated (ASTLocate' ast1 (Type' ast1)) ~ f (Type' ast1),
 CleanupLocated (ASTLocate' ast1 LowerAlphaName)
 ~ CleanupLocated (ASTLocate' ast2 LowerAlphaName),
 Functor f) =&gt;
Type ast1 -&gt; Type ast2
</span><a href="Elara.AST.Generic.Types.html#coerceType"><span class="hs-identifier hs-var">coerceType</span></a></span><span> </span><span class="annot"><span class="annottext">(RenamedType -&gt; Type Shunted)
-&gt; Maybe RenamedType -&gt; Maybe (Type Shunted)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe RenamedType
Select PatternType Renamed
</span><a href="#local-6989586621680210397"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Located ShuntedPattern' -&gt; ShuntedPattern)
-&gt; Eff r (Located ShuntedPattern') -&gt; Eff r ShuntedPattern
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (Pattern' Renamed))
  (Located ShuntedPattern')
  (Pattern' Renamed)
  ShuntedPattern'
-&gt; (Pattern' Renamed -&gt; Eff r ShuntedPattern')
-&gt; Located (Pattern' Renamed)
-&gt; Eff r (Located ShuntedPattern')
forall k (f :: * -&gt; *) (is :: IxList) s t a b.
(Is k A_Traversal, Applicative f) =&gt;
Optic k is s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Lens
  NoIx
  (Located (Pattern' Renamed))
  (Located ShuntedPattern')
  (Pattern' Renamed)
  ShuntedPattern'
forall a b. Lens (Located a) (Located b) a b
</span><a href="Elara.AST.Region.html#unlocated"><span class="hs-identifier hs-var">unlocated</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern' Renamed -&gt; Eff r ShuntedPattern'
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
Pattern' Renamed -&gt; Eff r ShuntedPattern'
</span><a href="#local-6989586621680210399"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="annot"><span class="annottext">Located (Pattern' Renamed)
ASTLocate Renamed (Pattern' Renamed)
</span><a href="#local-6989586621680210396"><span class="hs-identifier hs-var">le</span></a></span><span>
</span><span id="line-403"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-404"></span><span>    </span><span id="local-6989586621680208902"><span class="annot"><a href="#local-6989586621680210399"><span class="hs-identifier hs-type">shuntPattern'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.AST.Renamed.html#RenamedPattern%27"><span class="hs-identifier hs-type">RenamedPattern'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680208902"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.AST.Shunted.html#ShuntedPattern%27"><span class="hs-identifier hs-type">ShuntedPattern'</span></a></span></span><span>
</span><span id="line-405"></span><span>    </span><span id="local-6989586621680210399"><span class="annot"><span class="annottext">shuntPattern' :: forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
Pattern' Renamed -&gt; Eff r ShuntedPattern'
</span><a href="#local-6989586621680210399"><span class="hs-identifier hs-var hs-var">shuntPattern'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#VarPattern"><span class="hs-identifier hs-type">VarPattern</span></a></span><span> </span><span id="local-6989586621680210412"><span class="annot"><span class="annottext">ASTLocate Renamed (Select VarPat Renamed)
</span><a href="#local-6989586621680210412"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTLocate Shunted (Select VarPat Shunted) -&gt; ShuntedPattern'
forall {a} (ast :: a).
ASTLocate ast (Select VarPat ast) -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#VarPattern"><span class="hs-identifier hs-var">VarPattern</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate Renamed (Select VarPat Renamed)
ASTLocate Shunted (Select VarPat Shunted)
</span><a href="#local-6989586621680210412"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-406"></span><span>    </span><span class="annot"><a href="#local-6989586621680210399"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#ConstructorPattern"><span class="hs-identifier hs-type">ConstructorPattern</span></a></span><span> </span><span id="local-6989586621680210414"><span class="annot"><span class="annottext">ASTLocate Renamed (Select ConPat Renamed)
</span><a href="#local-6989586621680210414"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621680210415"><span class="annot"><span class="annottext">[Pattern Renamed]
</span><a href="#local-6989586621680210415"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ASTLocate Shunted (Select ConPat Shunted)
-&gt; [ShuntedPattern] -&gt; ShuntedPattern'
forall {a} (ast :: a).
ASTLocate ast (Select ConPat ast) -&gt; [Pattern ast] -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#ConstructorPattern"><span class="hs-identifier hs-var">ConstructorPattern</span></a></span><span> </span><span class="annot"><span class="annottext">ASTLocate Renamed (Select ConPat Renamed)
ASTLocate Shunted (Select ConPat Shunted)
</span><a href="#local-6989586621680210414"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">([ShuntedPattern] -&gt; ShuntedPattern')
-&gt; Eff r [ShuntedPattern] -&gt; Eff r ShuntedPattern'
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Pattern Renamed -&gt; Eff r ShuntedPattern)
-&gt; [Pattern Renamed] -&gt; Eff r [ShuntedPattern]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Pattern Renamed -&gt; Eff r ShuntedPattern
forall (r :: [(* -&gt; *) -&gt; * -&gt; *]).
Pattern Renamed -&gt; Eff r ShuntedPattern
</span><a href="Elara.Shunt.html#shuntPattern"><span class="hs-identifier hs-var">shuntPattern</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern Renamed]
</span><a href="#local-6989586621680210415"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-407"></span><span>    </span><span class="annot"><a href="#local-6989586621680210399"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern' Renamed
</span><a href="Elara.AST.Generic.Types.html#WildcardPattern"><span class="hs-identifier hs-var">WildcardPattern</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ShuntedPattern'
forall {a} (ast :: a). Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#WildcardPattern"><span class="hs-identifier hs-var">WildcardPattern</span></a></span><span>
</span><span id="line-408"></span><span>    </span><span class="annot"><a href="#local-6989586621680210399"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern' Renamed
</span><a href="Elara.AST.Generic.Types.html#UnitPattern"><span class="hs-identifier hs-var">UnitPattern</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ShuntedPattern'
forall {a} (ast :: a). Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#UnitPattern"><span class="hs-identifier hs-var">UnitPattern</span></a></span><span>
</span><span id="line-409"></span><span>    </span><span class="annot"><a href="#local-6989586621680210399"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#IntegerPattern"><span class="hs-identifier hs-type">IntegerPattern</span></a></span><span> </span><span id="local-6989586621680210419"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680210419"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; ShuntedPattern'
forall {a} (ast :: a). Integer -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#IntegerPattern"><span class="hs-identifier hs-var">IntegerPattern</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621680210419"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span>    </span><span class="annot"><a href="#local-6989586621680210399"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#FloatPattern"><span class="hs-identifier hs-type">FloatPattern</span></a></span><span> </span><span id="local-6989586621680210421"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680210421"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; ShuntedPattern'
forall {a} (ast :: a). Double -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#FloatPattern"><span class="hs-identifier hs-var">FloatPattern</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621680210421"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span>    </span><span class="annot"><a href="#local-6989586621680210399"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#StringPattern"><span class="hs-identifier hs-type">StringPattern</span></a></span><span> </span><span id="local-6989586621680210423"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680210423"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ShuntedPattern'
forall {a} (ast :: a). Text -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#StringPattern"><span class="hs-identifier hs-var">StringPattern</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680210423"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span>    </span><span class="annot"><a href="#local-6989586621680210399"><span class="hs-identifier hs-var">shuntPattern'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.Generic.Types.html#CharPattern"><span class="hs-identifier hs-type">CharPattern</span></a></span><span> </span><span id="local-6989586621680210425"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621680210425"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShuntedPattern' -&gt; Eff r ShuntedPattern'
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; ShuntedPattern'
forall {a} (ast :: a). Char -&gt; Pattern' ast
</span><a href="Elara.AST.Generic.Types.html#CharPattern"><span class="hs-identifier hs-var">CharPattern</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621680210425"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-413"></span></pre></body></html>