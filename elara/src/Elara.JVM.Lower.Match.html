<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Elara.JVM.Lower.Match.html"><span class="hs-identifier">Elara.JVM.Lower.Match</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful</span></span><span>
</span><span id="line-4"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Effectful.Error.Static</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">throwError</span></span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.AST.VarRef.html"><span class="hs-identifier">Elara.AST.VarRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.VarRef.html#VarRef%27"><span class="hs-identifier">VarRef'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Core.html"><span class="hs-identifier">Elara.Core</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Core</span></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Data.Unique.html"><span class="hs-identifier">Elara.Data.Unique</span></a></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.JVM.Error.html"><span class="hs-identifier">Elara.JVM.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.JVM.Error.html#JVMLoweringError"><span class="hs-identifier">JVMLoweringError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.JVM.IR.html"><span class="hs-identifier">Elara.JVM.IR</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IR</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.JVM.Lower.Monad.html"><span class="hs-identifier">Elara.JVM.Lower.Monad</span></a></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.JVM.Lower.Util.html"><span class="hs-identifier">Elara.JVM.Lower.Util</span></a></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">JVM.Data.Abstract.Type</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">JVM</span></span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Core.Analysis.html"><span class="hs-identifier">Elara.Core.Analysis</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Data.Unique.Effect.html"><span class="hs-identifier">Elara.Data.Unique.Effect</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Elara.Logging.html"><span class="hs-identifier">Elara.Logging</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">JVM.Data.Abstract.Type</span></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="annot"><span class="hs-comment">{- | Emits instructions to bind pattern variables from a pattern match alternative.
For data constructor patterns, it generates field accesses to extract the fields from the
scrutinee expression and assigns them to the corresponding pattern variables.
-}</span></span><span>
</span><span id="line-23"></span><span id="local-6989586621680098874"><span class="annot"><a href="Elara.JVM.Lower.Match.html#bindPatternVars"><span class="hs-identifier hs-type">bindPatternVars</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Elara.JVM.Lower.Monad.html#InnerLower"><span class="hs-identifier hs-type">InnerLower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680098874"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><span class="hs-comment">-- | The scrutinee expression and its type</span></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Elara.JVM.IR.html#Expr"><span class="hs-identifier hs-type">IR.Expr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">JVM.ClassInfoType</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><span class="hs-comment">-- | The pattern alternative</span></span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Elara.Core.html#Alt"><span class="hs-identifier hs-type">Core.Alt</span></a></span><span> </span><span class="annot"><a href="Elara.Core.html#Var"><span class="hs-identifier hs-type">Core.Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680098874"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-30"></span><span id="bindPatternVars"><span class="annot"><span class="annottext">bindPatternVars :: forall (r :: [Effect]).
InnerLower r =&gt;
(Expr, ClassInfoType) -&gt; Alt Var -&gt; Eff r ()
</span><a href="Elara.JVM.Lower.Match.html#bindPatternVars"><span class="hs-identifier hs-var hs-var">bindPatternVars</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680099004"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680099004"><span class="hs-identifier hs-var">scrut</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ClassInfoType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.Core.html#DataAlt"><span class="hs-identifier hs-type">Core.DataAlt</span></a></span><span> </span><span id="local-6989586621680099006"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680099006"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680099007"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680099007"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Expr Var
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680099008"><span class="annot"><span class="annottext">conClassName :: ClassInfoType
</span><a href="#local-6989586621680099008"><span class="hs-identifier hs-var hs-var hs-var">conClassName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualifiedClassName -&gt; ClassInfoType
</span><span class="hs-identifier hs-var">JVM.ClassInfoType</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Qualified Text -&gt; QualifiedClassName
</span><a href="Elara.JVM.Lower.Util.html#qualifiedTextToClass"><span class="hs-identifier hs-var">qualifiedTextToClass</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680099006"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">name</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680099011"><span class="annot"><span class="annottext">fieldTypes :: [Type]
</span><a href="#local-6989586621680099011"><span class="hs-identifier hs-var hs-var">fieldTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Type]
</span><a href="Elara.Core.html#functionTypeArgs"><span class="hs-identifier hs-var">Core.functionTypeArgs</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680099006"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">dataConType</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><span class="annottext">[(Var, Type, Int)] -&gt; ((Var, Type, Int) -&gt; Eff r ()) -&gt; Eff r ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Var] -&gt; [Type] -&gt; [Int] -&gt; [(Var, Type, Int)]
forall a b c. [a] -&gt; [b] -&gt; [c] -&gt; [(a, b, c)]
</span><span class="hs-identifier hs-var">zip3</span></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621680099007"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621680099011"><span class="hs-identifier hs-var">fieldTypes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((Var, Type, Int) -&gt; Eff r ()) -&gt; Eff r ())
-&gt; ((Var, Type, Int) -&gt; Eff r ()) -&gt; Eff r ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680099015"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680099015"><span class="hs-identifier hs-var">argId</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680099016"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680099016"><span class="hs-identifier hs-var">fieldType</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680099017"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680099017"><span class="hs-identifier hs-var">index</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-34"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621680099015"><span class="hs-identifier hs-var">argId</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-35"></span><span>            </span><span class="annot"><a href="Elara.Core.html#Id"><span class="hs-identifier hs-type">Core.Id</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.VarRef.html#Local"><span class="hs-identifier hs-type">Local</span></a></span><span> </span><span id="local-6989586621680099020"><span class="annot"><span class="annottext">VarRefImpl UnlocatedVarRefKind (Unique Text)
</span><a href="#local-6989586621680099020"><span class="hs-identifier hs-var">argUnique</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe DataCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-36"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680099021"><span class="annot"><span class="annottext">fieldName :: Text
</span><a href="#local-6989586621680099021"><span class="hs-identifier hs-var hs-var hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text
</span><a href="Elara.JVM.Lower.Util.html#fieldNameForIndex"><span class="hs-identifier hs-var">fieldNameForIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680099017"><span class="hs-identifier hs-var">index</span></a></span><span>
</span><span id="line-37"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680099023"><span class="annot"><span class="annottext">fieldJVMType :: FieldType
</span><a href="#local-6989586621680099023"><span class="hs-identifier hs-var hs-var">fieldJVMType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; FieldType
</span><a href="Elara.JVM.Lower.Util.html#lowerType"><span class="hs-identifier hs-var">lowerType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680099016"><span class="hs-identifier hs-var">fieldType</span></a></span><span> </span><span class="hs-comment">-- Use constructor's actual field type</span><span>
</span><span id="line-38"></span><span>                </span><span class="annot"><span class="annottext">Instruction -&gt; Eff r ()
forall (r :: [Effect]).
(InstructionWriter :&gt; r) =&gt;
Instruction -&gt; Eff r ()
</span><a href="Elara.JVM.Lower.Monad.html#emitInst"><span class="hs-identifier hs-var">emitInst</span></a></span><span> </span><span class="annot"><span class="annottext">(Instruction -&gt; Eff r ()) -&gt; Instruction -&gt; Eff r ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Unique Text -&gt; FieldType -&gt; Expr -&gt; Instruction
</span><a href="Elara.JVM.IR.html#Assign"><span class="hs-identifier hs-var">IR.Assign</span></a></span><span> </span><span class="annot"><span class="annottext">Unique Text
VarRefImpl UnlocatedVarRefKind (Unique Text)
</span><a href="#local-6989586621680099020"><span class="hs-identifier hs-var">argUnique</span></a></span><span> </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621680099023"><span class="hs-identifier hs-var">fieldJVMType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; ClassInfoType -&gt; Text -&gt; FieldType -&gt; Expr
</span><a href="Elara.JVM.IR.html#GetField"><span class="hs-identifier hs-var">IR.GetField</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680099004"><span class="hs-identifier hs-var">scrut</span></a></span><span> </span><span class="annot"><span class="annottext">ClassInfoType
</span><a href="#local-6989586621680099008"><span class="hs-identifier hs-var">conClassName</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680099021"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621680099023"><span class="hs-identifier hs-var">fieldJVMType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>            </span><span class="annot"><a href="Elara.Core.html#Id"><span class="hs-identifier hs-type">Core.Id</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.AST.VarRef.html#Global"><span class="hs-identifier hs-type">Global</span></a></span><span> </span><span id="local-6989586621680099029"><span class="annot"><span class="annottext">VarRefImpl UnlocatedVarRefKind (Qualified Text)
</span><a href="#local-6989586621680099029"><span class="hs-identifier hs-var">global</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe DataCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">JVMLoweringError -&gt; Eff r ()
forall e (es :: [Effect]) a.
(HasCallStack, Error e :&gt; es, Show e) =&gt;
e -&gt; Eff es a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(JVMLoweringError -&gt; Eff r ()) -&gt; JVMLoweringError -&gt; Eff r ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Qualified Text -&gt; JVMLoweringError
</span><a href="Elara.JVM.Error.html#GlobalVarInPattern"><span class="hs-identifier hs-var">GlobalVarInPattern</span></a></span><span> </span><span class="annot"><span class="annottext">Qualified Text
VarRefImpl UnlocatedVarRefKind (Qualified Text)
</span><a href="#local-6989586621680099029"><span class="hs-identifier hs-var">global</span></a></span><span>
</span><span id="line-40"></span><span>            </span><span class="annot"><a href="Elara.Core.html#TyVar"><span class="hs-identifier hs-type">Core.TyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TypeVariable
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">JVMLoweringError -&gt; Eff r ()
forall e (es :: [Effect]) a.
(HasCallStack, Error e :&gt; es, Show e) =&gt;
e -&gt; Eff es a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">JVMLoweringError
</span><a href="Elara.JVM.Error.html#TypeVarInPattern"><span class="hs-identifier hs-var">TypeVarInPattern</span></a></span><span>
</span><span id="line-41"></span><span class="annot"><a href="Elara.JVM.Lower.Match.html#bindPatternVars"><span class="hs-identifier hs-var">bindPatternVars</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr, ClassInfoType)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Alt Var
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Eff r ()
forall (f :: * -&gt; *). Applicative f =&gt; f ()
</span><span class="hs-identifier hs-var">pass</span></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="annot"><span class="hs-comment">-- | Simple way to break the circular dependency between lowering expressions and lowering matches</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">type</span><span> </span><span id="ExprLoweringFn"><span class="annot"><a href="Elara.JVM.Lower.Match.html#ExprLoweringFn"><span class="hs-identifier hs-var">ExprLoweringFn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680099034"><span class="annot"><a href="#local-6989586621680099034"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Elara.JVM.Lower.Monad.html#InnerLower"><span class="hs-identifier hs-type">InnerLower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099034"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Elara.Core.html#CoreExpr"><span class="hs-identifier hs-type">Core.CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680099034"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.JVM.IR.html#Expr"><span class="hs-identifier hs-type">IR.Expr</span></a></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="annot"><a href="Elara.JVM.Lower.Match.html#lowerMatch"><span class="hs-identifier hs-type">lowerMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680098925"><span class="annot"><a href="#local-6989586621680098925"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Elara.JVM.Lower.Monad.html#InnerLower"><span class="hs-identifier hs-type">InnerLower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680098925"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Elara.JVM.Lower.Match.html#ExprLoweringFn"><span class="hs-identifier hs-type">ExprLoweringFn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Elara.Core.html#Type"><span class="hs-identifier hs-type">Core.Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Elara.Core.html#CoreExpr"><span class="hs-identifier hs-type">Core.CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Elara.Core.html#Var"><span class="hs-identifier hs-type">Core.Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-special">[</span><span class="annot"><a href="Elara.Core.html#Alt"><span class="hs-identifier hs-type">Core.Alt</span></a></span><span> </span><span class="annot"><a href="Elara.Core.html#Var"><span class="hs-identifier hs-type">Core.Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680098925"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="Elara.JVM.IR.html#Expr"><span class="hs-identifier hs-type">IR.Expr</span></a></span><span>
</span><span id="line-55"></span><span id="lowerMatch"><span class="annot"><span class="annottext">lowerMatch :: forall (r :: [Effect]).
InnerLower r =&gt;
ExprLoweringFn
-&gt; Type -&gt; Expr Var -&gt; Maybe Var -&gt; [Alt Var] -&gt; Eff r Expr
</span><a href="Elara.JVM.Lower.Match.html#lowerMatch"><span class="hs-identifier hs-var hs-var">lowerMatch</span></a></span></span><span> </span><span id="local-6989586621680099073"><span class="annot"><span class="annottext">ExprLoweringFn
</span><a href="#local-6989586621680099073"><span class="hs-identifier hs-var">lowerExpr</span></a></span></span><span> </span><span id="local-6989586621680099074"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680099074"><span class="hs-identifier hs-var">matchType</span></a></span></span><span> </span><span id="local-6989586621680099075"><span class="annot"><span class="annottext">Expr Var
</span><a href="#local-6989586621680099075"><span class="hs-identifier hs-var">scrutinee</span></a></span></span><span> </span><span id="local-6989586621680099076"><span class="annot"><span class="annottext">Maybe Var
</span><a href="#local-6989586621680099076"><span class="hs-identifier hs-var">_binder</span></a></span></span><span> </span><span id="local-6989586621680099077"><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621680099077"><span class="hs-identifier hs-var">alts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-56"></span><span>    </span><span id="local-6989586621680099078"><span class="annot"><a href="#local-6989586621680099078"><span class="hs-identifier hs-var">scrutVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Expr Var -&gt; Eff r Expr
ExprLoweringFn
</span><a href="#local-6989586621680099073"><span class="hs-identifier hs-var">lowerExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr Var
</span><a href="#local-6989586621680099075"><span class="hs-identifier hs-var">scrutinee</span></a></span><span>
</span><span id="line-57"></span><span>    </span><span id="local-6989586621680099079"><span class="annot"><a href="#local-6989586621680099079"><span class="hs-identifier hs-var">resultVarName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.JVM.Lower.Util.html#freshVar"><span class="hs-identifier hs-type">freshVar</span></a></span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680099081"><span class="annot"><a href="#local-6989586621680099081"><span class="hs-identifier hs-var hs-var">matchType'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; FieldType
</span><a href="Elara.JVM.Lower.Util.html#lowerType"><span class="hs-identifier hs-var">lowerType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621680099074"><span class="hs-identifier hs-var">matchType</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680099082"><span class="annot"><a href="#local-6989586621680099082"><span class="hs-identifier hs-var hs-var">resultVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unique Text -&gt; FieldType -&gt; Expr
</span><a href="Elara.JVM.IR.html#LocalVar"><span class="hs-identifier hs-var">IR.LocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099079"><span class="hs-identifier hs-var">resultVarName</span></a></span><span> </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621680099081"><span class="hs-identifier hs-var">matchType'</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span>    </span><span id="local-6989586621680099084"><span class="annot"><a href="#local-6989586621680099084"><span class="hs-identifier hs-var">mergeLabel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.Data.Unique.Effect.html#makeUnique"><span class="hs-identifier hs-type">makeUnique</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;match_merge&quot;</span></span><span>
</span><span id="line-62"></span><span>    </span><span id="local-6989586621680099086"><span class="annot"><a href="#local-6989586621680099086"><span class="hs-identifier hs-var">firstCheckLabel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.Data.Unique.Effect.html#makeUnique"><span class="hs-identifier hs-type">makeUnique</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;match_start&quot;</span></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span>    </span><span id="local-6989586621680099087"><span class="annot"><a href="#local-6989586621680099087"><span class="hs-identifier hs-var">scrutineeType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.Logging.html#traceFn"><span class="hs-identifier hs-type">traceFn</span></a></span><span> </span><span class="annot"><a href="Elara.Core.Analysis.html#guesstimateExprType"><span class="hs-identifier hs-type">guesstimateExprType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099075"><span class="hs-identifier hs-type">scrutinee</span></a></span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="#local-6989586621680099090"><span class="hs-identifier hs-type">buildDecisionLadder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680099078"><span class="hs-identifier hs-type">scrutVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">fieldTypeToClassInfoType</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Elara.JVM.Lower.Util.html#lowerType"><span class="hs-identifier hs-type">lowerType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099087"><span class="hs-identifier hs-type">scrutineeType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680099079"><span class="hs-identifier hs-type">resultVarName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099084"><span class="hs-identifier hs-type">mergeLabel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099086"><span class="hs-identifier hs-type">firstCheckLabel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099077"><span class="hs-identifier hs-type">alts</span></a></span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="Elara.JVM.Lower.Monad.html#emitBlock"><span class="hs-identifier hs-type">emitBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.JVM.IR.html#Block"><span class="hs-identifier hs-type">IR.Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099084"><span class="hs-identifier hs-type">mergeLabel</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="#local-6989586621680099082"><span class="hs-identifier hs-type">resultVar</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="#local-6989586621680099090"><span class="hs-identifier hs-type">buildDecisionLadder</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-71"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Elara.JVM.IR.html#Expr"><span class="hs-identifier hs-type">IR.Expr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Data.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Elara.Core.html#Alt"><span class="hs-identifier hs-type">Core.Alt</span></a></span><span> </span><span class="annot"><a href="Elara.Core.html#Var"><span class="hs-identifier hs-type">Core.Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680098925"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>    </span><span id="local-6989586621680099090"><span class="annot"><span class="annottext">buildDecisionLadder :: (Expr, ClassInfoType)
-&gt; Unique Text
-&gt; Unique Text
-&gt; Unique Text
-&gt; [Alt Var]
-&gt; Eff r ()
</span><a href="#local-6989586621680099090"><span class="hs-identifier hs-var hs-var">buildDecisionLadder</span></a></span></span><span> </span><span class="annot"><span class="annottext">(Expr, ClassInfoType)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Eff r ()
forall (f :: * -&gt; *). Applicative f =&gt; f ()
</span><span class="hs-identifier hs-var">pass</span></span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><a href="#local-6989586621680099090"><span class="hs-identifier hs-var">buildDecisionLadder</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680099163"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680099163"><span class="hs-identifier hs-var">scrut</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680099164"><span class="annot"><span class="annottext">ClassInfoType
</span><a href="#local-6989586621680099164"><span class="hs-identifier hs-var">scrutType</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680099165"><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099165"><span class="hs-identifier hs-var">resultVarName</span></a></span></span><span> </span><span id="local-6989586621680099166"><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099166"><span class="hs-identifier hs-var">mergeLabel</span></a></span></span><span> </span><span id="local-6989586621680099167"><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099167"><span class="hs-identifier hs-var">checkLabel</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680099168"><span class="annot"><span class="annottext">Alt Var
</span><a href="#local-6989586621680099168"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680099169"><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621680099169"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-74"></span><span>        </span><span id="local-6989586621680099170"><span class="annot"><a href="#local-6989586621680099170"><span class="hs-identifier hs-var">branchLabel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Eff r (Unique Text)
forall (r :: [Effect]) a. (UniqueGen :&gt; r) =&gt; a -&gt; Eff r (Unique a)
</span><a href="Elara.Data.Unique.Effect.html#makeUnique"><span class="hs-identifier hs-var">makeUnique</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;match_branch&quot;</span></span><span>
</span><span id="line-75"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680099171"><span class="annot"><a href="#local-6989586621680099171"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680099172"><span class="annot"><a href="#local-6989586621680099172"><span class="hs-identifier hs-var">bodyExpr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680099168"><span class="hs-identifier hs-type">alt</span></a></span><span>
</span><span id="line-76"></span><span>        </span><span id="local-6989586621680099173"><span class="annot"><a href="#local-6989586621680099173"><span class="hs-identifier hs-var">bodyType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.JVM.Lower.Util.html#lowerType"><span class="hs-identifier hs-type">lowerType</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Elara.Logging.html#traceFn"><span class="hs-identifier hs-type">traceFn</span></a></span><span> </span><span class="annot"><a href="Elara.Core.Analysis.html#guesstimateExprType"><span class="hs-identifier hs-type">guesstimateExprType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099172"><span class="hs-identifier hs-type">bodyExpr</span></a></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span>        </span><span class="hs-comment">-- Determine next label</span><span>
</span><span id="line-79"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621680099175"><span class="annot"><a href="#local-6989586621680099175"><span class="hs-identifier hs-var">nextCheckLabel</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680099176"><span class="annot"><a href="#local-6989586621680099176"><span class="hs-identifier hs-var">failBlock</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621680099169"><span class="hs-identifier hs-type">rest</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-80"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621680099171"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-81"></span><span>                </span><span class="annot"><span class="annottext">AltCon
</span><a href="Elara.Core.html#DEFAULT"><span class="hs-identifier hs-var">Core.DEFAULT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Maybe (Unique Text), Maybe Block)
-&gt; Eff r (Maybe (Unique Text), Maybe Block)
forall a. a -&gt; Eff r a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Unique Text)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Block
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>                </span><span class="annot"><span class="annottext">AltCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-83"></span><span>                    </span><span id="local-6989586621680099178"><span class="annot"><a href="#local-6989586621680099178"><span class="hs-identifier hs-var">failLabel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Eff r (Unique Text)
forall (r :: [Effect]) a. (UniqueGen :&gt; r) =&gt; a -&gt; Eff r (Unique a)
</span><a href="Elara.Data.Unique.Effect.html#makeUnique"><span class="hs-identifier hs-var">makeUnique</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;match_fail&quot;</span></span><span>
</span><span id="line-84"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680099179"><span class="annot"><a href="#local-6989586621680099179"><span class="hs-identifier hs-var hs-var">failBlk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-85"></span><span>                            </span><span class="annot"><span class="annottext">Unique Text -&gt; [Instruction] -&gt; Block
</span><a href="Elara.JVM.IR.html#Block"><span class="hs-identifier hs-var">IR.Block</span></a></span><span>
</span><span id="line-86"></span><span>                                </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099178"><span class="hs-identifier hs-var">failLabel</span></a></span><span>
</span><span id="line-87"></span><span>                                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Unique Text -&gt; FieldType -&gt; Expr -&gt; Instruction
</span><a href="Elara.JVM.IR.html#Assign"><span class="hs-identifier hs-var">IR.Assign</span></a></span><span>
</span><span id="line-88"></span><span>                                    </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099165"><span class="hs-identifier hs-var">resultVarName</span></a></span><span>
</span><span id="line-89"></span><span>                                    </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621680099173"><span class="hs-identifier hs-var">bodyType</span></a></span><span>
</span><span id="line-90"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimOp -&gt; [Expr] -&gt; Expr
</span><a href="Elara.JVM.IR.html#PrimOp"><span class="hs-identifier hs-var">IR.PrimOp</span></a></span><span> </span><span class="annot"><span class="annottext">PrimOp
</span><a href="Elara.JVM.IR.html#PatternMatchFailedError"><span class="hs-identifier hs-var">IR.PatternMatchFailedError</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>                                </span><span class="hs-special">]</span><span>
</span><span id="line-92"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621680099178"><span class="hs-identifier hs-type">failLabel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621680099179"><span class="hs-identifier hs-type">failBlk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>            </span><span class="annot"><span class="annottext">[Alt Var]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-94"></span><span>                </span><span id="local-6989586621680099182"><span class="annot"><a href="#local-6989586621680099182"><span class="hs-identifier hs-var">nextLabel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Eff r (Unique Text)
forall (r :: [Effect]) a. (UniqueGen :&gt; r) =&gt; a -&gt; Eff r (Unique a)
</span><a href="Elara.Data.Unique.Effect.html#makeUnique"><span class="hs-identifier hs-var">makeUnique</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;match_next&quot;</span></span><span>
</span><span id="line-95"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621680099182"><span class="hs-identifier hs-type">nextLabel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span>        </span><span class="hs-comment">-- Emit check block</span><span>
</span><span id="line-98"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680099183"><span class="annot"><a href="#local-6989586621680099183"><span class="hs-identifier hs-var hs-var">checkInstrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621680099171"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-99"></span><span>                </span><span class="annot"><span class="annottext">AltCon
</span><a href="Elara.Core.html#DEFAULT"><span class="hs-identifier hs-var">Core.DEFAULT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Unique Text -&gt; Instruction
</span><a href="Elara.JVM.IR.html#Jump"><span class="hs-identifier hs-var">IR.Jump</span></a></span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099170"><span class="hs-identifier hs-var">branchLabel</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-100"></span><span>                </span><span class="annot"><span class="annottext">AltCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Unique Text)
</span><a href="#local-6989586621680099175"><span class="hs-identifier hs-var">nextCheckLabel</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-101"></span><span>                    </span><span class="annot"><span class="annottext">Maybe (Unique Text)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Instruction]
forall a t. (HasCallStack, IsText t) =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Non-default final alternative should have fail label&quot;</span></span><span>
</span><span id="line-102"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680099186"><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099186"><span class="hs-identifier hs-var">nextLabel</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Expr -&gt; Unique Text -&gt; Unique Text -&gt; Instruction
</span><a href="Elara.JVM.IR.html#JumpIf"><span class="hs-identifier hs-var">IR.JumpIf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Alt Var -&gt; Expr
</span><a href="Elara.JVM.Lower.Match.html#matchCond"><span class="hs-identifier hs-var">matchCond</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680099163"><span class="hs-identifier hs-var">scrut</span></a></span><span> </span><span class="annot"><span class="annottext">Alt Var
</span><a href="#local-6989586621680099168"><span class="hs-identifier hs-var">alt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099170"><span class="hs-identifier hs-var">branchLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099186"><span class="hs-identifier hs-var">nextLabel</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span>        </span><span class="annot"><a href="Elara.JVM.Lower.Monad.html#emitBlock"><span class="hs-identifier hs-type">emitBlock</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Elara.JVM.IR.html#Block"><span class="hs-identifier hs-type">IR.Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099167"><span class="hs-identifier hs-type">checkLabel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099183"><span class="hs-identifier hs-type">checkInstrs</span></a></span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">whenJust</span></span><span> </span><span class="annot"><a href="#local-6989586621680099176"><span class="hs-identifier hs-type">failBlock</span></a></span><span> </span><span class="annot"><a href="Elara.JVM.Lower.Monad.html#emitBlock"><span class="hs-identifier hs-type">emitBlock</span></a></span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span>        </span><span class="hs-comment">-- Emit branch body</span><span>
</span><span id="line-108"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621680099190"><span class="annot"><a href="#local-6989586621680099190"><span class="hs-identifier hs-var">bodyResult</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680099191"><span class="annot"><a href="#local-6989586621680099191"><span class="hs-identifier hs-var">bodyInstrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680099192"><span class="annot"><a href="#local-6989586621680099192"><span class="hs-identifier hs-var">bodyBlocks</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Elara.JVM.Lower.Util.html#captureInstructions"><span class="hs-identifier hs-type">captureInstructions</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-109"></span><span>            </span><span class="annot"><a href="Elara.JVM.Lower.Match.html#bindPatternVars"><span class="hs-identifier hs-type">bindPatternVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680099163"><span class="hs-identifier hs-type">scrut</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680099164"><span class="hs-identifier hs-type">scrutType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680099168"><span class="hs-identifier hs-type">alt</span></a></span><span>
</span><span id="line-110"></span><span>            </span><span class="annot"><a href="#local-6989586621680099073"><span class="hs-identifier hs-type">lowerExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099172"><span class="hs-identifier hs-type">bodyExpr</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621680099192"><span class="hs-identifier hs-type">bodyBlocks</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-113"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-114"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680099194"><span class="annot"><span class="annottext">branchBody :: [Instruction]
</span><a href="#local-6989586621680099194"><span class="hs-identifier hs-var hs-var">branchBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-115"></span><span>                        </span><span class="annot"><span class="annottext">[Instruction]
</span><a href="#local-6989586621680099191"><span class="hs-identifier hs-var">bodyInstrs</span></a></span><span>
</span><span id="line-116"></span><span>                            </span><span class="annot"><span class="annottext">[Instruction] -&gt; [Instruction] -&gt; [Instruction]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Unique Text -&gt; FieldType -&gt; Expr -&gt; Instruction
</span><a href="Elara.JVM.IR.html#Assign"><span class="hs-identifier hs-var">IR.Assign</span></a></span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099165"><span class="hs-identifier hs-var">resultVarName</span></a></span><span> </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621680099173"><span class="hs-identifier hs-var">bodyType</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680099190"><span class="hs-identifier hs-var">bodyResult</span></a></span><span>
</span><span id="line-117"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Unique Text -&gt; Instruction
</span><a href="Elara.JVM.IR.html#Jump"><span class="hs-identifier hs-var">IR.Jump</span></a></span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099166"><span class="hs-identifier hs-var">mergeLabel</span></a></span><span>
</span><span id="line-118"></span><span>                               </span><span class="hs-special">]</span><span>
</span><span id="line-119"></span><span>                </span><span class="annot"><span class="annottext">Block -&gt; Eff r ()
forall (r :: [Effect]).
(InstructionWriter :&gt; r) =&gt;
Block -&gt; Eff r ()
</span><a href="Elara.JVM.Lower.Monad.html#emitBlock"><span class="hs-identifier hs-var">emitBlock</span></a></span><span> </span><span class="annot"><span class="annottext">(Block -&gt; Eff r ()) -&gt; Block -&gt; Eff r ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Unique Text -&gt; [Instruction] -&gt; Block
</span><a href="Elara.JVM.IR.html#Block"><span class="hs-identifier hs-var">IR.Block</span></a></span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099170"><span class="hs-identifier hs-var">branchLabel</span></a></span><span> </span><span class="annot"><span class="annottext">[Instruction]
</span><a href="#local-6989586621680099194"><span class="hs-identifier hs-var">branchBody</span></a></span><span>
</span><span id="line-120"></span><span>            </span><span id="local-6989586621680099195"><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621680099195"><span class="hs-identifier hs-var">firstBlock</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680099196"><span class="annot"><span class="annottext">[Block]
</span><a href="#local-6989586621680099196"><span class="hs-identifier hs-var">restBlocks</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-121"></span><span>                </span><span id="local-6989586621680099197"><span class="annot"><a href="#local-6989586621680099197"><span class="hs-identifier hs-var">contLabel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Eff r (Unique Text)
forall (r :: [Effect]) a. (UniqueGen :&gt; r) =&gt; a -&gt; Eff r (Unique a)
</span><a href="Elara.Data.Unique.Effect.html#makeUnique"><span class="hs-identifier hs-var">makeUnique</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;match_branch_cont&quot;</span></span><span>
</span><span id="line-122"></span><span>                </span><span class="annot"><a href="Elara.JVM.Lower.Monad.html#emitBlock"><span class="hs-identifier hs-type">emitBlock</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Elara.JVM.IR.html#Block"><span class="hs-identifier hs-type">IR.Block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099170"><span class="hs-identifier hs-type">branchLabel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680099191"><span class="hs-identifier hs-type">bodyInstrs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Elara.JVM.IR.html#Jump"><span class="hs-identifier hs-type">IR.Jump</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Elara.JVM.IR.html#blockLabel"><span class="hs-identifier hs-var">IR.blockLabel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099195"><span class="hs-identifier hs-type">firstBlock</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>                </span><span class="annot"><a href="Elara.JVM.Lower.Monad.html#emitBlock"><span class="hs-identifier hs-type">emitBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099195"><span class="hs-identifier hs-type">firstBlock</span></a></span><span>
</span><span id="line-124"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">mapM_</span></span><span> </span><span class="annot"><a href="Elara.JVM.Lower.Monad.html#emitBlock"><span class="hs-identifier hs-type">emitBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099196"><span class="hs-identifier hs-type">restBlocks</span></a></span><span>
</span><span id="line-125"></span><span>                </span><span class="annot"><a href="Elara.JVM.Lower.Monad.html#emitBlock"><span class="hs-identifier hs-type">emitBlock</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-126"></span><span>                    </span><span class="annot"><a href="Elara.JVM.IR.html#Block"><span class="hs-identifier hs-type">IR.Block</span></a></span><span>
</span><span id="line-127"></span><span>                        </span><span class="annot"><a href="#local-6989586621680099197"><span class="hs-identifier hs-type">contLabel</span></a></span><span>
</span><span id="line-128"></span><span>                        </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="Elara.JVM.IR.html#Assign"><span class="hs-identifier hs-type">IR.Assign</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099165"><span class="hs-identifier hs-type">resultVarName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099173"><span class="hs-identifier hs-type">bodyType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099190"><span class="hs-identifier hs-type">bodyResult</span></a></span><span>
</span><span id="line-129"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Elara.JVM.IR.html#Jump"><span class="hs-identifier hs-type">IR.Jump</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680099166"><span class="hs-identifier hs-type">mergeLabel</span></a></span><span>
</span><span id="line-130"></span><span>                        </span><span class="hs-special">]</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span>        </span><span class="hs-comment">-- Process remaining alternatives</span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">whenJust</span></span><span> </span><span class="annot"><a href="#local-6989586621680099175"><span class="hs-identifier hs-type">nextCheckLabel</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680099200"><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099200"><span class="hs-identifier hs-var">nextLabel</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-134"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; Eff r () -&gt; Eff r ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Alt Var] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621680099169"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Eff r () -&gt; Eff r ()) -&gt; Eff r () -&gt; Eff r ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-135"></span><span>                </span><span class="annot"><span class="annottext">(Expr, ClassInfoType)
-&gt; Unique Text
-&gt; Unique Text
-&gt; Unique Text
-&gt; [Alt Var]
-&gt; Eff r ()
</span><a href="#local-6989586621680099090"><span class="hs-identifier hs-var">buildDecisionLadder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680099163"><span class="hs-identifier hs-var">scrut</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ClassInfoType
</span><a href="#local-6989586621680099164"><span class="hs-identifier hs-var">scrutType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099165"><span class="hs-identifier hs-var">resultVarName</span></a></span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099166"><span class="hs-identifier hs-var">mergeLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Unique Text
</span><a href="#local-6989586621680099200"><span class="hs-identifier hs-var">nextLabel</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt Var]
</span><a href="#local-6989586621680099169"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="annot"><a href="Elara.JVM.Lower.Match.html#matchCond"><span class="hs-identifier hs-type">matchCond</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Elara.JVM.IR.html#Expr"><span class="hs-identifier hs-type">IR.Expr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.Core.html#Alt"><span class="hs-identifier hs-type">Core.Alt</span></a></span><span> </span><span class="annot"><a href="Elara.Core.html#Var"><span class="hs-identifier hs-type">Core.Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Elara.JVM.IR.html#Expr"><span class="hs-identifier hs-type">IR.Expr</span></a></span><span>
</span><span id="line-138"></span><span id="matchCond"><span class="annot"><span class="annottext">matchCond :: Expr -&gt; Alt Var -&gt; Expr
</span><a href="Elara.JVM.Lower.Match.html#matchCond"><span class="hs-identifier hs-var hs-var">matchCond</span></a></span></span><span> </span><span id="local-6989586621680099204"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680099204"><span class="hs-identifier hs-var">scrut</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680099205"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621680099205"><span class="hs-identifier hs-var">altCon</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Expr Var
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621680099205"><span class="hs-identifier hs-var">altCon</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-139"></span><span>    </span><span class="annot"><a href="Elara.Core.html#LitAlt"><span class="hs-identifier hs-type">Core.LitAlt</span></a></span><span> </span><span id="local-6989586621680099207"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621680099207"><span class="hs-identifier hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BinOp -&gt; Expr -&gt; Expr -&gt; Expr
</span><a href="Elara.JVM.IR.html#BinaryOp"><span class="hs-identifier hs-var">IR.BinaryOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Elara.JVM.IR.html#Equals"><span class="hs-identifier hs-var">IR.Equals</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680099204"><span class="hs-identifier hs-var">scrut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Literal -&gt; Expr
</span><a href="Elara.JVM.Lower.Util.html#lowerLiteral"><span class="hs-identifier hs-var">lowerLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621680099207"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><a href="Elara.Core.html#DataAlt"><span class="hs-identifier hs-type">Core.DataAlt</span></a></span><span> </span><span id="local-6989586621680099211"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680099211"><span class="hs-identifier hs-var">dataCon</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-141"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680099212"><span class="annot"><span class="annottext">className :: QualifiedClassName
</span><a href="#local-6989586621680099212"><span class="hs-identifier hs-var hs-var">className</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Qualified Text -&gt; QualifiedClassName
</span><a href="Elara.JVM.Lower.Util.html#qualifiedTextToClass"><span class="hs-identifier hs-var">qualifiedTextToClass</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680099211"><span class="hs-identifier hs-var">dataCon</span></a></span><span class="hs-operator">.</span><span class="hs-identifier">name</span><span>
</span><span id="line-142"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; FieldType -&gt; Expr
</span><a href="Elara.JVM.IR.html#InstanceOf"><span class="hs-identifier hs-var">IR.InstanceOf</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621680099204"><span class="hs-identifier hs-var">scrut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualifiedClassName -&gt; FieldType
</span><span class="hs-identifier hs-var">JVM.ObjectFieldType</span></span><span> </span><span class="annot"><span class="annottext">QualifiedClassName
</span><a href="#local-6989586621680099212"><span class="hs-identifier hs-var">className</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><span class="annottext">AltCon
</span><a href="Elara.Core.html#DEFAULT"><span class="hs-identifier hs-var">Core.DEFAULT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Expr
</span><a href="Elara.JVM.IR.html#LitBool"><span class="hs-identifier hs-var">IR.LitBool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-144"></span></pre></body></html>